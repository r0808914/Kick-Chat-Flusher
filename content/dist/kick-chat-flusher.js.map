{"version":3,"file":"kick-chat-flusher.js","mappings":"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AAG;IACZ,IAAI,CAACoN,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC;IACjD,IAAI,CAACC,cAAc,GAAG,CAAC,UAAU,EAAE,MAAM,EAAE,aAAa,EAAE,WAAW,EAAE,OAAO,EAAE,cAAc,CAAC;IAC/F,IAAI,CAACpK,UAAU,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC;IAC9C,IAAI,CAACqK,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,aAAa,GAAG,CAAC;IACtB,IAAI,CAACrK,SAAS,GAAG,CAAC;IAClB,IAAI,CAACsK,SAAS,GAAG,CAAC;IAClB,IAAI,CAACrC,KAAK,GAAG,KAAK;IAClB,IAAI,CAACsC,KAAK,GAAG,IAAI;IACjB,IAAI,CAAC1G,UAAU,GAAG,KAAK;IACvB,IAAI,CAACpF,WAAW,GAAG,IAAI;IACvB,IAAI,CAAC+L,MAAM,GAAG,IAAI;IAClB,IAAI,CAAChF,SAAS,GAAG,IAAI;IACrB,IAAI,CAAC6C,SAAS,GAAG,KAAK;EACxB;AACF;;;;;;;;;;;;;;ACjBA,MAAMoC,QAAQ,GAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AAEP,MAAMC,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;AAC9B,MAAMC,GAAG,GAAGF,MAAM,CAACG,eAAe,CAACJ,QAAQ,EAAE,WAAW,CAAC;AAClD,MAAMK,IAAI,GAAGF,GAAG,CAACnI,IAAI,CAACxD,UAAU;;;;;;;;;;;;;;;;;;;;;;ACnTH;AAC0B;AACZ;AACe;AAE1D,SAASkM,UAAUA,CAACnN,OAAO,EAAE;EACjC,MAA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E;cAC9BgC,SAAS,EAAE,IAAI;cACfC,OAAO,EAAE;YACX,CAAC,CAAC;UACJ,CAAC,EAAE,IAAI,CAAC;QACV;MACF,CAAC,CAAC;MAEFua,aAAa,CAACta,OAAO,CAACnC,QAAQ,CAACC,IAAI,EAAE;QACnCgC,SAAS,EAAE,IAAI;QACfC,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC;IAEDsa,YAAY,CAAC,CAAC;EAChB;AACF;AAEA,iEAAeF,IAAI;;;;;;;;;;;;;;ACrFnB,MAAMliB,MAAM,CAAC;EAEVwiB,cAAc,GAAI;AACrB;AACA;AACA;AACA,OAAO;EAEJC,UAAU,GAAI;AACjB;AACA,yIAAyI;EAEtIC,YAAY,GAAI;AACnB;AACA,OAAO;EAEJC,KAAK,GAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,QAAQ,GAAI;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,aAAa,GAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,aAAa,GAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,aAAa,GAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,WAAW,GAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,MAAM,GAAI;AACb;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,uBAAuBA,CAACC,SAAS,EAAE;IAChC,MAAMrV,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;IAC9B,MAAMqV,MAAM,GAAGtV,MAAM,CAACG,eAAe,CAACkV,SAAS,EAAE,eAAe,CAAC;IACjE,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","sources":["webpack:///./modules/flusher/flusher.js","webpack:///./modules/flusher/messages.js","webpack:///./modules/flusher/props.js","webpack:///./modules/flusher/states.js","webpack:///./modules/interface/menu/element.js","webpack:///./modules/interface/menu/menu.js","webpack:///./modules/interface/overlay.js","webpack:///./modules/interface/toggle/element.js","webpack:///./modules/interface/toggle/toggle.js","webpack:///./modules/layout/horizontal.js","webpack:///./modules/layout/vertical.js","webpack:///./modules/queue/queue.js","webpack:///./modules/site/ip2.js","webpack:///./modules/site/kick.js","webpack:///./modules/utils/badges.js","webpack:///./modules/utils/drag.js","webpack:///./modules/utils/resize.js","webpack:///./modules/utils/utils.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./modules/content.js"],"sourcesContent":["import { FlusherStates } from './states.js';\nimport { FlusherProps } from './props.js';\nimport { FlusherMessages } from './messages.js';\nimport { visibilityChange, logToConsole } from \"../utils/utils.js\";\nimport { stopScrollingInterval } from '../utils/resize.js'\n\nimport Badges from '../utils/badges.js';\n\nexport class Flusher {\n\tconstructor(video, domain, channelName, aeroKick) {\n\t\tthis.video = video;\n\t\tthis.states = new FlusherStates();\n\t\tthis.props = new FlusherProps();\n\t\tthis.badges = new Badges().badgeTypeToSVG;\n\t\tthis.props.domain = domain;\n\t\tthis.props.external = domain === 'KICK' ? false : true;\n\t\tthis.props.isVod = window.location.href.includes('/video/');\n\t\tthis.props.isAeroKick = aeroKick ?? false;\n\t\tthis.props.channelName = channelName;\n\n\t\tthis.provider = new FlusherMessages();\n\n\t\tvisibilityChange(this);\n\t}\n\n\tresetConnection() {\n\t\t/* logToConsole('Reset Connection'); */\n\n\t\tif (!this.props.flusher) return;\n\t\tclearChat(this.props.flusher);\n\t\tisVod = false;\n\t\tif (this.props.flusher && this.props.resizeObserver) {\n\t\t\tthis.props.resizeObserver.disconnect();\n\t\t}\n\t}\n\n\tclear() {\n\t\tif (this.container) this.container.style.display = 'none';\n\n\t\tconst isEnabled = this.states.chatEnabled;\n\t\tthis.states.chatEnabled = false;\n\n\t\tthis.props.elementQueue.length = 0;\n\t\tthis.props.messageQueue.length = 0;\n\t\tthis.props.lastRow = 0;\n\t\tfor (const id of this.props.timeoutIds) {\n\t\t\tclearTimeout(id);\n\t\t}\n\n\t\tstopScrollingInterval(this);\n\n\t\tif (this.container !== null) {\n\t\t\twhile (this.container.firstChild) {\n\t\t\t\tthis.container.removeChild(this.container.firstChild);\n\t\t\t}\n\t\t}\n\n\t\tthis.props.displayedMessages = [];\n\n\t\tthis.props.messageObservers.forEach((observer, entryId) => {\n\t\t\tobserver.disconnect();\n\t\t\tthis.props.messageObservers.delete(entryId);\n\t\t});\n\n\t\tif (this.props.lastPositionPerRow) {\n\t\t\tthis.props.lastPositionPerRow.length = 0;\n\t\t} else {\n\t\t\tthis.props.lastPositionPerRow = [];\n\t\t}\n\n\t\tif (this.props.rowQueue) {\n\t\t\tthis.props.rowQueue.length = 0;\n\t\t} else {\n\t\t\tthis.props.rowQueue = [];\n\t\t}\n\n\t\tthis.props.timeoutIds.length = 0;\n\n\t\tif (this.container !== null) this.container.style.display = 'flex';\n\n\t\tthis.states.chatEnabled = isEnabled;\n\n\t\tthis.props.isProcessingElements = false;\n\t\tthis.props.isProcessingMessages = false;\n\t}\n\n\tsetVerticalWidth() {\n\t\tconst elementHeight = this.props.elementHeight;\n\t\tswitch (this.states.sizeStates[this.states.sizeState]) {\n\t\t\tcase 'LARGE':\n\t\t\t\tthis.container.style.setProperty('--flusher-vertical-width', `${elementHeight * 14}px`);\n\t\t\t\tbreak;\n\t\t\tcase 'NORMAL':\n\t\t\t\tthis.container.style.setProperty('--flusher-vertical-width', `${elementHeight * 14}px`);\n\t\t\t\tbreak;\n\t\t\tcase 'SMALL':\n\t\t\t\tthis.container.style.setProperty('--flusher-vertical-width', `${elementHeight * 9}px`);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import { processMessageQueue, processElementQueue, createUserBanMessage } from \"../queue/queue.js\";\nimport { logToConsole } from \"../utils/utils.js\";\n\nexport class FlusherMessages {\n  constructor() {\n    /* logToConsole(\"Create MessageProvider\"); */\n    this.socket = null;\n    this.nativeChatObserver = null;\n    this.channels = new Set();\n  }\n\n  subscribeChannel(flusher) {\n    const id = flusher.props.chatroomId;\n    if (!id) return;\n    if (this.channels.has(id)) {\n      /* logToConsole(`Channel ${id} Is Already Subscribed.`); */\n      return;\n    }\n\n    const subscriptionMessage = {\n      event: \"pusher:subscribe\",\n      data: { auth: \"\", channel: `chatrooms.${id}.v2` },\n    };\n\n    if (!this.socket) {\n      this.setupWebSocket(flusher, subscriptionMessage, id);\n      return;\n    }\n\n    logToConsole(`WebSocket Connection Opened: ${flusher.props.channelName} (${id})`);\n\n    this.socket.send(JSON.stringify(subscriptionMessage));\n    this.channels.add(id);\n\n    if (flusher.props.external) this.getHistory(flusher);\n  }\n\n  async getHistory(flusher) {\n    const apiUrl = `https://kick.com/api/v2/channels/${flusher.props.hostId}/messages`;\n\n    try {\n      const response = await fetch(apiUrl);\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch messages. Status: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data && data.data && data.data.messages) {\n        /* logToConsole(`History Has ${data.data.messages.length} Messages`); */\n        data.data.messages.forEach((message) => {\n          flusher.props.messageQueue.push(message);\n        });\n        processMessageQueue(flusher);\n      } else {\n        /* logToConsole(\"No Messages Found In The Response.\"); */\n      }\n    } catch (error) {\n      console.error(\"Error Fetching Messages:\", error.message);\n    }\n  }\n\n  setupWebSocket(flusher) {\n    /* logToConsole(`Setup WebSocket: ${flusher.props.channelName} (${flusher.props.chatroomId})`); */\n    if (this.socket) return;\n\n    /* console.log('run test');\n\n    const eventData = {\n      \"event\": \"App\\\\Events\\\\UserBannedEvent\",\n      \"channel\": \"chatrooms.123456.v2\",\n      \"data\": {\n        \"id\": \"7b1d6e2c-ba4f-4d88-87b0-9c9e67a0e731\",\n        \"user\": {\n          \"id\": 1234567,\n          \"username\": \"User123\",\n          \"slug\": \"user123\"\n        },\n        \"banned_by\": {\n          \"id\": 0,\n          \"username\": \"Mod123\",\n          \"slug\": \"mod123\"\n        },\n        \"expires_at\": \"2024-03-21T14:18:30+00:00\"\n      }\n    };\n\n    createUserBanMessage(eventData.data, flusher); */\n\n    const webSocketUrl = \"wss://ws-us2.pusher.com/app/eb1d5f283081a78b932c?protocol=7&client=js&version=7.6.0&flash=false\";\n\n    this.socket = new WebSocket(webSocketUrl);\n\n    this.socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      document.body.contains(flusher.video)\n        ? this.onMessage(data, flusher)\n        : this.disposeChannel();\n    };\n\n    this.socket.addEventListener(\"open\", (event) => {\n      this.subscribeChannel(flusher);\n    });\n\n    this.socket.addEventListener(\"close\", (event) => {\n      logToConsole(`WebSocket Connection Closed: ${flusher.props.channelName} (${flusher.props.chatroomId})`);\n      this.channels.clear();\n    });\n\n    this.socket.addEventListener(\"error\", (event) => {\n      console.error(\"WebSocket error:\", event);\n    });\n  }\n\n  onMessage(data, flusher) {\n    if (!flusher.states.chatEnabled || data === null || flusher.props.loading)\n      return;\n    flusher.props.messageQueue.push(data);\n    processMessageQueue(flusher);\n  }\n\n  disposeChannel() {\n    if (this.socket) {\n      this.socket.close();\n      this.socket = null;\n      return;\n    }\n  }\n\n  async interceptNative(flusher) {\n    /* logToConsole(`Intercept Native Chat`); */\n    const self = this;\n    self.flusher = flusher;\n\n    const AeroKick = document.body.classList.contains(\"aerokick-customization\");\n    if (AeroKick) logToConsole(`AeroKick Detected`);\n\n    const nativeChat = await waitForChat(\n      flusher.props.isVod\n        ? document.querySelector(\"#chatroom-replay\")\n        : document.querySelector(\n          AeroKick\n            ? \".chat-container .bk-overflow-y-auto\"\n            : \".overflow-y-scroll.py-3\"\n        ),\n      AeroKick\n    );\n\n    const b = typeof browser !== \"undefined\" ? browser : chrome;\n    const defaultAvatar = b.runtime.getURL(\"lib/kick/user-profile-pic.png\");\n\n    if (!flusher.states.flushState)\n      setTimeout(() => {\n        checkDupe(nativeChat.childNodes, AeroKick, false);\n      }, 500);\n\n    this.nativeChatObserver = new MutationObserver((mutations) => {\n      const nodesList = flusher.props.isVod ? mutations.reverse() : mutations;\n      nodesList.forEach((mutation) => {\n        if (mutation.type === \"childList\") {\n          checkDupe(mutation.addedNodes, AeroKick);\n        }\n      });\n    });\n\n    const observerConfig = { childList: true, subtree: false };\n    this.nativeChatObserver.observe(nativeChat, observerConfig);\n\n    async function checkDupe(addedNodes, AeroKick) {\n\n      addedNodes.forEach((addedNode) => {\n        if (!addedNode || addedNode.nodeName !== \"DIV\") return;\n\n        if (AeroKick && !flusher.props.isVod) {\n          const button = addedNode.querySelector(\"button\");\n          if (!button) {\n            console.log(\n              \"Kick Chat Flusher - Button does not exist in the added node:\",\n              addedNode\n            );\n            return;\n          }\n        }\n\n        const id =\n          AeroKick && flusher.props.isAeroKick\n            ? addedNode.querySelector(\"button\").getAttribute(\"data-radial-id\")\n            : addedNode.getAttribute(\"data-chat-entry\");\n        if (\n          id === \"history_breaker\" ||\n          (flusher.states.flushState && (!id || id === \"\"))\n        )\n          return;\n\n        if (id || id === \"\") {\n\n          const userId =\n            AeroKick && flusher.props.isAeroKick\n              ? addedNode\n                .querySelector(\"button\")\n                .getAttribute(\"data-radial-username\")\n              : addedNode\n                .querySelector(\"[data-chat-entry-user-id]\")\n                ?.getAttribute(\"data-chat-entry-user-id\");\n\n          if (self.flusher.props.isKickTools) {\n            if (addedNode.style.opacity ?? 1 < 1) {\n              const isUserBanned = self.flusher.props.bannedUsers.some(user => user.id === userId);\n              if (isUserBanned) { console.log(userId + ' allowed'); } else {\n                return;\n              }\n            }\n          }\n\n          if (!flusher.states.spamState || flusher.states.flushState) {\n            let uniqueString = \"\";\n            uniqueString += userId + \"-\";\n\n            const divTextContent =\n              AeroKick && flusher.props.isAeroKick\n                ? addedNode.querySelector(\"span.bk-inline\").textContent\n                : addedNode.querySelector(\".chat-entry-content\")?.textContent;\n            uniqueString += divTextContent + \"-\";\n\n            if (AeroKick && flusher.props.isAeroKick) {\n              const emoteElements = addedNode.querySelectorAll(\"img\");\n              emoteElements.forEach((emoteElement) => {\n                const emoteValue = emoteElement.getAttribute(\"alt\");\n                uniqueString += emoteValue;\n              });\n            } else {\n              const emoteElements =\n                addedNode.querySelectorAll(\"[data-emote-name]\");\n              emoteElements.forEach((emoteElement) => {\n                const emoteValue = emoteElement.getAttribute(\"data-emote-name\");\n                uniqueString += emoteValue;\n              });\n            }\n\n            const exist = flusher.props.displayedMessages.find((obj) => {\n              return obj.key === uniqueString;\n            });\n\n            if (exist && (!flusher.states.spamState || flusher.states.flushState)) return;\n\n            flusher.props.displayedMessages.push({ id: id, key: uniqueString });\n          }\n        }\n        setTimeout(() => prepareMessage(addedNode, id, defaultAvatar, false), 150);\n      });\n    }\n\n    async function prepareMessage(node, id, defaultAvatar, update) {\n      const clonedNode = node.cloneNode(true);\n\n      if (self.flusher.props.isAeroKick) {\n        clonedNode.style.fontSize = null;\n        clonedNode.style.marginTop = null;\n        clonedNode.classList.remove(\"relative\", \"bk-pl-1.5\");\n\n        if (flusher.states.flushState) {\n          var elements = clonedNode.querySelectorAll(\"[class*=bk-top-]\");\n\n          elements.forEach((element) => {\n            var classes = element.classList;\n            var classesToRemove = Array.from(classes).filter((className) =>\n              className.includes(\"bk-top-\")\n            );\n\n            classesToRemove.forEach((className) => {\n              element.classList.remove(className);\n            });\n          });\n        }\n\n        const avatar = clonedNode.querySelector('img[alt=\"avatar\"]');\n\n        if (avatar) {\n          avatar\n            .closest(\"button\")\n            .classList.remove(\n              \"bk-ease-in-out\",\n              \"bk-duration-100\",\n              \"bk-transition-colors\",\n              \"bk-translate-y-px\"\n            );\n          avatar.style.animation = \"none\";\n\n          const username = clonedNode.querySelector(\".bk-text-transparent\");\n          if (username)\n            username.style.color = username.style.backgroundColor ?? \"white\";\n\n          avatar.onerror = function () {\n            this.style.display = \"none\";\n            this.onerror = null;\n            this.src = defaultAvatar;\n            this.style.display = \"block\";\n          };\n        }\n      }\n\n      /* function getRandomColor() {\n            const letters = '0123456789ABCDEF';\n            let color = '#';\n            for (let i = 0; i < 6; i++) {\n               color += letters[Math.floor(Math.random() * 16)];\n            }\n            return color;\n         }\n\n         const randomColor = getRandomColor();\n         node.style.border = `2px solid ${randomColor}`;\n         clonedNode.style.border = `2px solid ${randomColor}`; */\n\n      if (id || id === \"\") {\n        if (\n          (!flusher.states.spamState || flusher.states.flushState) &&\n          !flusher.props.isVod\n        ) {\n          clonedNode\n            .querySelectorAll(\"span:nth-child(3) span\")\n            .forEach(function (element) {\n              if (element.textContent.trim().length > 0) {\n                const regexSentence = /(\\b.+?\\b)\\1+/g;\n                const sentence = element.textContent.replace(\n                  regexSentence,\n                  \"$1\"\n                );\n                const regexChar = /(.)(\\1{10,})/g;\n                element.textContent = sentence.replace(\n                  regexChar,\n                  \"$1$1$1$1$1$1$1$1$1$1\"\n                );\n              }\n            });\n        }\n\n        if (!flusher.states.reply || flusher.states.flushState) {\n          if (AeroKick) {\n            const chatEntry = clonedNode.querySelector(\".bk-text-sm\");\n            if (chatEntry) chatEntry.style.display = \"none\";\n          } else {\n            const chatEntry = clonedNode.querySelector(\".chat-entry\");\n            if (chatEntry && chatEntry.childElementCount > 1) {\n              chatEntry.firstElementChild.style.display = \"none\";\n            }\n          }\n        }\n\n        if (\n          flusher.props.isVod &&\n          (flusher.states.flushState || !flusher.states.timeState)\n        ) {\n          const chatEntryDiv = clonedNode.querySelector(\".chat-entry div\");\n          if (chatEntryDiv && chatEntryDiv.firstElementChild) {\n            chatEntryDiv.firstElementChild.style.display = \"none\";\n          }\n        }\n      }\n\n      clonedNode.classList.remove(\"mt-0.5\");\n\n      if (!update) {\n        addMessage();\n      } else { return clonedNode; }\n\n      function addMessage() {\n        flusher.props.elementQueue.push(clonedNode);\n        processElementQueue(flusher);\n\n        if (id && !flusher.states.flushState) observeNestedChildren(node, id, clonedNode);\n\n        function observeNestedChildren(parentNode, id, clonedNode) {\n          const observer = new MutationObserver(async (mutations) => {\n            if (clonedNode) {\n              clonedNode.replaceWith(await prepareMessage(parentNode, id, defaultAvatar, true));\n            }\n          });\n\n          const observerConfig = { childList: true, subtree: true };\n          observer.observe(parentNode, observerConfig);\n\n          flusher.props.messageObservers.set(id, observer);\n        }\n      }\n    }\n\n    function waitForChat(parent) {\n      /* logToConsole(`Looking For Native Chat`); */\n\n      if (!parent) parent = document.body;\n\n      const chatEntry =\n        parent.querySelector(\".rounded-md.bk-block\") ||\n        parent.querySelector(\"[data-chat-entry]\");\n      if (chatEntry) {\n        /* logToConsole(`Native Chat Found`); */\n        return chatEntry.parentElement;\n      }\n\n      return new Promise((resolve) => {\n        const config = { attributes: true, childList: true, subtree: true };\n        let found = false;\n\n        const mutationCallback = function (mutationsList, observer) {\n          for (const mutation of mutationsList) {\n            if (mutation.type === \"childList\") {\n              mutation.addedNodes.forEach((node) => {\n                if (\n                  node.nodeType === 1 &&\n                  (node.classList.contains(\"bk-block.rounded-md\") ||\n                    node.hasAttribute(\"data-chat-entry\"))\n                ) {\n                  if (found) return;\n                  observer.disconnect();\n                  resolve(node.parentNode);\n                  found = true;\n                  /* logToConsole(`Native Chat Found`); */\n                }\n              });\n            }\n          }\n        };\n\n        const observer = new MutationObserver(mutationCallback);\n        observer.observe(parent, config);\n      });\n    }\n  }\n\n  async bindRequests(flusher) {\n    /* logToConsole(`Bind Requests`); */\n\n    if (!flusher) return;\n\n    if (!flusher.props.external && !this.nativeChatObserver)\n      this.interceptNative(flusher);\n\n    flusher.props.bindTimeout = setTimeout(\n      async () => {\n        if (!flusher) return;\n\n        if (!flusher.props.chatroomId && !flusher.props.isVod) {\n          try {\n            const channelName = flusher.props.channelName.toLowerCase().replace(/\\s/g, '');\n            const response = await fetch(\n              `https://kick.com/api/v1/channels/${channelName}`\n            );\n            const data = await response.json();\n\n            flusher.props.chatroomId =\n              data && data.chatroom && data.chatroom.id;\n\n            /* logToConsole(\n              `chatroomId: ${flusher.props.chatroomId}`\n            ); */\n\n            flusher.props.hostId = data.id;\n\n            if (flusher.props.external) {\n              /* logToConsole(`${data.subscriber_badges.length} Badges`); */\n              flusher.props.badgeCache.push(...data.subscriber_badges);\n            }\n          } catch (error) {\n            console.error(\"Error fetching data:\", error);\n          }\n        }\n\n        if (!this.socket && !flusher.props.isVod)\n          this.subscribeChannel(flusher);\n      },\n      flusher.props.external ? 0 : 5000\n    );\n  }\n\n  unbindRequests(flusher) {\n    /* logToConsole(`Unbind Requests`); */\n    this.disposeChannel(flusher);\n    if (!flusher?.props?.external) {\n      /* logToConsole(`Dispose Native Chat`); */\n      if (this.nativeChatObserver) this.nativeChatObserver.disconnect();\n      this.nativeChatObserver = null;\n      clearTimeout(flusher.props.bindTimeout);\n    }\n  }\n}\n","export class FlusherProps {\n  constructor() {\n    this.chatroomId = null;\n    this.clickOutsideHandlerFunction = null;\n    this.domain = null;\n    this.displayedMessages = [];\n    this.elementQueue = [];\n    this.external = false;\n    this.isFullscreen = false;\n    this.isProcessingElements = false;\n    this.isProcessingMessages = false;\n    this.isVod = false;\n    this.loading = false;\n    this.messageQueue = [];\n    this.badgeCache = [];\n    this.lastPositionPerRow = [];\n    this.rowQueue = [];\n    this.timeoutIds = [];\n    this.bannedUsers = [];\n    this.video = null;\n    this.lastRow = 0;\n    this.maxRows = 99;\n    this.isKickTools = false;\n    this.messageObservers = new Map();\n  }\n}","export class FlusherStates {\n  constructor() {\n    this.backgroundStates = ['SMALL', 'LARGE', 'OFF'];\n    this.positionStates = ['TOP LEFT', 'LEFT', 'BOTTOM LEFT', 'TOP RIGHT', 'RIGHT', 'BOTTOM RIGHT'];\n    this.sizeStates = ['SMALL', 'NORMAL', 'LARGE'];\n    this.backgroundState = 2;\n    this.positionState = 4;\n    this.sizeState = 1;\n    this.fontState = 1;\n    this.reply = false;\n    this.slide = true;\n    this.flushState = false;\n    this.chatEnabled = true;\n    this.shadow = true;\n    this.spamState = true;\n    this.timeState = false;\n  }\n}\n","const menuHtml = `<div class=\"flusher-menu\" style=\"display: none;\">\n  <div class=\"flusher-menu-base\" style=\"display: block;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <div class=\"flusher-menu-title\">Chat&nbsp;Flusher</div>\n      </div><button class=\"flusher-menu-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"flusher-icon icon\"><svg width=\"12\" height=\"12\"\n          viewBox=\"0 0 12 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div class=\"chat-actions-menu-list\">\n        <div class=\"flusher-enable flusher-actions-item\">\n          <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Overlay</div>\n          <div class=\"flex h-10 w-fit items-center justify-end\">\n            <div class=\"flusher-toggle-size-sm\">\n              <div class=\"flusher-toggle\">\n                <div class=\"flusher-toggle-indicator\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"flusher-flush flusher-actions-item\" style=\"display: flex;\">\n          <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Flush</div>\n          <div class=\"flex h-10 w-fit items-center justify-end\">\n            <div class=\"flusher-toggle-size-sm\">\n              <div class=\"flusher-toggle\">\n                <div class=\"flusher-toggle-indicator\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          class=\"flusher-layoutMenu flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\"\n          style=\"display: flex;\">\n          <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Layout</div>\n          <div class=\"flex h-10 w-fit items-center justify-end\">\n            <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg version=\"1.2\"\n              xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n              <path id=\"Layer\" class=\"s0\" d=\"m4.5 12.9l4.9-4.9-4.9-4.9 1.1-1.1 6 6-6 6z\"></path>\n            </svg></div>\n          </div>\n        </div>\n        <div\n          class=\"flusher-settings flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\"\n          style=\"display: flex;\">\n          <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Settings</div>\n          <div class=\"flex h-10 w-fit items-center justify-end\">\n            <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg version=\"1.2\"\n              xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n              <path id=\"Layer\" class=\"s0\" d=\"m4.5 12.9l4.9-4.9-4.9-4.9 1.1-1.1 6 6-6 6z\"></path>\n            </svg></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"flusher-menu-settings\" style=\"display: none;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <button class=\"flusher-settings-back -ml-2 variant-text size-sm flusher-icon-button\">\n          <div style=\"width: 16px; height: 16px;\" class=\"base-icon icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m11.1 3.1l-4.9 4.9 4.9 4.9-1.1 1.1-6-6 6-6z\"></path>\n          </svg></div>\n        </button>\n        <div class=\"pr-3\">Settings</div>\n      </div>\n      <button class=\"flusher-settings-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"base-icon icon\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 13\"\n          fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div class=\"flusher-spam flusher-actions-item\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Show Spam</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-font flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Font Size</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\"></div>\n        </div>\n      </div>\n      <div class=\"flusher-spaced flusher-actions-item\" style=\"display: none;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Spaced</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flusher-background flusher-actions-item\" style=\"display: none;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Background\n        </div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-store flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\">Web Store\n        </div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"\n            fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M3.5 12.5V2H2V14H14V12.5H3.5Z\" fill=\"currentColor\"></path>\n            <path\n              d=\"M5.52869 11.5287L10.9999 6.06125V9.5H12.4999V3.5H6.49994V5H9.93869L4.47119 10.4712L5.52869 11.5287Z\"\n              fill=\"currentColor\"></path>\n          </svg></div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-home flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\">Report Bugs\n        </div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"\n            fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M3.5 12.5V2H2V14H14V12.5H3.5Z\" fill=\"currentColor\"></path>\n            <path\n              d=\"M5.52869 11.5287L10.9999 6.06125V9.5H12.4999V3.5H6.49994V5H9.93869L4.47119 10.4712L5.52869 11.5287Z\"\n              fill=\"currentColor\"></path>\n          </svg></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"flusher-menu-layout\" style=\"display: none;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <button class=\"flusher-layout-back -ml-2 variant-text size-sm flusher-icon-button\">\n          <div style=\"width: 16px; height: 16px;\" class=\"base-icon icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m11.1 3.1l-4.9 4.9 4.9 4.9-1.1 1.1-6-6 6-6z\"></path>\n          </svg></div>\n        </button>\n        <div class=\"pr-3\">Layout</div>\n      </div>\n      <button class=\"flusher-layout-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"base-icon icon\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 13\"\n          fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div\n        class=\"flusher-messageMenu flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\"\n        style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Message</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m4.5 12.9l4.9-4.9-4.9-4.9 1.1-1.1 6 6-6 6z\"></path>\n          </svg></div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-overlayMenu flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\"\n        style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Overlay</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m4.5 12.9l4.9-4.9-4.9-4.9 1.1-1.1 6 6-6 6z\"></path>\n          </svg></div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n  <div class=\"flusher-menu-message\" style=\"display: none;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <button class=\"flusher-message-back -ml-2 variant-text size-sm flusher-icon-button\">\n          <div style=\"width: 16px; height: 16px;\" class=\"base-icon icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m11.1 3.1l-4.9 4.9 4.9 4.9-1.1 1.1-6-6 6-6z\"></path>\n          </svg></div>\n        </button>\n        <div class=\"pr-3\">Message</div>\n      </div>\n      <button class=\"flusher-message-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"base-icon icon\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 13\"\n          fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div class=\"flusher-reply flusher-actions-item\" style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Show Reply</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flusher-slide flusher-actions-item\" style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Animation</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flusher-shadow flusher-actions-item\" style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Text Shadow</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flusher-time flusher-actions-item\" style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Show Time</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"flusher-background flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Background</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"flusher-menu-overlay\" style=\"display: none;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <button class=\"flusher-overlay-back -ml-2 variant-text size-sm flusher-icon-button\">\n          <div style=\"width: 16px; height: 16px;\" class=\"base-icon icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m11.1 3.1l-4.9 4.9 4.9 4.9-1.1 1.1-6-6 6-6z\"></path>\n          </svg></div>\n        </button>\n        <div class=\"pr-3\">Overlay</div>\n      </div>\n      <button class=\"flusher-overlay-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"base-icon icon\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 13\"\n          fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div\n        class=\"flusher-position flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Position</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\"></div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-size flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Size</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>`;\n\nconst parser = new DOMParser();\nconst doc = parser.parseFromString(menuHtml, 'text/html');\nexport const menu = doc.body.firstChild;","import { menu } from './element.js';\nimport { createToggle, svgToggle } from '../toggle/toggle.js';\nimport { dragElement } from '../../utils/drag.js';\nimport { toTitleCase, logToConsole } from '../../utils/utils.js';\n\nexport function createMenu(flusher) {\n   const toggledClass = 'toggled-on';\n\n   /* flusher.video = flusher.props.external ? flusher.video : flusher.video.closest('.video-js'); */\n   const domMenu = flusher.video.querySelector('.flusher-menu');\n   if (domMenu === null) {\n      const b = typeof browser !== 'undefined' ? browser : chrome;\n      let parent = flusher.props.external ? flusher.video.parentNode : flusher.props.isAeroKick ? flusher.video.closest('#bk-video-player') : document.querySelector('.vjs-control-bar');\n\n      const shadowBox = document.createElement('div');\n      shadowBox.id = 'shadowbox';\n      if (flusher.props.isAeroKick) shadowBox.style.zIndex = 1001;\n\n      const shadowRoot = shadowBox.attachShadow({ mode: 'open' });\n\n      const linkElement = document.createElement('link');\n      linkElement.rel = 'stylesheet';\n      linkElement.href = b.runtime.getURL('lib/kick/app.b67a4f06.css');\n      shadowRoot.appendChild(linkElement);\n\n      const menuLink = document.createElement('link');\n      menuLink.rel = 'stylesheet';\n      menuLink.href = b.runtime.getURL('lib/flusher/menu.css');\n      shadowRoot.appendChild(menuLink);\n\n      flusher.menu = menu.cloneNode(true);\n      flusher.menu.setAttribute('domain', flusher.props.domain);\n\n      shadowRoot.appendChild(flusher.menu);\n      parent.append(shadowBox);\n      parent = parent.querySelector('#shadowbox').shadowRoot;\n\n      let settingsMenu = parent.querySelector('.flusher-menu-settings');\n      let layoutMenu = parent.querySelector('.flusher-menu-layout');\n      let messageMenu = parent.querySelector('.flusher-menu-message');\n      let overlayMenu = parent.querySelector('.flusher-menu-overlay');\n\n      const closeBtn = parent.querySelector('.flusher-menu-close');\n      closeBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const homeBtn = parent.querySelector('.flusher-home');\n      homeBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n         window.open('https://github.com/r0808914/Kick-Chat-Flusher/issues', '_blank');\n      });\n\n      const storeBtn = parent.querySelector('.flusher-store');\n      storeBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n         const userAgent = navigator.userAgent.toLowerCase();\n         userAgent.includes(\"firefox\") ?\n            window.open('https://addons.mozilla.org/en-US/firefox/addon/kickchatflusher/', '_blank') :\n            window.open('https://chromewebstore.google.com/detail/kick-chat-flusher/cefplanllnmdnnhncpopljmcjnlafdke', '_blank');\n      });\n\n      const positionBtn = overlayMenu.querySelector('.flusher-position');\n      const divInsidePosition = positionBtn.querySelector('div:empty');\n      divInsidePosition.textContent = toTitleCase(flusher.states.positionStates[flusher.states.positionState]);\n\n      positionBtn.addEventListener('mousedown', function (event) {\n         flusher.states.positionState = (flusher.states.positionState + 1) % flusher.states.positionStates.length;\n         divInsidePosition.textContent = toTitleCase(flusher.states.positionStates[flusher.states.positionState]);\n         flusher.container.setAttribute('position', flusher.states.positionStates[flusher.states.positionState].replace(/\\s/g, \"\"));\n         chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n            flusher.container.style.top = \"\";\n            flusher.container.style.left = \"\";\n            flusher.container.style.alignItems = \"\";\n\n            var positionsPerChannel = result.positionsPerChannel || {};\n            var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n            var existingPositionIndex = positionsArray.findIndex(function (item) {\n               return item.videoSize === flusher.props.videoSize;\n            });\n\n            if (existingPositionIndex !== -1 && positionsArray[existingPositionIndex]?.position?.top !== undefined) {\n               delete positionsArray[existingPositionIndex].position.top;\n               delete positionsArray[existingPositionIndex].position.left;\n            } else {\n               if (positionsArray[existingPositionIndex]?.position) {\n                  positionsArray[existingPositionIndex].position.location = flusher.states.positionState;\n               } else {\n                  positionsArray.push({\n                     videoSize: flusher.props.videoSize,\n                     position: {\n                        location: flusher.states.positionState\n                     }\n                  });\n               }\n            }\n\n            positionsPerChannel[flusher.props.channelName] = positionsArray;\n\n            chrome.storage.local.set({ \"positionsPerChannel\": positionsPerChannel }, function () {\n               /* console.log(\"positionsPerChannel:\", positionsPerChannel); */\n            });\n         });\n\n      });\n\n      const sizeBtn = overlayMenu.querySelector('.flusher-size');\n      const divInsideSize = sizeBtn.querySelector('div:empty');\n      divInsideSize.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.sizeState]);\n\n      sizeBtn.addEventListener('mousedown', function (event) {\n         flusher.states.sizeState = (flusher.states.sizeState + 1) % flusher.states.sizeStates.length;\n         divInsideSize.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.sizeState]);\n         flusher.container.setAttribute('size', flusher.states.sizeStates[flusher.states.sizeState].replace(/\\s/g, \"\"));\n         flusher.setVerticalWidth();\n         chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n            flusher.container.style.width = \"\";\n            flusher.container.style.height = \"\";\n\n            var positionsPerChannel = result.positionsPerChannel || {};\n            var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n            var existingPositionIndex = positionsArray.findIndex(function (item) {\n               return item.videoSize === flusher.props.videoSize;\n            });\n\n            if (existingPositionIndex !== -1 && positionsArray[existingPositionIndex].position.width) {\n               delete positionsArray[existingPositionIndex].position.width;\n               delete positionsArray[existingPositionIndex].position.height;\n            } else {\n               if (positionsArray[existingPositionIndex]?.position) {\n                  positionsArray[existingPositionIndex].position.size = flusher.states.sizeState;\n               } else {\n                  positionsArray.push({\n                     videoSize: flusher.props.videoSize,\n                     position: {\n                        size: flusher.states.sizeState\n                     }\n                  });\n               }\n            }\n\n            positionsPerChannel[flusher.props.channelName] = positionsArray;\n\n            chrome.storage.local.set({ \"positionsPerChannel\": positionsPerChannel }, function () {\n               /* console.log(\"Position removed for videoSize:\", flusher.props.videoSize); */\n            });\n         });\n      });\n\n      const backgroundBtn = messageMenu.querySelector('.flusher-background');\n      const divInsideBackground = backgroundBtn.querySelector('div:empty');\n      divInsideBackground.textContent = toTitleCase(flusher.states.backgroundStates[flusher.states.backgroundState]);\n\n      backgroundBtn.addEventListener('mousedown', function (event) {\n         flusher.states.backgroundState = (flusher.states.backgroundState + 1) % flusher.states.backgroundStates.length;\n         setExtensionStorageItem('flusher-background', flusher.states.backgroundState);\n         divInsideBackground.textContent = toTitleCase(flusher.states.backgroundStates[flusher.states.backgroundState]);\n         flusher.container.setAttribute('background', flusher.states.backgroundStates[flusher.states.backgroundState]);\n      });\n\n      const baseMenu = parent.querySelector('.flusher-menu-base');\n\n      const settingsBtn = parent.querySelector('.flusher-settings');\n      settingsBtn.addEventListener('mousedown', function (event) {\n         settingsMenu.style.display = 'block';\n         baseMenu.style.display = 'none';\n      });\n\n      const settingsBackBtn = parent.querySelector('.flusher-settings-back');\n      settingsBackBtn.addEventListener('mousedown', function (event) {\n         settingsMenu.style.display = 'none';\n         baseMenu.style.display = 'block';\n      });\n\n      const settingsCloseBtn = parent.querySelector('.flusher-settings-close');\n      settingsCloseBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const layoutCloseBtn = parent.querySelector('.flusher-layout-close');\n      layoutCloseBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const layoutMenuBtn = parent.querySelector('.flusher-layoutMenu');\n      layoutMenuBtn.addEventListener('mousedown', function (event) {\n         layoutMenu.style.display = 'block';\n         baseMenu.style.display = 'none';\n      });\n\n      const layoutBackBtn = parent.querySelector('.flusher-layout-back');\n      layoutBackBtn.addEventListener('mousedown', function (event) {\n         layoutMenu.style.display = 'none';\n         baseMenu.style.display = 'block';\n      });\n\n      const messageCloseBtn = parent.querySelector('.flusher-message-close');\n      messageCloseBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const messageMenuBtn = parent.querySelector('.flusher-messageMenu');\n      messageMenuBtn.addEventListener('mousedown', function (event) {\n         messageMenu.style.display = 'block';\n         layoutMenu.style.display = 'none';\n      });\n\n      const messageBackBtn = parent.querySelector('.flusher-message-back');\n      messageBackBtn.addEventListener('mousedown', function (event) {\n         messageMenu.style.display = 'none';\n         layoutMenu.style.display = 'block';\n      });\n\n      const overlayCloseBtn = parent.querySelector('.flusher-overlay-close');\n      overlayCloseBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const overlayMenuBtn = parent.querySelector('.flusher-overlayMenu');\n      overlayMenuBtn.addEventListener('mousedown', function (event) {\n         chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n            var positionsPerChannel = result.positionsPerChannel || {};\n\n            var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n            var existingPositionIndex = positionsArray.findIndex(function (item) {\n               return item.videoSize === flusher.props.videoSize;\n            });\n\n            if (existingPositionIndex !== -1) {\n               if (positionsPerChannel[flusher.props.channelName][existingPositionIndex].position.top) {\n                  divInsidePosition.textContent = \"Custom\";\n               } if (positionsPerChannel[flusher.props.channelName][existingPositionIndex].position.width) {\n                  divInsideSize.textContent = \"Custom\";\n               }\n            }\n\n            overlayMenu.style.display = 'block';\n            layoutMenu.style.display = 'none';\n         });\n      });\n\n      const overlayBackBtn = parent.querySelector('.flusher-overlay-back');\n      overlayBackBtn.addEventListener('mousedown', function (event) {\n         overlayMenu.style.display = 'none';\n         layoutMenu.style.display = 'block';\n      });\n\n      (flusher.states.flushState || !flusher.states.chatEnabled) ? layoutMenuBtn.style.display = 'none' : layoutMenuBtn.style.display = 'flex';\n\n      const spamBtnContainer = parent.querySelector('.flusher-spam');\n      const spamBtn = spamBtnContainer.querySelector('.flusher-toggle');\n      spamBtn.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n         const newSpamEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.spamState = newSpamEnabled;\n         setExtensionStorageItem('flusher-spam', newSpamEnabled);\n         flusher.props.displayedMessages = [];\n      });\n\n      (flusher.states.flushState || !flusher.states.chatEnabled) ? spamBtnContainer.style.display = 'none' : spamBtnContainer.style.display = 'flex';\n      if (flusher.states.spamState) spamBtn.classList.toggle(toggledClass);\n\n      const fontBtn = settingsMenu.querySelector('.flusher-font');\n      const divInsideFont = fontBtn.querySelector('div:empty');\n      divInsideFont.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.fontState]);\n\n      fontBtn.addEventListener('mousedown', function (event) {\n         flusher.states.fontState = (flusher.states.fontState + 1) % flusher.states.sizeStates.length;\n         setExtensionStorageItem('flusher-font', flusher.states.fontState);\n         divInsideFont.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.fontState]);\n         flusher.container.setAttribute('font', flusher.states.sizeStates[flusher.states.fontState].replace(/\\s/g, \"\"));\n         if (flusher.states.flushState) flusher.clear();\n      });\n\n      (!flusher.states.chatEnabled) ? fontBtn.style.display = 'none' : fontBtn.style.display = 'flex';\n\n      const replyToggleContainer = parent.querySelector('.flusher-reply');\n      const replyToggle = replyToggleContainer.querySelector('.flusher-toggle');\n      replyToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newReplyEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.reply = newReplyEnabled;\n\n         flusher.container.childNodes.forEach(childNode => {\n            const chatEntry = childNode.querySelector('.chat-entry');\n            if (chatEntry && chatEntry.childElementCount > 1) {\n               chatEntry.firstElementChild.style.display = flusher.states.reply ? 'flex' : 'none';\n            }\n         });\n\n         setExtensionStorageItem('flusher-reply', newReplyEnabled);\n      });\n\n      (flusher.props.external || flusher.props.isVod) ? replyToggleContainer.style.display = 'none' : replyToggleContainer.style.display = 'flex';\n      if (flusher.states.reply) replyToggle.classList.toggle(toggledClass);\n\n      const slideToggleContainer = parent.querySelector('.flusher-slide');\n      const slideToggle = slideToggleContainer.querySelector('.flusher-toggle');\n      slideToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newSlideEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.slide = newSlideEnabled;\n\n         setExtensionStorageItem('flusher-slide', newSlideEnabled);\n      });\n\n      if (flusher.states.slide) slideToggle.classList.toggle(toggledClass);\n\n      const shadowToggleContainer = parent.querySelector('.flusher-shadow');\n      const shadowToggle = shadowToggleContainer.querySelector('.flusher-toggle');\n      shadowToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newShadowEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.shadow = newShadowEnabled;\n\n         flusher.container.setAttribute('shadow', newShadowEnabled);\n\n         setExtensionStorageItem('flusher-shadow', newShadowEnabled);\n      });\n\n      if (flusher.states.shadow) shadowToggle.classList.toggle(toggledClass);\n\n      const timeToggleContainer = messageMenu.querySelector('.flusher-time');\n      const timeToggle = timeToggleContainer.querySelector('.flusher-toggle');\n      timeToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newTimeEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.timeState = newTimeEnabled;\n\n         flusher.container.childNodes.forEach(childNode => {\n            const chatEntry = childNode.querySelector('.chat-entry div');\n            chatEntry.firstElementChild.style.display = flusher.states.timeState ? 'initial' : 'none';\n         });\n\n         flusher.container.setAttribute('time', newTimeEnabled);\n         setExtensionStorageItem('flusher-time', newTimeEnabled);\n      });\n\n      if (flusher.states.timeState) timeToggle.classList.toggle(toggledClass);\n      (!flusher.props.isVod || flusher.states.flushState) ? timeToggleContainer.style.display = 'none' : timeToggleContainer.style.display = 'flex';\n\n      const flusherToggleContainer = parent.querySelector('.flusher-flush');\n      const flushToggle = flusherToggleContainer.querySelector('.flusher-toggle');\n      flushToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newFlushState = toggleElement.classList.contains(toggledClass);\n         newFlushState ? layoutMenuBtn.style.display = 'none' : layoutMenuBtn.style.display = 'flex';\n         flusher.states.flushState = newFlushState;\n\n         (flusher.states.flushState || !flusher.states.chatEnabled) ? spamBtnContainer.style.display = 'none' : spamBtnContainer.style.display = 'flex';\n\n         if (flusher.states.chatEnabled && !flusher.states.flushState) dragElement(flusher);\n\n         togglePointerEvents(flusher);\n         flusher.clear();\n         flusher.container.setAttribute('layout', newFlushState ? 'horizontal' : 'vertical');\n\n         setExtensionStorageItem('flusher-flush', newFlushState);\n      });\n\n      (!flusher.states.chatEnabled) ? flusherToggleContainer.style.display = 'none' : flusherToggleContainer.style.display = 'flex';\n      if (flusher.states.flushState) flushToggle.classList.toggle(toggledClass);\n\n      const flusherToggle = parent.querySelector('.flusher-enable .flusher-toggle');\n      flusherToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newChatEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.chatEnabled = newChatEnabled;\n\n         newChatEnabled ? flusher.provider.bindRequests(flusher) : flusher.provider.unbindRequests(flusher)\n\n         if (newChatEnabled && flusher.container.attributes['layout']?.nodeValue === 'vertical') dragElement(flusher);\n\n         flusher.clear();\n\n         svgToggle(flusher);\n         toggleEnableMenu();\n         togglePointerEvents(flusher);\n\n         (flusher.states.flushState || !flusher.states.chatEnabled) ? spamBtnContainer.style.display = 'none' : spamBtnContainer.style.display = 'flex';\n         (flusher.states.flushState || !flusher.states.chatEnabled) ? layoutMenuBtn.style.display = 'none' : layoutMenuBtn.style.display = 'flex';\n         (!flusher.states.chatEnabled) ? flusherToggleContainer.style.display = 'none' : flusherToggleContainer.style.display = 'flex';\n         (!flusher.states.chatEnabled) ? fontBtn.style.display = 'none' : fontBtn.style.display = 'flex';\n\n         flusher.container.setAttribute('enabled', newChatEnabled);\n\n         setExtensionStorageItem('flusher-enable', newChatEnabled);\n      });\n\n      if (flusher.states.chatEnabled) flusherToggle.classList.toggle(toggledClass);\n\n      return createToggle(flusher);\n   }\n\n   function setExtensionStorageItem(key, value) {\n      const data = { [key]: value };\n      chrome.storage.local.set(data, () => {\n         /* logToConsole(`Value for key ${key} has been set to ${value} in extension storage.`); */\n      });\n   }\n}\n\nexport function toggleEnableMenu() {\n   var elementsToToggle = ['flusher-flush', 'flusher-settings', 'flusher-layoutMenu'];\n   elementsToToggle.forEach(function (id) {\n      var element = document.getElementById(id);\n      if (element) {\n         if (id === 'flusher-layoutMenu' && flusher.states.flushState === true && flusher.states.chatEnabled) return;\n         flusher.states.chatEnabled ? flusher.video.style.display = 'flex' : flusher.video.style.display = 'none';\n      }\n   });\n}\n\nexport function hideMenu(flusher) {\n   const baseMenu = flusher.menu.querySelector('.flusher-menu-base');\n   const settingsMenu = flusher.menu.querySelector('.flusher-menu-settings');\n   const layoutMenu = flusher.menu.querySelector('.flusher-menu-layout');\n   const overlayMenu = flusher.menu.querySelector('.flusher-menu-overlay');\n   const messageMenu = flusher.menu.querySelector('.flusher-menu-message');\n\n   flusher.menu.style.display = 'none';\n   settingsMenu.style.display = 'none';\n   baseMenu.style.display = 'none';\n   layoutMenu.style.display = 'none';\n   overlayMenu.style.display = 'none';\n   messageMenu.style.display = 'none';\n\n   svgToggle(flusher);\n   document.removeEventListener('mousedown', flusher.clickOutsideHandlerFunction);\n}\n\nexport function clickOutsideHandler(event, flusher) {\n   if (flusher.menu !== null && !flusher.menu.contains(event.target)\n      && flusher.menu.style.display === 'block'\n      && !isClickInsideShadowBox(event.target)) {\n      if (flusher.toggle.contains(event.target) || event.target === flusher.toggle) return;\n      hideMenu(flusher);\n   }\n   function isClickInsideShadowBox(target) {\n      const path = event.composedPath();\n      return path.some((node) => node.id === 'shadowbox');\n   }\n}\n\nexport function togglePointerEvents(flusher) {\n   if (flusher.states.flushState || !flusher.states.chatEnabled) {\n      flusher.container.classList.remove('flusher-grab');\n      flusher.container.classList.add('flusher-no-grab');\n   } else {\n      flusher.container.classList.remove('flusher-no-grab');\n      flusher.container.classList.add('flusher-grab');\n\n      flusher.props.lastRow = 2;\n      dragElement(flusher);\n   }\n}\n","import { createMenu } from './menu/menu.js';\nimport { checkResize } from '../utils/resize.js';\nimport { getFont, logToConsole, toTitleCase } from '../utils/utils.js';\n\nexport async function createChat(flusher) {\n   if (flusher.video.hasAttribute('flusher')) return;\n   flusher.video.setAttribute('flusher', \"\");\n\n   /* logToConsole(`Create Chat`); */\n\n   const chatFlusher = document.createElement(\"div\");\n   chatFlusher.classList.add(\"flusher\");\n   if (flusher.props.isAeroKick) chatFlusher.style.zIndex = 1000;\n\n   const flusherDiv = document.createElement(\"div\");\n   flusherDiv.classList.add(\"flusher-messages\");\n\n   const shadowRoot = flusher.props.external ? chatFlusher.attachShadow({ mode: 'open' }) : null;\n   const b = typeof browser !== 'undefined' ? browser : chrome;\n\n   const mainStylesDom = document.getElementById('flusher-css-overlay');\n   if (!mainStylesDom) {\n      const overlayStyle = document.createElement('link');\n      overlayStyle.href = b.runtime.getURL('lib/flusher/main.css');\n      overlayStyle.id = 'flusher-css-overlay';\n      overlayStyle.rel = 'stylesheet';\n      document.head.appendChild(overlayStyle);\n\n      const font = getFont();\n      document.head.appendChild(font);\n   }\n\n   const menuStylesDom = document.getElementById('flusher-css');\n   if (!menuStylesDom || flusher.props.external) {\n      const menuStyle = document.createElement('link');\n      menuStyle.href = b.runtime.getURL('lib/flusher/overlay.css');\n      menuStyle.rel = 'stylesheet';\n      menuStyle.id = 'flusher-css';\n      flusher.props.external ? shadowRoot.appendChild(menuStyle) : document.head.append(menuStyle);\n   }\n\n   flusher.container = flusherDiv;\n\n   flusher.states.chatEnabled = await getExtensionStorageItem('flusher-enable', flusher.states.chatEnabled);\n   flusher.states.flushState = await getExtensionStorageItem('flusher-flush', flusher.states.flushState);\n   flusher.states.reply = await getExtensionStorageItem('flusher-reply', flusher.states.reply);\n   flusher.states.spamState = await getExtensionStorageItem('flusher-spam', flusher.states.spamState);\n   flusher.states.fontState = await getExtensionStorageItem('flusher-font', flusher.states.fontState);\n   flusher.states.backgroundState = await getExtensionStorageItem('flusher-background', flusher.states.backgroundState);\n   flusher.states.timeState = await getExtensionStorageItem('flusher-time', flusher.states.timeState);\n   flusher.states.shadow = await getExtensionStorageItem('flusher-shadow', flusher.states.shadow);\n   flusher.states.slide = await getExtensionStorageItem('flusher-slide', flusher.states.slide);\n\n   setCustomPosition(flusher);\n\n   flusher.toggle = createMenu(flusher);\n\n   flusher.video.parentNode.append(chatFlusher);\n   flusher.props.external ? shadowRoot.appendChild(flusherDiv) : chatFlusher.append(flusherDiv);\n   checkResize(flusher);\n\n   function getExtensionStorageItem(key, defaultValue) {\n      return new Promise((resolve) => {\n         chrome.storage.local.get([key], (result) => {\n            const storedValue = result[key];\n            resolve(storedValue !== undefined ? storedValue : defaultValue);\n         });\n      });\n   }\n}\n\nexport function setCustomPosition(flusher) {\n   chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n      var positionsPerChannel = result.positionsPerChannel || {};\n      var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n      var existingPositionIndex = positionsArray.findIndex(function (item) {\n         return item.videoSize === flusher.props.videoSize;\n      });\n\n      if (existingPositionIndex !== -1) {\n         const location = positionsArray[existingPositionIndex].position?.location;\n         const size = positionsArray[existingPositionIndex].position?.size;\n         flusher.states.positionState = location ?? 4;\n         flusher.states.sizeState = size ?? 1;\n      } else {\n         flusher.states.positionState = 4;\n         flusher.states.sizeState = 1;\n      }\n\n      if (flusher.menu) {\n         const sizeBtn = flusher.menu.querySelector('.flusher-size');\n         if (sizeBtn) {\n            const divInsideSize = sizeBtn.querySelector('div.pr-0');\n            divInsideSize.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.sizeState]);\n         }\n\n         const positionBtn = flusher.menu.querySelector('.flusher-position');\n         if (positionBtn) {\n            const divInsidePosition = positionBtn.querySelector('div.pr-0');\n            divInsidePosition.textContent = toTitleCase(flusher.states.positionStates[flusher.states.positionState]);\n         }\n      }\n   });\n}","const toggleHtml = `<button class=\"flusher-toggle vjs-control vjs-button\"><span class=\"vjs-icon-placeholder\" aria-hidden=\"true\"></span><svg\nviewBox=\"0 0 16 16\" color=\"white\" class=\"mx-auto toggle-icon\" style=\"width: 25px;\">\n<path\n  d=\"M12.8191 7.99813C12.8191 7.64949 12.7816 7.30834 12.7104 6.97844L13.8913 6.29616L12.3918 3.69822L11.2071 4.38051C10.7048 3.9269 10.105 3.57076 9.44517 3.35708V2H6.44611V3.36082C5.78632 3.57451 5.19025 3.9269 4.68416 4.38426L3.49953 3.70197L2 6.29616L3.18088 6.97844C3.10965 7.30834 3.07217 7.64949 3.07217 7.99813C3.07217 8.34677 3.10965 8.68791 3.18088 9.01781L2 9.70009L3.49953 12.298L4.68416 11.6157C5.1865 12.0694 5.78632 12.4255 6.44611 12.6392V14H9.44517V12.6392C10.105 12.4255 10.701 12.0731 11.2071 11.6157L12.3918 12.298L13.8913 9.70009L12.7104 9.01781C12.7816 8.68791 12.8191 8.34677 12.8191 7.99813ZM9.82006 9.87254H6.07123V6.12371H9.82006V9.87254Z\"\n  fill=\"currentColor\"></path>\n</svg><span class=\"vjs-control-text\" aria-live=\"polite\">Chat Flusher</span>\n</button>`;\n\nconst parser = new DOMParser();\nconst doc = parser.parseFromString(toggleHtml, 'text/html');\nexport const toggle = doc.body.firstChild;","import { toggle } from './element.js';\nimport { hideMenu, clickOutsideHandler } from '../menu/menu.js';\n\nexport let clickOutsideHandlerFunction = null;\n\nexport function createToggle(flusher) {\n\tconst parent = (!flusher.props.isAeroKick && !flusher.props.external) ? flusher.video.closest('#video-holder') : flusher.video.parentNode;\n\tconst domToggle = parent.querySelector('.flusher-toggle-btn');\n\tif (domToggle !== null) return;\n\n\tconst popupMenu = parent.querySelector('#shadowbox').shadowRoot.querySelector('.flusher-menu');\n\tconst baseMenu = popupMenu.querySelector('.flusher-menu-base');\n\tconst existingButton = flusher.props.external ? parent : flusher.props.isAeroKick ? flusher.video.parentElement.querySelector('button.bk-relative.bk-mr-4') : document.querySelector('.vjs-fullscreen-control');\n\n\tconst toggleBtn = (flusher.props.external || flusher.props.isAeroKick) ? toggle.querySelector('svg').cloneNode(true) : toggle.cloneNode(true);\n\tif (flusher.props.isAeroKick) toggleBtn.style.marginRight = \"1rem\";\n\n\tflusher.props.external ? existingButton.parentNode.append(toggleBtn) : existingButton.parentElement.insertBefore(toggleBtn, flusher.props.isAeroKick ? existingButton : existingButton.nextSibling);\n\n\tsvgToggle(flusher);\n\n\ttoggleBtn.addEventListener('mousedown', function (event) {\n\t\tevent.stopPropagation();\n\t\tpopupMenu.style.display === \"block\" ? hideMenu(flusher) : showMenu();\n\t});\n\n\tfunction showMenu() {\n\t\tbaseMenu.style.display = 'block';\n\t\tpopupMenu.style.display = 'block';\n\t\tsvgToggle(flusher);\n\t\tflusher.clickOutsideHandlerFunction = (event) => clickOutsideHandler(event, flusher);\n\t\tdocument.addEventListener('mousedown', flusher.clickOutsideHandlerFunction);\n\t}\n\treturn toggleBtn;\n}\n\nexport function svgToggle(flusher) {\n\tconst parent = flusher.props.external ? flusher.video.closest('.item-box') : document;\n\tconst toggle = parent.querySelector('.toggle-icon');\n\tif (toggle === null) return;\n\tconst menu = parent.querySelector('#shadowbox').shadowRoot.querySelector('.flusher-menu');\n\tconst visible = menu.style.display === \"block\" ? true : false;\n\tif (flusher.states.chatEnabled || visible) {\n\t\ttoggle.classList.add('svg-toggle');\n\t} else {\n\t\ttoggle.classList.remove('svg-toggle');\n\t}\n}","export function selectRow(message, flusher) {\n\tlet selectedRow = 0;\n\tconst positions = flusher.props.lastPositionPerRow.length ?? 0;\n\tif (positions > 0) {\n\t\tfor (let i = 0; i < positions; i++) {\n\n\t\t\tconst item = flusher.props.lastPositionPerRow[i];\n\n\t\t\tif (item === undefined || item.run === true) {\n\t\t\t\tselectedRow = i;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (flusher.props.rowQueue[i].length < 2) {\n\t\t\t\tmessage.row = i;\n\t\t\t\tmessage = prepareAnimation(message, flusher);\n\t\t\t\tif (message !== null) flusher.props.rowQueue[i].push(message);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselectedRow = i + 1;\n\t\t}\n\t}\n\n\tmessage.row = selectedRow;\n\n\tflusher.props.rowQueue[selectedRow] = flusher.props.rowQueue[selectedRow] ?? [];\n\n\tmessage = prepareAnimation(message, flusher);\n\tif (message !== null) startAnimation(message, flusher);\n}\n\nfunction startAnimation(messageData, flusher) {\n\tconst message = messageData.container;\n\tconst space = 4;\n\tconst rowIndex = messageData.row;\n\n\tconst lastItem = flusher.props.lastPositionPerRow?.[rowIndex];\n\t!flusher.props.lastPositionPerRow ? flusher.props.lastPositionPerRow = [] : null;\n\tflusher.props.lastPositionPerRow[rowIndex] = { container: message, run: false };\n\n\tlet overlap = 0;\n\tlet messageWidth;\n\tconst lastContainer = lastItem !== undefined ? lastItem.container : undefined;\n\n\tif (lastContainer !== undefined) {\n\n\t\trequestAnimationFrame(() => {\n\t\t\tflusher.container.appendChild(message);\n\t\t\tmessageWidth = message.offsetWidth;\n\t\t\tmessage.style.marginRight = `-${messageWidth}px`;\n\n\t\t\tconst rect1 = message.getBoundingClientRect();\n\t\t\tconst rect2 = lastContainer.getBoundingClientRect();\n\n\t\t\toverlap = rect2.right - rect1.left;\n\n\t\t\t/* queue running */\n\t\t\tif (lastItem.run === false) {\n\t\t\t\tmessage.style.marginRight = `-${(messageWidth + overlap + space)}px`;\n\t\t\t\tmessage.classList.add('flusher-animation');\n\t\t\t}\n\n\t\t\t/* queue ended */\n\t\t\telse {\n\t\t\t\tif (overlap > -8) {\t/* append last queue */\n\t\t\t\t\tmessage.style.marginRight = `-${(messageWidth + overlap + space)}px`;\n\t\t\t\t\tmessage.classList.add('flusher-animation');\n\n\t\t\t\t} else {\t/* new queue */\n\t\t\t\t\tmessage.style.marginRight = `-${(messageWidth + space)}px`;\n\t\t\t\t\tmessage.classList.add('flusher-animation');\n\t\t\t\t\toverlap = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trequestNext(messageWidth, overlap, messageData, flusher);\n\t\t});\n\t}\n\n\t/* new row */\n\telse {\n\t\tflusher.container.appendChild(message);\n\t\tmessageWidth = message.offsetWidth;\n\t\tmessage.style.marginRight = `-${(messageWidth + space)}px`;\n\t\tmessage.classList.add('flusher-animation');\n\n\t\toverlap = 0;\n\t\trequestNext(messageWidth, overlap, messageData, flusher);\n\t}\n\n\tasync function requestNext(messageWidth, overlap, messageData, flusher) {\n\t\tlet timeNeeded = Math.ceil((messageWidth + space + overlap) / flusher.props.parentWidth * 16000);\n\n\t\tconst timeoutId = setTimeout(() => {\n\t\t\tcheckQueue(messageData, flusher);\n\t\t\tconst index = flusher.props.timeoutIds.indexOf(timeoutId);\n\t\t\tif (index !== -1) {\n\t\t\t\tflusher.props.timeoutIds.splice(index, 1);\n\t\t\t}\n\t\t}, timeNeeded);\n\n\t\tflusher.props.timeoutIds.push(timeoutId);\n\t}\n\n\tfunction checkQueue(messageData, flusher) {\n\t\tconst index = messageData.row;\n\n\t\tif(!flusher?.props?.rowQueue[index]) return;\n\t\tconst queueItem = flusher.props.rowQueue[index].shift();\n\t\t\n\t\tif (queueItem) {\n\t\t\tcheckRow(queueItem, index, flusher);\n\t\t} else {\n\t\t\tflusher.props.lastRow = flusher.props.lastRow - 1;\n\t\t\tflusher.props.lastPositionPerRow[index] = { container: messageData.container, run: true };\n\t\t}\n\t}\n\n\tfunction checkRow(messageData, rowIndex, flusher) {\n\t\t/* To be Fixed */\n\t\t\n\t\t/* if ((rowIndex + 1) > flusher.props.lastRow) {\n\t\t\tfor (let i = 0; i < rowIndex; i++) {\n\t\t\t\tif (flusher.props.lastPositionPerRow[i] === undefined || flusher.props.lastPositionPerRow[i].run === true) {\n\t\t\t\t\tif (messageData.message !== null) {\n\t\t\t\t\t\tflusher.props.lastPositionPerRow[rowIndex] = undefined;\n\t\t\t\t\t\tmessageData.container.style.setProperty('--row', i);\n\t\t\t\t\t\tmessageData.container.classList.add('flusher-green');\n\n\t\t\t\t\t\tstartAnimation(messageData, flusher);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (flusher.props.rowQueue[i].length < 1) {\n\t\t\t\t\tif (messageData.container !== null) {\n\t\t\t\t\t\tflusher.props.lastPositionPerRow[i] = undefined;\n\t\t\t\t\t\tmessageData.container.style.setProperty('--row', i);\n\t\t\t\t\t\tflusher.props.rowQueue[i].push(messageData);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t} */\n\n\t\tstartAnimation(messageData, flusher);\n\t}\n}\n\nfunction prepareAnimation(data, flusher) {\n\tif (!data.container) data.container = data;\n\n\tflusher.props.external ? data.container.classList.add('flusher-message') : data.container.classList.add('flusher-kick');\n\n\tdata.container.style.setProperty('--row', data.row);\n\tdata.container.addEventListener(\"animationend\", function () {\n\t\ttry {\n\t\t\tconst oldest = flusher.container.firstChild;\n\t\t\tif (!flusher.states.spamState) {\n\t\t\t\tconst entryId = flusher.props.isAeroKick ? oldest.querySelector('button')?.getAttribute('data-radial-id') : oldest.getAttribute('data-chat-entry');\n\t\t\t\tif(entryId)\n\t\t\t\tflusher.props.displayedMessages = flusher.props.displayedMessages.filter(message => message.id !== entryId);\n\t\t\t}\n\t\t\toldest.remove();\n\t\t} catch { }\n\t});\n\n\treturn data;\n}","export function appendVertical(message, flusher) {\n\tif (!message) return;\n\tconst lastItem = flusher.container.firstChild;\n\n\tif (flusher.props.external) {\n\t\tif (flusher.states.slide) message.container.classList.add(\"flusher-animation-vertical\");\n\n\t\tconst timestamp = new Date(message.created_at);\n\t\tmessage.container.dataset.timestamp = timestamp;\n\t\tif (lastItem) {\n\t\t\tconst lastTimestamp = new Date(lastItem.dataset.timestamp ?? 0);\n\t\t\tif (timestamp < lastTimestamp) {\n\t\t\t\tflusher.container.append(message.container);\n\t\t\t} else {\n\t\t\t\tlet current = lastItem;\n\t\t\t\twhile (current) {\n\t\t\t\t\tconst currentTimestamp = new Date(current.dataset.timestamp);\n\t\t\t\t\tif (timestamp > currentTimestamp) {\n\t\t\t\t\t\tflusher.container.insertBefore(message.container, current);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.previousSibling;\n\t\t\t\t}\n\t\t\t\tif (!current) flusher.container.insertBefore(message.container, lastItem);\n\t\t\t}\n\t\t} else {\n\t\t\tflusher.container.append(message.container);\n\t\t}\n\t} else {\n\t\tif (message.container) {\n\t\t\tif (flusher.states.slide) message.container.classList.add(\"flusher-animation-vertical\");\n\t\t\tflusher.container['insertBefore'](message.container, lastItem);\n\n\t\t} else {\n\t\t\tif (flusher.states.slide) message.classList.add(\"flusher-animation-vertical\");\n\t\t\tflusher.container['insertBefore'](message, lastItem);\n\t\t}\n\t}\n\n\twhile (flusher.container.children.length > flusher.props.maxRows) {\n\t\tconst oldest = flusher.container.lastChild;\n\t\tconst entryId = flusher.props.isAeroKick ? oldest.querySelector('button')?.getAttribute('data-radial-id') : oldest.getAttribute('data-chat-entry');\n\t\tif (entryId) {\n\t\t\tconst observer = flusher.props.messageObservers.get(entryId);\n\t\t\tif (observer) {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tflusher.props.messageObservers.delete(entryId);\n\t\t\t}\n\t\t}\n\n\t\tif (!flusher.states.spamState && entryId) {\n\t\t\tflusher.props.displayedMessages = flusher.props.displayedMessages.filter(message => message.id !== entryId);\n\t\t}\n\n\t\toldest.remove();\n\t}\n}\n\n\n\n","import { selectRow } from \"../layout/horizontal.js\";\nimport { appendVertical } from \"../layout/vertical.js\";\nimport { logToConsole } from \"../utils/utils.js\";\n\nexport function getMessageKey(key, value, messageId, flusher) {\n  const keyValue = key + \"-\" + value;\n  const dupe = flusher.props.displayedMessages.find((obj) => {\n    return obj.key === keyValue;\n  });\n  const ignore =\n    !flusher.states.spamState && dupe && flusher.lastRow > 1 ? true : false;\n  if (!ignore)\n    flusher.props.displayedMessages.push({ id: messageId, key: keyValue });\n  return { key: keyValue, ignore: ignore };\n}\n\nexport async function processMessageQueue(flusher) {\n  try {\n    if (flusher.props.isProcessingMessages) return;\n    flusher.props.isProcessingMessages = true;\n\n    let queueItem = flusher.props.messageQueue.shift();\n    if (!queueItem) {\n      flusher.props.isProcessingMessages = false;\n      return;\n    }\n\n    queueItem.chatroom_id = flusher.external ? queueItem?.chatroom_id : 0;\n\n    const lastRow = flusher.props.lastRow;\n    const maxRows = flusher.props.maxRows;\n\n    if (lastRow === null || lastRow >= maxRows) {\n      flusher.props.isProcessingMessages = false;\n      return;\n    }\n\n    const eventType = queueItem.event ?? queueItem.eventName;\n\n    if (\n      eventType === \"App\\\\Events\\\\ChatMessageEvent\" &&\n      flusher.props.external\n    ) {\n      createMessage(JSON.parse(queueItem.data), flusher);\n    } else if (queueItem.type === \"message\" && flusher.props.external) {\n      createMessage(queueItem, flusher);\n    } else if (eventType === \"App\\\\Events\\\\UserBannedEvent\") {\n      createUserBanMessage(JSON.parse(queueItem.data), flusher);\n    } else if (eventType === \"App\\\\Events\\\\GiftedSubscriptionsEvent\") {\n      createGiftedMessage(JSON.parse(queueItem.data), flusher);\n    } else if (eventType === \"App\\\\Events\\\\FollowersUpdated\") {\n      createFollowersMessage(JSON.parse(queueItem.data), flusher);\n    } else if (eventType === \"App\\\\Events\\\\StreamHostEvent\") {\n      createHostMessage(JSON.parse(queueItem.data), flusher);\n    } else if (eventType === \"App\\\\Events\\\\SubscriptionEvent\") {\n      createSubMessage(JSON.parse(queueItem.data), flusher);\n    } else {\n      flusher.props.isProcessingMessages = false;\n      processMessageQueue(flusher);\n    }\n  } catch (error) {\n    flusher.props.isProcessingMessages = false;\n    processMessageQueue(flusher);\n    console.error(error);\n  }\n}\n\nexport function processElementQueue(flusher) {\n  try {\n    if (flusher.props.isProcessingElements) return;\n    flusher.props.isProcessingElements = true;\n\n    const queueItem = flusher.props.elementQueue.shift();\n    if (!queueItem) {\n      flusher.props.isProcessingElements = false;\n      return;\n    }\n\n    const flushState = flusher.states.flushState;\n\n    if (!flusher.states.chatEnabled) {\n      flusher.props.isProcessingElements = false;\n      return;\n    }\n\n    flushState\n      ? selectRow(queueItem, flusher)\n      : appendVertical(queueItem, flusher);\n\n    if (flusher.props.isVod) {\n      const queueLength = flusher.props.elementQueue.length;\n      let wait = Math.trunc(3500 / queueLength);\n      if (queueLength < 3 && flusher.props.isVod && flusher.props.flushState)\n        wait = 500;\n      setTimeout(function () {\n        flusher.props.isProcessingElements = false;\n        processElementQueue(flusher);\n      }, wait);\n    } else {\n      flusher.props.isProcessingElements = false;\n      processElementQueue(flusher);\n    }\n  } catch (error) {\n    flusher.props.isProcessingElements = false;\n    processElementQueue(flusher);\n    console.error(error);\n  }\n}\n\nfunction appendMessage(queueItem, flusher) {\n  flusher.props.elementQueue.push(queueItem);\n  processElementQueue(flusher);\n  flusher.props.isProcessingMessages = false;\n  processMessageQueue(flusher);\n}\n\nasync function createMessage(message, flusher) {\n  const sender = message.sender;\n  const username = sender.username;\n  const content = message.content;\n\n  const reduced = !flusher.props.spamState\n    ? reduceRepeatedSentences(content)\n    : content;\n\n  if (!flusher.states.spamState) {\n    const messageKeyData = getMessageKey(\n      sender.id,\n      reduced,\n      message.id,\n      flusher\n    );\n    if (messageKeyData.ignore === true) {\n      flusher.props.isProcessingMessages = false;\n      processMessageQueue(flusher);\n      return;\n    }\n\n    message.key = messageKeyData.key;\n  }\n\n  const messageDiv = document.createElement(\"div\");\n  messageDiv.classList.add(\"flusher-message\");\n\n  const badgeSpan = document.createElement(\"span\");\n  badgeSpan.classList.add(\"flusher-badges\");\n\n  const badgeElements = await getBadges(message, flusher);\n  badgeElements.forEach((badgeElement) => {\n    badgeSpan.appendChild(badgeElement.cloneNode(true));\n  });\n\n  const usernameSpan = document.createElement(\"span\");\n  usernameSpan.style.color = sender.identity.color;\n  usernameSpan.classList.add(\"flusher-username\");\n  usernameSpan.textContent = username;\n\n  const boldSpan = document.createElement(\"span\");\n  boldSpan.classList.add(\"font-bold\", \"text-white\");\n  boldSpan.textContent = \": \";\n\n  const contentSpan = document.createElement(\"span\");\n  contentSpan.classList.add(\"flusher-content\");\n\n  const emoteRegex = /\\[emote:(\\d+):([\\w-]+)\\]/g;\n  let lastIndex = 0;\n  let match;\n\n  while ((match = emoteRegex.exec(reduced)) !== null) {\n    const textBeforeEmote = reduced.slice(lastIndex, match.index);\n    if (textBeforeEmote.trim() !== \"\") {\n      const textBeforeNode = document.createElement(\"span\");\n      textBeforeNode.textContent = textBeforeEmote;\n      textBeforeNode.classList.add(\"flusher-content-text\");\n      contentSpan.appendChild(textBeforeNode);\n    }\n\n    const img = document.createElement(\"img\");\n    const [, id, name] = match;\n    img.src = `https://files.kick.com/emotes/${id}/fullsize`;\n    img.alt = name;\n    img.classList.add(\"flusher-emote\");\n    contentSpan.appendChild(img);\n\n    lastIndex = emoteRegex.lastIndex;\n  }\n\n  const textAfterLastEmote = reduced.slice(lastIndex);\n  if (textAfterLastEmote.trim() !== \"\") {\n    const textAfterNode = document.createElement(\"span\");\n    textAfterNode.textContent = textAfterLastEmote;\n    textAfterNode.classList.add(\"flusher-content-text\");\n    contentSpan.appendChild(textAfterNode);\n  } else {\n    const lastChild = contentSpan.lastChild;\n    if (lastChild.tagName === \"IMG\") {\n      lastChild.className = \"last-flusher-emote\";\n    }\n  }\n\n  badgeSpan.firstChild ? messageDiv.append(badgeSpan) : null;\n  messageDiv.append(usernameSpan, boldSpan, contentSpan);\n  messageDiv.setAttribute(\"data-chat-entry\", message.id);\n  message.container = messageDiv;\n\n  appendMessage(message, flusher);\n\n  function reduceRepeatedSentences(input) {\n    const regexSentence = /(\\b.+?\\b)\\1+/g;\n    const sentence = input.replace(regexSentence, \"$1\");\n    const regexChar = /(.)(\\1{10,})/g;\n    return sentence.replace(regexChar, \"$1$1$1$1$1$1$1$1$1$1\");\n  }\n}\n\nasync function getBadges(data, flusher) {\n  const badges = data.sender.identity.badges || [];\n  let badgeArray = [];\n\n  if (badges.length === 0) return badgeArray;\n\n  for (const badge of badges) {\n    const cachedBadge = getBadgeImage(badge, flusher);\n    if (!cachedBadge) continue;\n    if (cachedBadge?.src) {\n      const badgeElement = document.createElement(\"img\");\n      badgeElement.src = cachedBadge.src;\n      badgeElement.alt = badge.type;\n      badgeElement.classList.add(\"flusher-badge\");\n      badgeArray.push(badgeElement);\n    } else {\n      cachedBadge.classList.add(\"flusher-badge\");\n      badgeArray.push(cachedBadge);\n    }\n  }\n\n  function getBadgeImage(badge, flusher) {\n    let badgeImage;\n    if (badge.type === \"subscriber\") {\n      const months = badge.count;\n      const correspondingBadge = findClosestBadge(months);\n      badgeImage = correspondingBadge\n        ? correspondingBadge\n        : flusher.badges[\"subscriber\"]?.cloneNode(true);\n    } else {\n      badgeImage = flusher.badges[badge.type]?.cloneNode(true) || null;\n    }\n\n    return badgeImage;\n  }\n\n  function findClosestBadge(months) {\n    return (\n      flusher.props.badgeCache.reduce((closest, currentBadge) => {\n        if (\n          currentBadge.months <= months &&\n          (!closest || currentBadge.months > closest.months)\n        ) {\n          return currentBadge;\n        }\n        return closest || flusher.badges[\"subscriber\"]?.cloneNode(true);\n      }, null)?.badge_image ||\n      flusher.props.badgeCache[flusher.props.badgeCache.length - 1]\n        ?.badge_image ||\n      flusher.badges[\"subscriber\"]?.cloneNode(true)\n    );\n  }\n\n  /* Enable when iframe chatroom available */\n\n  /* badges.forEach(badge => {\n    let badgeText = badge.text;\n    if (badge.count) {\n      badgeText = `${badge.type}-${badge.count}`;\n    }\n    const cachedBadge = flusher.props.badgeCache.find(badgeCache => badgeCache.type === badgeText);\n    if (cachedBadge) {\n      badgeArray.push(cachedBadge.html);\n      badgeCount++;\n      return;\n    }\n  }); */\n\n  /* let attempts = 0;\n  while (badgeCount !== badges.length && attempts < 10) {\n    const newBadges = checkForBadges(data, flusher);\n    badgeArray = newBadges;\n\n    badgeCount = badgeArray.length;\n    attempts++;\n\n    await new Promise(resolve => setTimeout(resolve, 750));\n  } */\n\n  return badgeArray;\n\n  function checkForBadges(data, flusher) {\n    const badges = data.sender.identity.badges || [];\n    const badgeElements = [];\n\n    flusher.props.isProcessingMessages = false;\n\n    let firstChatIdentity = document.querySelector(\n      `.chat-entry-username[data-chat-entry-user-id=\"${data.sender.id}\"]`\n    );\n    if (firstChatIdentity !== null) {\n      let identity = firstChatIdentity.closest(\".chat-message-identity\");\n      identity\n        .querySelectorAll(\"div.badge-tooltip\")\n        .forEach(function (baseBadge, index) {\n          let badge = badges[index];\n          if (badge === undefined) return;\n          let badgeText = badge.text;\n\n          if (badge.count) {\n            badgeText = `${badge.type}-${badge.count}`;\n          }\n\n          const cachedBadge = flusher.props.badgeCache.find(\n            (badgeCache) => badgeCache.type === badgeText\n          );\n          if (cachedBadge) {\n            props.badgeElements.push(cachedBadge.html);\n            return;\n          }\n\n          const imgElement = baseBadge.querySelector(`img`);\n          if (imgElement) {\n            const imgUrl = imgElement.src;\n            const newImg = document.createElement(\"img\");\n            newImg.src = imgUrl;\n            newImg.classList.add(\"flusher-badge\");\n            flusher.props.badgeCache.push({\n              type: badgeText,\n              html: newImg,\n            });\n\n            badgeElements.push(newImg);\n            return;\n          }\n\n          const svgElement = baseBadge.querySelector(\"svg\");\n          if (svgElement) {\n            const svgCopy = svgElement.cloneNode(true);\n            svgCopy.classList.add(\"flusher-badge\");\n\n            flusher.props.badgeCache.push({\n              type: badgeText,\n              html: svgCopy,\n            });\n\n            badgeElements.push(svgCopy);\n            return;\n          }\n\n          console.warn(\"badge not found: \" + badgeText);\n        });\n    }\n\n    return badgeElements;\n  }\n}\n\nexport function createUserBanMessage(data, flusher) {\n  /* logToConsole(\"createUserBanMessage\") */;\n\n  const bannedUser = data.user.username;\n  const bannedByUser = data.banned_by.username;\n\n  const banMessageContent = document.createElement(\"div\");\n  banMessageContent.classList.add(\"flusher-message\", \"flusher-red\");\n\n  const banMessageSpan = document.createElement(\"span\");\n\n  let logText;\n\n  if (data.expires_at) {\n    const expiresAt = new Date(data.expires_at);\n    const timeDifference = expiresAt - new Date();\n\n    let timeDiffText;\n    if (timeDifference > 0) {\n      timeDiffText = humanizeDuration(timeDifference + 5000);\n      const userId = data.user.id;\n      addBannedUser(bannedUser, bannedByUser, userId, expiresAt);\n\n      logText = `${bannedUser} banned for ${timeDiffText} by ${bannedByUser}`;\n      const expiresText = document.createTextNode(logText);\n      banMessageSpan.appendChild(expiresText);\n    } else {\n      logText = `${bannedUser} permanently banned by ${bannedByUser}`;\n      const expiresText = document.createTextNode(logText);\n      banMessageSpan.appendChild(expiresText);\n    }\n\n  } else {\n    logText = `${bannedUser} permanently banned by ${bannedByUser}`;\n    const expiresText = document.createTextNode(logText);\n    banMessageSpan.appendChild(expiresText);\n  }\n\n  banMessageContent.appendChild(banMessageSpan);\n\n  data.created_at = Date.now();\n  data.container = banMessageContent;\n\n  logToConsole(logText);\n\n  appendMessage(data, flusher);\n\n  function addBannedUser(bannedUser, bannedByUser, userId, expiresAt) {\n    const existingUserIndex = flusher.props.bannedUsers.findIndex(user => user.username === bannedUser);\n    if (existingUserIndex !== -1) {\n      flusher.props.bannedUsers[existingUserIndex] = {\n        id: userId,\n        username: bannedUser,\n        bannedBy: bannedByUser,\n        expiresAt: expiresAt\n      };\n    } else {\n      flusher.props.bannedUsers.push({\n        id: userId,\n        username: bannedUser,\n        bannedBy: bannedByUser,\n        expiresAt: expiresAt\n      });\n      const now = new Date().getTime();\n      const expirationTime = new Date(expiresAt).getTime();\n      const timeUntilExpiration = expirationTime - now;\n      flusher.props.timeoutIds.push(setTimeout(() => removeBannedUser(bannedUser), timeUntilExpiration));\n    }\n  }\n\n  function removeBannedUser(username) {\n    const index = flusher.props.bannedUsers.findIndex(user => user.username === username);\n    if (index !== -1) {\n      const currentUser = flusher.props.bannedUsers[index];\n      const currentTime = new Date().getTime();\n\n      if ((currentTime + 5000) >= new Date(currentUser.expiresAt).getTime()) {\n        flusher.props.bannedUsers.splice(index, 1);\n\n        const unbanMessageContent = document.createElement(\"div\");\n        unbanMessageContent.classList.add(\"flusher-message\", \"flusher-green\");\n\n        const unbanMessageSpan = document.createElement(\"span\");\n\n        let logText;\n\n        logText = `${username}'s ban expired`;\n        const unbanText = document.createTextNode(logText);\n        unbanMessageSpan.appendChild(unbanText);\n\n        unbanMessageContent.appendChild(unbanMessageSpan);\n\n        data.created_at = Date.now();\n        data.container = unbanMessageContent;\n\n        logToConsole(logText);\n\n        appendMessage(data, flusher);\n      }\n    }\n  }\n\n  function humanizeDuration(milliseconds) {\n    const seconds = Math.floor(milliseconds / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n    const weeks = Math.floor(days / 7);\n    const months = Math.floor(days / 30);\n    const years = Math.floor(days / 365);\n\n    if (years > 0) {\n      return years === 1 ? \"1 year\" : `${years} years`;\n    } else if (months > 0) {\n      return months === 1 ? \"1 month\" : `${months} months`;\n    } else if (weeks > 0) {\n      return weeks === 1 ? \"1 week\" : `${weeks} weeks`;\n    } else if (days > 0) {\n      return days === 1 ? \"1 day\" : `${days} days`;\n    } else if (hours > 0) {\n      return hours === 1 ? \"1 hour\" : `${hours} hours`;\n    } else if (minutes > 0) {\n      return minutes === 1 ? \"1 minute\" : `${minutes} minutes`;\n    } else {\n      return seconds === 1 ? \"1 second\" : `${seconds} seconds`;\n    }\n  }\n}\n\nfunction createSubMessage(data, flusher) {\n  /* logToConsole(`createSubMessage`); */\n\n  if (!flusher.states.flushState && !flusher.props.external) return;\n\n  const username = data.username;\n  const months = data.months;\n\n  const subscriptionMessageContent = document.createElement(\"div\");\n  subscriptionMessageContent.classList.add(\"flusher-message\", \"flusher-green\");\n\n  const emojiSpan = document.createElement(\"span\");\n  emojiSpan.textContent = String.fromCodePoint(0x1f389) + \" \";\n\n  const subscriptionMessageSpan = document.createElement(\"span\");\n  subscriptionMessageSpan.style.color = \"#00FF00\";\n  subscriptionMessageSpan.textContent = `${months > 1 ? months + \" months\" : \"1 month\"} subscription by ${username}`;\n\n  const subSpan = document.createElement(\"span\");\n  subSpan.style.color = \"#00FF00\";\n\n  subSpan.append(emojiSpan, subscriptionMessageSpan);\n\n  subscriptionMessageContent.append(subSpan);\n\n  data.created_at = Date.now();\n  data.container = subscriptionMessageContent;\n\n  appendMessage(data, flusher);\n}\n\nfunction createHostMessage(data, flusher) {\n  /* logToConsole(`createHostMessage`); */\n\n  const hostUsername = data.host_username;\n  const viewersCount = data.number_viewers;\n\n  const hostMessageContent = document.createElement(\"div\");\n  hostMessageContent.classList.add(\"flusher-message\", \"flusher-green\");\n\n  const emojiSpan = document.createElement(\"span\");\n  emojiSpan.textContent = String.fromCodePoint(0x1f389) + \" \";\n\n  const viewersCountSpan = document.createElement(\"span\");\n  viewersCountSpan.textContent =\n    `${viewersCount > 1 ? viewersCount + \" viewers\" : \"1 viewer\"} hosted by ` +\n    hostUsername;\n\n  const hostMessageSpan = document.createElement(\"span\");\n  hostMessageSpan.style.color = \"#00FF00\";\n\n  hostMessageSpan.append(emojiSpan, viewersCountSpan);\n\n  hostMessageContent.appendChild(hostMessageSpan);\n\n  data.created_at = Date.now();\n  data.container = hostMessageContent;\n\n  appendMessage(data, flusher);\n}\n\nfunction createGiftedMessage(data, flusher) {\n  if (!flusher.states.flushState && !flusher.props.external) {\n    flusher.props.isProcessingMessages = false;\n    processMessageQueue(flusher);\n    return;\n  }\n\n  /* logToConsole(`createGiftedMessage`); */\n\n  const gifterUsername = data.gifter_username;\n  const giftedUsernames = data.gifted_usernames;\n\n  const giftedContent = document.createElement(\"div\");\n  giftedContent.classList.add(\"flusher-message\", \"flusher-green\");\n\n  const emojiSpan = document.createElement(\"span\");\n  emojiSpan.textContent = String.fromCodePoint(0x1f389) + \" \";\n\n  const gifterUsernameSpan = document.createElement(\"span\");\n  gifterUsernameSpan.textContent =\n    `${giftedUsernames.length > 1\n      ? giftedUsernames.length + \" Subscriptions\"\n      : \"1 Subscription\"\n    } gifted by ` + gifterUsername;\n  const giftedSpan = document.createElement(\"span\");\n  giftedSpan.style.color = \"#00FF00\";\n\n  giftedSpan.append(emojiSpan, gifterUsernameSpan);\n\n  giftedContent.appendChild(giftedSpan);\n\n  data.created_at = Date.now();\n  data.container = giftedContent;\n\n  appendMessage(data, flusher);\n}\n\nfunction createFollowersMessage(data, flusher) {\n  /* logToConsole(`createFollowersMessage`); */\n\n  const followersCount = data.followersCount;\n\n  const followersDiff = followersCount - (flusher.props.lastFollowersCount ?? followersCount);\n  if (followersDiff === 0) {\n    flusher.props.lastFollowersCount = followersCount ?? null;\n    flusher.props.isProcessingMessages = false;\n    processMessageQueue(flusher);\n    return;\n  }\n\n  const messageContent = document.createElement(\"div\");\n  messageContent.classList.add(\"flusher-message\");\n\n  const followersMessageSpan = document.createElement(\"span\");\n  followersMessageSpan.textContent = `${followersDiff > 1 ? followersDiff + \" new followers\" : \"1 new follower\"}`;\n\n  messageContent.append(followersMessageSpan);\n\n  data.created_at = Date.now();\n  data.container = messageContent;\n\n  appendMessage(data, flusher);\n\n  flusher.props.lastFollowersCount = followersCount;\n}","import { Flusher } from '../flusher/flusher.js';\nimport { createChat } from '../interface/overlay.js';\nimport { logToConsole } from '../utils/utils.js';\n\nclass Ip2 {\n\n\tstatic async init() {\n\t\tlogToConsole(`Initialize`)\n\n\t\tconst targetNode = await waitForCondition(() => document.getElementById('streamViewerContainer'));\n\t\tlogToConsole(`Container found`)\n\n\t\tconst callback = async function (mutationsList, observer) {\n\t\t\tfor (const mutation of mutationsList) {\n\t\t\t\tif (mutation.type === 'childList') {\n\t\t\t\t\tif (mutation.addedNodes.length > 0) {\n\t\t\t\t\t\tfor (const node of mutation.addedNodes) {\n\t\t\t\t\t\t\tif (targetNode.contains(node) && node.parentElement === targetNode) {\n\t\t\t\t\t\t\t\tif (node.id && !node.id.includes('-chat-') && node.id.includes('-video-')) {\n\t\t\t\t\t\t\t\t\tconst hasFlusherAttribute = node.hasAttribute('flusher');\n\t\t\t\t\t\t\t\t\tif (hasFlusherAttribute) return;\n\t\t\t\t\t\t\t\t\tconst iframe = await waitForCondition(() => node.querySelector('iframe'));\n\t\t\t\t\t\t\t\t\tlogToConsole(`New video found`)\n\t\t\t\t\t\t\t\t\tnode.setAttribute('flusher', '');\n\t\t\t\t\t\t\t\t\tcreateChannel(iframe);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst observer = new MutationObserver(callback);\n\t\tconst config = { childList: true, subtree: false };\n\t\tobserver.observe(targetNode, config);\n\n\t\tfunction createChannel(iframe) {\n\t\t\tconst src = iframe.getAttribute('src');\n\t\t\tif (src && src.includes('kick.com')) {\n\t\t\t\tconst channelName = new URL(src).pathname.slice(1);\n\t\t\t\tlogToConsole(`Fetch Channel Data`)\n\t\t\t\tconst flusher = new Flusher(iframe, \"IP2\", channelName);\n\t\t\t\tcreateChat(flusher);\n\t\t\t}\n\t\t}\n\n\t\tfunction waitForCondition(conditionCallback) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst checkCondition = () => {\n\t\t\t\t\tconst result = conditionCallback();\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(checkCondition, 500);\n\t\t\t\t};\n\n\t\t\t\tcheckCondition();\n\t\t\t});\n\t\t}\n\n\t\t/* try { \n\t\t\tconst chatFrame = document.createElement('iframe');\n\t\t\tchatFrame.src = 'https://kick.com/USERNAME/chatroom';\n\t\t\tdocument.body.append(chatFrame);\n\t\t\tconst elementText = chatFrame.$eval('body', (element) => {\n\t\t\t\treturn element.textContent;\n\t\t\t});\n\t\t\tlogToConsole('Element Text inside iframe:', elementText);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error:', error);\n\t\t} */\n\t}\n}\n\nexport default Ip2;","import { Flusher } from '../flusher/flusher.js';\nimport { createChat } from '../interface/overlay.js';\nimport { logToConsole } from '../utils/utils.js';\n\nclass Kick {\n  static init() {\n    /* logToConsole(`Initialize`); */\n\n    let stopObserver = false;\n\n    const observeVideo = () => {\n      const videoObserver = new MutationObserver(() => {\n        let video = document.getElementsByTagName('video');\n        video = video[video.length - 1];\n\n        if (video) {\n          /* logToConsole(`KICK video found`); */\n          videoObserver.disconnect();\n\n          setTimeout(() => {\n            let video = document.getElementsByTagName('video');\n            video = video[video.length - 1];\n\n            let channelName = document.querySelector(\".stream-username\");\n\n            if (channelName && video) {\n              channelName = channelName.innerText.trim();\n              const AeroKick = video.classList.contains('bk-aspect-video');\n              if (AeroKick) logToConsole(`AeroKick Detected`);\n              const flusher = new Flusher(video, \"KICK\", channelName, AeroKick);\n              try {\n                createChat(flusher);\n                return;\n              } catch (error) {\n                logToConsole(`Failed to create chat`);\n              }\n            }\n\n            /* logToConsole(`KICK start video observer`); */\n\n            const observer = new MutationObserver((mutations) => {\n              mutations.forEach((mutation) => {\n                if (!stopObserver && mutation.addedNodes) {\n                  if (document.querySelector(\".stream-username\")) {\n                    let video = document.getElementsByTagName('video');\n                    video = video[video.length - 1];\n                    if (video) {\n                      /* logToConsole(`KICK stop video observer`); */\n                      stopObserver = true;\n                      const channelName = document.querySelector(\".stream-username\").innerText.trim()\n                      const AeroKick = video.classList.contains('bk-aspect-video');\n                      if (AeroKick) logToConsole(`AeroKick Detected`);\n                      const flusher = new Flusher(video, \"KICK\", channelName, AeroKick);\n                      try {\n                        createChat(flusher);\n                      } catch (error) {\n                        stopObserver = false;\n                        logToConsole(`Failed to create chat`);\n                      }\n\n                      if (stopObserver) observer.disconnect();\n                    }\n                  }\n                }\n              });\n            });\n\n            observer.observe(document.body, {\n              childList: true,\n              subtree: true\n            });\n          }, 1000);\n        }\n      });\n\n      videoObserver.observe(document.body, {\n        childList: true,\n        subtree: true\n      });\n    };\n\n    observeVideo();\n  }\n}\n\nexport default Kick;","class Badges {\n\n   broadcasterSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\">\n   <g id=\"Badge_Chat_host\"><linearGradient id=\"badge-host-gradient-1\" gradientUnits=\"userSpaceOnUse\" x1=\"4\" y1=\"180.5864\" x2=\"4\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><rect x=\"3.2\" y=\"9.6\" style=\"fill:url(#badge-host-gradient-1);\" width=\"1.6\" height=\"1.6\"></rect><linearGradient id=\"badge-host-gradient-2\" gradientUnits=\"userSpaceOnUse\" x1=\"8\" y1=\"180.5864\" x2=\"8\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><polygon style=\"fill:url(#badge-host-gradient-2);\" points=\"6.4,9.6 9.6,9.6 9.6,8 11.2,8 \n\t\t11.2,1.6 9.6,1.6 9.6,0 6.4,0 6.4,1.6 4.8,1.6 4.8,8 6.4,8 \t\"></polygon><linearGradient id=\"badge-host-gradient-3\" gradientUnits=\"userSpaceOnUse\" x1=\"2.4\" y1=\"180.5864\" x2=\"2.4\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><rect x=\"1.6\" y=\"6.4\" style=\"fill:url(#badge-host-gradient-3);\" width=\"1.6\" height=\"3.2\"></rect><linearGradient id=\"badge-host-gradient-4\" gradientUnits=\"userSpaceOnUse\" x1=\"12\" y1=\"180.5864\" x2=\"12\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><rect x=\"11.2\" y=\"9.6\" style=\"fill:url(#badge-host-gradient-4);\" width=\"1.6\" height=\"1.6\"></rect><linearGradient id=\"badge-host-gradient-5\" gradientUnits=\"userSpaceOnUse\" x1=\"8\" y1=\"180.5864\" x2=\"8\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><polygon style=\"fill:url(#badge-host-gradient-5);\" points=\"4.8,12.8 6.4,12.8 6.4,14.4 \n\t\t4.8,14.4 4.8,16 11.2,16 11.2,14.4 9.6,14.4 9.6,12.8 11.2,12.8 11.2,11.2 4.8,11.2 \t\"></polygon><linearGradient id=\"badge-host-gradient-6\" gradientUnits=\"userSpaceOnUse\" x1=\"13.6\" y1=\"180.5864\" x2=\"13.6\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><rect x=\"12.8\" y=\"6.4\" style=\"fill:url(#badge-host-gradient-6);\" width=\"1.6\" height=\"3.2\"></rect></g>\n</svg>`;\n\n   founderSVG = `<svg version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\"><linearGradient id=\"badge-founder-gradient\" gradientUnits=\"userSpaceOnUse\" x1=\"7.874\" y1=\"20.2333\" x2=\"8.1274\" y2=\"-0.3467\" gradientTransform=\"matrix(1 0 0 -1 0 18)\"><stop offset=\"0\" style=\"stop-color: rgb(255, 201, 0);\"></stop><stop offset=\"0.99\" style=\"stop-color: rgb(255, 149, 0);\"></stop></linearGradient><path d=\"\nM14.6,4V2.7h-1.3V1.4H12V0H4v1.4H2.7v1.3H1.3V4H0v8h1.3v1.3h1.4v1.3H4V16h8v-1.4h1.3v-1.3h1.3V12H16V4H14.6z M9.9,12.9H6.7V6.4H4.5\nV5.2h1V4.1h1v-1h3.4V12.9z\" style=\"fill-rule: evenodd; clip-rule: evenodd; fill: url(&quot;#badge-founder-gradient&quot;);\"></path></svg>`;\n\n   moderatorSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\">\n   <path d=\"M11.7,1.3v1.5h-1.5v1.5 H8.7v1.5H7.3v1.5H5.8V5.8h-3v3h1.5v1.5H2.8v1.5H1.3v3h3v-1.5h1.5v-1.5h1.5v1.5h3v-3H8.7V8.7h1.5V7.3h1.5V5.8h1.5V4.3h1.5v-3 C14.7,1.3,11.7,1.3,11.7,1.3z\" style=\"fill: #00C7FF\"></path>\n</svg>`;\n\n   ogSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\">\n   <g>\n      <linearGradient id=\"badge-og-gradient-1\" gradientUnits=\"userSpaceOnUse\" x1=\"12.2\" y1=\"-180\" x2=\"12.2\" y2=\"-165.2556\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#00FFF2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#006399;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-og-gradient-1);\" d=\"M16,16H9.2v-0.8H8.4v-8h0.8V6.4H16v3.2h-4.5v4.8H13v-1.6h-0.8v-1.6H16V16z\"></path>\n      <linearGradient id=\"badge-og-gradient-2\" gradientUnits=\"userSpaceOnUse\" x1=\"3.7636\" y1=\"-164.265\" x2=\"4.0623\" y2=\"-179.9352\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#00FFF2;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#006399;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-og-gradient-2);\" d=\"M6.8,8.8v0.8h-6V8.8H0v-8h0.8V0h6.1v0.8 h0.8v8H6.8z M4.5,6.4V1.6H3v4.8H4.5z\"></path>\n      <path style=\"fill:#00FFF2;\" d=\"M6.8,15.2V16h-6v-0.8H0V8.8h0.8V8h6.1v0.8h0.8v6.4C7.7,15.2,6.8,15.2,6.8,15.2z M4.5,14.4V9.6H3v4.8 C3,14.4,4.5,14.4,4.5,14.4z\"></path>\n      <path style=\"fill:#00FFF2;\" d=\"M16,8H9.2V7.2H8.4V0.8h0.8V0H16v1.6h-4.5v4.8H13V4.8h-0.8V3.2H16V8z\"></path>\n   </g>\n</svg>`;\n\n   staffSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M2.07324 1.33331H6.51991V4.29331H7.99991V2.81331H9.47991V1.33331H13.9266V5.77998H12.4466V7.25998H10.9599V8.73998H12.4466V10.22H13.9266V14.6666H9.47991V13.1866H7.99991V11.7066H6.51991V14.6666H2.07324V1.33331Z\" fill=\"url(#badge-verified-gradient)\"></path>\n   <defs>\n      <linearGradient id=\"badge-verified-gradient\" x1=\"33.791%\" y1=\"97.416%\" x2=\"65.541%\" y2=\"4.5%\" gradientUnits=\"objectBoundingBox\">\n         <stop stop-color=\"#1EFF00\"></stop>\n         <stop offset=\"0.99\" stop-color=\"#00FF8C\"></stop>\n      </linearGradient>\n   </defs>\n</svg>`;\n\n   subGifter1SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <g clip-path=\"url(#clip0_301_17810)\">\n      <path d=\"M7.99999 9.14999V6.62499L0.484985 3.35999V6.34499L1.15499 6.63499V12.73L7.99999 15.995V9.14999Z\" fill=\"#0269D4\"></path>\n      <path d=\"M8.00003 10.735V9.61501L1.15503 6.63501V7.70501L8.00003 10.735Z\" fill=\"#0269D4\"></path>\n      <path d=\"M15.515 3.355V6.345L14.85 6.64V12.73L12.705 13.755L11.185 14.48L8.00499 15.995V6.715L4.81999 5.295H4.81499L3.29499 4.61L0.484985 3.355L3.66999 1.935L3.67999 1.93L5.09499 1.3L8.00499 0L10.905 1.3L12.32 1.925L12.33 1.935L15.515 3.355Z\" fill=\"#04D0FF\"></path>\n      <path d=\"M14.845 6.63501V7.70501L8 10.735V9.61501L14.845 6.63501Z\" fill=\"#0269D4\"></path>\n   </g>\n   <defs>\n      <clipPath id=\"clip0_301_17810\">\n         <rect width=\"16\" height=\"16\" fill=\"white\"></rect>\n      </clipPath>\n   </defs>\n</svg>`;\n\n   subGufter2SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <g clip-path=\"url(#clip0_301_17825)\"><path d=\"M7.99999 9.14999V6.62499L0.484985 3.35999V6.34499L1.14999 6.63999V12.73L7.99999 16V9.14999Z\" fill=\"#FF5008\"></path>\n      <path d=\"M8.00002 10.74V9.61501L1.15002 6.64001V7.71001L8.00002 10.74Z\" fill=\"#FF5008\"></path>\n      <path d=\"M15.515 3.355V6.345L14.85 6.64V12.73L12.705 13.755L11.185 14.48L8.00499 15.995V6.715L4.81999 5.295H4.81499L3.29499 4.61L0.484985 3.355L3.66999 1.935L3.67999 1.93L5.09499 1.3L8.00499 0L10.905 1.3L12.32 1.925L12.33 1.935L15.515 3.355Z\" fill=\"#FFC800\"></path>\n      <path d=\"M14.85 6.64001V7.71001L8 10.74V9.61501L14.85 6.64001Z\" fill=\"#FF5008\"></path>\n   </g>\n   <defs>\n      <clipPath id=\"clip0_301_17825\">\n         <rect width=\"16\" height=\"16\" fill=\"white\"></rect>\n      </clipPath>\n   </defs>\n</svg>`;\n\n   subscriberSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <g>\n      <linearGradient id=\"badge-subscriber-gradient-1\" gradientUnits=\"userSpaceOnUse\" x1=\"-2.386\" y1=\"-151.2764\" x2=\"42.2073\" y2=\"-240.4697\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-1);\" d=\"M14.8,7.3V6.1h-2.4V4.9H11V3.7H9.9V1.2H8.7V0H7.3v1.2H6.1v2.5H5v1.2H3.7v1.3H1.2v1.2H0v1.4 h1.2V10h2.4v1.3H5v1.2h1.2V15h1.2v1h1.3v-1.2h1.2v-2.5H11v-1.2h1.3V9.9h2.4V8.7H16V7.3H14.8z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-2\" gradientUnits=\"userSpaceOnUse\" x1=\"-5.3836\" y1=\"-158.3055\" x2=\"14.9276\" y2=\"-189.0962\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-2);\" d=\"M7.3,7.3v7.5H6.1v-2.5H5v-1.2H3.7V9.9H1.2 V8.7H0V7.3H7.3z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-3\" gradientUnits=\"userSpaceOnUse\" x1=\"3.65\" y1=\"-160.7004\" x2=\"3.65\" y2=\"-184.1244\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-3);\" d=\"M7.3,7.3v7.5H6.1v-2.5H5v-1.2H3.7V9.9H1.2 V8.7H0V7.3H7.3z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-4\" gradientUnits=\"userSpaceOnUse\" x1=\"22.9659\" y1=\"-167.65\" x2=\"-5.3142\" y2=\"-167.65\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-4);\" d=\"M8.7,0v7.3H1.2V6.1h2.4V4.9H5V3.7h1.2V1.2 h1.2V0H8.7z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-5\" gradientUnits=\"userSpaceOnUse\" x1=\"12.35\" y1=\"-187.6089\" x2=\"12.35\" y2=\"-161.5965\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-5);\" d=\"M8.7,8.7V1.2h1.2v2.5H11v1.2h1.3v1.3h2.4 v1.2H16v1.4L8.7,8.7L8.7,8.7z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-6\" gradientUnits=\"userSpaceOnUse\" x1=\"-6.5494\" y1=\"-176.35\" x2=\"21.3285\" y2=\"-176.35\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-6);\" d=\"M7.3,16V8.7h7.4v1.2h-2.4v1.3H11v1.2H9.9 v2.5H8.7V16H7.3z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-7\" gradientUnits=\"userSpaceOnUse\" x1=\"6.72\" y1=\"-169.44\" x2=\"12.2267\" y2=\"-180.4533\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-7);\" d=\"M8.7,7.3H7.3v1.4h1.3L8.7,7.3L8.7,7.3z\"></path>\n   </g>\n</svg>`;\n\n   verifiedSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <path d=\"M14.72 7.00003V6.01336H15.64V4.12003H14.6733V3.16003H9.97332V1.2667H8.96665V0.280029H7.03332V1.2667H6.03332V3.16003H1.32665V4.12003H0.359985V6.01336H1.28665V7.00003H2.23332V9.0067H1.28665V9.99336H0.359985V11.8867H1.32665V12.8467H6.03332V14.74H7.03332V15.7267H8.96665V14.74H9.97332V12.8467H14.6733V11.8867H15.64V9.99336H14.72V9.0067H13.7733V7.00003H14.72ZM12.5 6.59336H11.44V7.66003H10.3733V8.72003H9.31332V9.7867H8.24665V10.8467L7.09332 10.9V11.8H6.02665V10.8467H5.05999V9.7867H3.99332V7.66003H6.11999V8.72003H7.18665V7.66003H8.24665V6.59336H9.31332V5.53336H10.3733V4.4667H12.5V6.59336Z\" fill=\"url(#badge-verified-gradient)\"></path>\n   <defs>\n      <linearGradient id=\"badge-verified-gradient\" x1=\"25.333%\" y1=\"99.375%\" x2=\"73.541%\" y2=\"2.917%\" gradientUnits=\"objectBoundingBox\">\n         <stop stop-color=\"#1EFF00\"></stop>\n         <stop offset=\"0.99\" stop-color=\"#00FF8C\"></stop>\n      </linearGradient>\n   </defs>\n</svg>`;\n\n   vipSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\">\n   <linearGradient id=\"badge-vip-gradient\" gradientUnits=\"userSpaceOnUse\" x1=\"8\" y1=\"-163.4867\" x2=\"8\" y2=\"-181.56\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n      <stop offset=\"0\" style=\"stop-color: rgb(255, 201, 0);\"></stop>\n      <stop offset=\"0.99\" style=\"stop-color: rgb(255, 149, 0);\"></stop>\n   </linearGradient>\n   <path d=\"M13.9,2.4v1.1h-1.2v2.3 h-1.1v1.1h-1.1V4.6H9.3V1.3H6.7v3.3H5.6v2.3H4.4V5.8H3.3V3.5H2.1V2.4H0v12.3h16V2.4H13.9z\" style=\"fill: url(&quot;#badge-vip-gradient&quot;);\"></path>\n</svg>`;\n\n   parseSVGStringToElement(svgString) {\n      const parser = new DOMParser();\n      const xmlDoc = parser.parseFromString(svgString, \"image/svg+xml\");\n      return xmlDoc.documentElement;\n   }\n\n   badgeTypeToSVG = {\n      subscriber: this.parseSVGStringToElement(this.subscriberSVG),\n      founder: this.parseSVGStringToElement(this.founderSVG),\n      broadcaster: this.parseSVGStringToElement(this.broadcasterSVG),\n      moderator: this.parseSVGStringToElement(this.moderatorSVG),\n      og: this.parseSVGStringToElement(this.ogSVG),\n      staff: this.parseSVGStringToElement(this.staffSVG),\n      sub_gifter: this.parseSVGStringToElement(this.subGifter1SVG),\n      sub_gifter_1: this.parseSVGStringToElement(this.subGifter2SVG),\n      verified: this.parseSVGStringToElement(this.verifiedSVG),\n      vip: this.parseSVGStringToElement(this.vipSVG),\n   };\n}\n\nexport default Badges;\n\n","export function dragElement(flusher) {\n\tvar pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n\n\tflusher.container.onmousedown = function (e) {\n\t\te = e || window.event;\n\t\te.preventDefault();\n\n\t\tsetPosition(flusher, true);\n\n\t\tif (isInResizeHandle(e)) {\n\t\t\tpos3 = e.clientX;\n\t\t\tpos4 = e.clientY;\n\t\t\tdocument.onmouseup = closeResize;\n\t\t\tdocument.onmousemove = resizeElement;\n\t\t} else {\n\t\t\tpos3 = e.clientX;\n\t\t\tpos4 = e.clientY;\n\t\t\tdocument.onmouseup = closeDragElement;\n\t\t\tdocument.onmousemove = dragElement;\n\t\t}\n\t};\n\n\tfunction dragElement(e) {\n\t\te = e || window.event;\n\t\te.preventDefault();\n\t\tpos1 = pos3 - e.clientX;\n\t\tpos2 = pos4 - e.clientY;\n\t\tpos3 = e.clientX;\n\t\tpos4 = e.clientY;\n\n\t\tflusher.container.style.top = (flusher.container.offsetTop - pos2) + \"px\";\n\t\tflusher.container.style.left = (flusher.container.offsetLeft - pos1) + \"px\";\n\t}\n\n\tfunction resizeElement(e) {\n\t\te = e || window.event;\n\t\te.preventDefault();\n\t\tflusher.container.style.width = (flusher.container.offsetWidth - (pos3 - e.clientX)) + \"px\";\n\t\tflusher.container.style.height = (flusher.container.offsetHeight - (pos4 - e.clientY)) + \"px\";\n\t\tpos3 = e.clientX;\n\t\tpos4 = e.clientY;\n\t}\n\n\tfunction closeDragElement() {\n\t\tdocument.onmouseup = null;\n\t\tdocument.onmousemove = null;\n\t\tsetPosition(flusher, false);\n\t}\n\n\tfunction closeResize() {\n\t\tdocument.onmouseup = null;\n\t\tdocument.onmousemove = null;\n\t\tsetPosition(flusher, false);\n\t}\n\n\tasync function setPosition(flusher, event) {\n\t\tvar scaleFactor = window.innerWidth / window.outerWidth;\n\t\tvar rect = flusher.container.getBoundingClientRect();\n\t\tvar rectVideo = flusher.video.getBoundingClientRect();\n\n\t\tvar newPosition = {\n\t\t\ttop: Math.round(rect.top - rectVideo.top) / scaleFactor,\n\t\t\tleft: Math.round(rect.left - rectVideo.left) / scaleFactor,\n\t\t\twidth: Math.round(rect.width) / scaleFactor,\n\t\t\theight: Math.round(rect.height) / scaleFactor\n\t\t};\n\n\t\tconsole.log(newPosition);\n\n\t\tif (event) {\n\t\t\tflusher.container.style.top = Math.round(newPosition.top * scaleFactor) + \"px\";\n\t\t\tflusher.container.style.left = Math.round(newPosition.left * scaleFactor) + \"px\";\n\t\t\tflusher.container.removeAttribute(\"position\");\n\n\t\t\tflusher.container.style.width = Math.round(newPosition.width * scaleFactor) + \"px\";\n\t\t\tflusher.container.style.height = Math.round(newPosition.height * scaleFactor) + \"px\";\n\t\t\tflusher.container.removeAttribute(\"size\");\n\t\t}\n\n\t\tchrome.storage.local.get(\"positionsPerChannel\", function (result) {\n\t\t\tvar positionsPerChannel = result.positionsPerChannel || {};\n\t\t\tvar positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n\t\t\tvar existingPositionIndex = positionsArray.findIndex(function (item) {\n\t\t\t\treturn item.videoSize === flusher.props.videoSize;\n\t\t\t});\n\n\t\t\tif (existingPositionIndex !== -1) {\n\t\t\t\tpositionsArray[existingPositionIndex].position.top = newPosition.top;\n\t\t\t\tpositionsArray[existingPositionIndex].position.left = newPosition.left;\n\t\t\t\tpositionsArray[existingPositionIndex].position.width = newPosition.width;\n\t\t\t\tpositionsArray[existingPositionIndex].position.height = newPosition.height;\n\t\t\t} else {\n\t\t\t\tpositionsArray.push({\n\t\t\t\t\tvideoSize: flusher.props.videoSize,\n\t\t\t\t\tposition: {\n\t\t\t\t\t\ttop: newPosition.top,\n\t\t\t\t\t\tleft: newPosition.left,\n\t\t\t\t\t\twidth: newPosition.width,\n\t\t\t\t\t\theight: newPosition.height\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tpositionsPerChannel[flusher.props.channelName] = positionsArray;\n\n\t\t\tchrome.storage.local.set({ \"positionsPerChannel\": positionsPerChannel }, function () {\n\t\t\t\t/* console.log(\"positionsPerChannel:\", positionsPerChannel); */\n\t\t\t});\n\t\t});\n\n\t}\n\n\tfunction isInResizeHandle(e) {\n\t\tvar rect = flusher.container.getBoundingClientRect();\n\t\tvar handleSize = 25;\n\t\treturn (\n\t\t\te.clientX >= rect.right - handleSize &&\n\t\t\te.clientY >= rect.bottom - handleSize\n\t\t);\n\t}\n}","import {\n  toggleEnableMenu,\n  togglePointerEvents,\n} from \"../interface/menu/menu.js\";\nimport { processMessageQueue } from \"../queue/queue.js\";\nimport { logToConsole } from \"./utils.js\";\nimport { setCustomPosition } from \"../interface/overlay.js\";\n\nimport Kick from \"../site/kick.js\";\n\nexport function checkResize(flusher) {\n  /* logToConsole(\"Check Resize\"); */\n  const target = flusher.props.external\n    ? flusher.video\n    : flusher.video.querySelector(\"video\") ?? flusher.video;\n\n  flusher.resizeTimer = null;\n  if (flusher.resizeObserver) flusher.resizeObserver.disconnect();\n  flusher.resizeObserver = new ResizeObserver((entries) => {\n    if (flusher.container !== null) flusher.container.style.display = \"none\";\n\n    for (let entry of entries) {\n      if (flusher.resizeTimer) clearTimeout(flusher.resizeTimer);\n      flusher.resizeTimer = setTimeout(() => {\n        for (let entry of entries) {\n\n          const rect = target.getBoundingClientRect();\n          let width = rect.width;\n          let height = rect.height;\n\n          window.currentUrl = window.location.href;\n\n          if ((width === null || width === 0) && (!height || height === 0)) {\n            if (flusher !== null) {\n              /* logToConsole(\"Remove Chat\"); */\n              const init = !flusher.props.external;\n              flusher.resizeObserver.disconnect();\n              flusher.resizeObserver = null;\n              for (const id of flusher.props.timeoutIds) {\n                clearTimeout(id);\n              }\n              flusher.provider.unbindRequests(flusher);\n              flusher = null;\n              if (init) Kick.init();\n            }\n\n            return;\n          }\n\n          /* logToConsole(\n            `Width ${Math.round(width)} height ${Math.round(height)}`\n          ); */\n\n          const oldWidth = flusher.props.parentWidth;\n          flusher.props.parentWidth = Math.trunc(width) * 2;\n          flusher.props.parentHeight = Math.trunc(height);\n\n          flusher.container.style.setProperty(\n            \"--flusher-width\",\n            `-${flusher.props.parentWidth}px`\n          );\n\n          flusher.toggle.setAttribute(\"domain\", flusher.props.domain);\n\n          const newFlushState =\n            flusher.states.flushState !== undefined\n              ? flusher.states.flushState\n                ? \"horizontal\"\n                : \"vertical\"\n              : flusher.states.flushState\n                ? \"horizontal\"\n                : \"vertical\";\n\n          flusher.container.setAttribute(\"layout\", newFlushState);\n\n          flusher.container.setAttribute(\"enabled\", flusher.states.chatEnabled);\n\n          flusher.container.setAttribute(\"shadow\", flusher.states.shadow);\n\n          flusher.container.setAttribute(\n            \"background\",\n            flusher.states.backgroundStates[flusher.states.backgroundState]\n          );\n\n          setAttribute(\n            flusher.container,\n            \"font\",\n            flusher.states.sizeStates,\n            flusher.states.fontState\n          );\n\n          flusher.container.setAttribute(\"time\", flusher.states.timeState);\n\n          if (flusher.props.isAeroKick) {\n            flusher.container.setAttribute(\"aerokick\", \"\");\n          }\n\n          toggleEnableMenu();\n\n          setCustomPosition(flusher);\n\n          const documentWidth = document.documentElement.clientWidth;\n          if (documentWidth < flusher.props.parentWidth / 2 + 10) {\n            flusher.props.isFullscreen = true;\n            startScrollingInterval(flusher);\n            flusher.props.videoSize = \"fullscreen\";\n          } else {\n            flusher.props.isFullscreen = false;\n            stopScrollingInterval(flusher);\n            if (document.querySelector('.sidebar')) {\n              flusher.props.videoSize = \"default\";\n            } else {\n              flusher.props.videoSize = \"theater\";\n            }\n          }\n\n          chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n            var positionsPerChannel = result.positionsPerChannel || {};\n            var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n            var existingPositionIndex = positionsArray.findIndex(function (item) {\n              return item.videoSize === flusher.props.videoSize;\n            });\n\n            if (existingPositionIndex !== -1) {\n              const position = positionsArray[existingPositionIndex].position;\n              if (position.top) {\n                flusher.container.removeAttribute(\"position\");\n                var scaleFactor = window.innerWidth / window.outerWidth;\n                flusher.container.style.top = position.top > height ? height - 20 + \"px\" : Math.round(position.top * scaleFactor) + \"px\";\n                flusher.container.style.left = position.left > width ? width - 20 + \"px\" : Math.round(position.left * scaleFactor) + \"px\";\n              } else {\n                flusher.container.style.top = \"\";\n                flusher.container.style.left = \"\";\n                flusher.container.style.alignItems = \"\";\n                setAttribute(\n                  flusher.container,\n                  \"position\",\n                  flusher.states.positionStates,\n                  flusher.states.positionState\n                );\n              } if (position.width) {\n                flusher.container.removeAttribute(\"size\");\n                flusher.container.style.width = Math.round(position.width * scaleFactor) + \"px\";\n                flusher.container.style.height = Math.round(position.height * scaleFactor) + \"px\";\n              } else {\n                flusher.container.style.width = \"\";\n                flusher.container.style.height = \"\";\n                setAttribute(\n                  flusher.container,\n                  \"size\",\n                  flusher.states.sizeStates,\n                  flusher.states.sizeState\n                );\n              }\n            } else {\n              flusher.container.style.top = \"\";\n              flusher.container.style.left = \"\";\n              flusher.container.style.alignItems = \"\";\n              flusher.container.style.width = \"\";\n              flusher.container.style.height = \"\";\n              setAttribute(\n                flusher.container,\n                \"position\",\n                flusher.states.positionStates,\n                flusher.states.positionState\n              );\n              setAttribute(\n                flusher.container,\n                \"size\",\n                flusher.states.sizeStates,\n                flusher.states.sizeState\n              );\n            }\n          });\n\n          flusher.props.elementHeight = null;\n          flusher.container.style.display = \"flex\";\n          createIntroMessage(flusher);\n\n          if (oldWidth == null || oldWidth == 0) {\n            if (flusher.container === null) return;\n            if (flusher.states.chatEnabled)\n              flusher.provider.bindRequests(flusher);\n\n            flusher.props.loading = false;\n            processMessageQueue(flusher);\n            togglePointerEvents(flusher);\n\n            checkAddons(flusher);\n\n            /* temp fix toggle btn not clickable in theater */\n            const element = document.querySelector(\".z\\\\-\\\\[500\\\\].flex.w-screen\");\n            if (element) element.classList.remove(\"z-[500]\");\n\n            logToConsole(\n              `(${flusher.props.channelName} ${flusher.props.domain} ${flusher.props.isVod ? \"VOD\" : \"LIVE\"\n              }): Report bugs or collaborate at https://github.com/r0808914/Kick-Chat-Flusher`\n            );\n          } else {\n            flusher.states.flushState\n              ? flusher.clear()\n              : null;\n          }\n        }\n      }, 750);\n    }\n  });\n\n  flusher.resizeObserver.observe(flusher.video);\n\n  function checkAddons(flusher) {\n    let counter = 0;\n\n    const intervalId = setInterval(() => {\n      const KickTools = document.querySelector('.vjs-progress-control')?.style?.display == 'flex' ? true : false;\n      if (KickTools) {\n        logToConsole(`KickTools Detected`);\n        flusher.props.isKickTools = true;\n        clearInterval(intervalId);\n      }\n\n      counter++;\n\n      if (counter >= 5) {\n        clearInterval(intervalId);\n      }\n    }, 1000)\n    flusher.props.timeoutIds.push(intervalId);\n  }\n\n  function createIntroMessage(flusher) {\n    const introContent = document.createElement(\"div\");\n    introContent.classList.add(\"flusher-message\");\n\n    const emojiSpan = document.createElement(\"span\");\n    emojiSpan.textContent = String.fromCodePoint(0x1f389) + \" \";\n\n    const introSpan = document.createElement(\"span\");\n    introSpan.textContent = `thanks for testing (version..)`;\n    const introMessageSpan = document.createElement(\"span\");\n\n    introMessageSpan.append(emojiSpan, introSpan);\n\n    introContent.appendChild(introMessageSpan);\n    introContent.style.setProperty(\"--row\", 0);\n    introContent.classList.add(\"flusher-message\");\n\n    const parent = flusher.props.external ? flusher.container : document.body;\n    parent.append(introContent);\n    flusher.props.elementHeight = introContent.clientHeight;\n    flusher.props.maxRows = Math.ceil(\n      flusher.props.parentHeight / flusher.props.elementHeight\n    );\n    parent.removeChild(introContent);\n    flusher.setVerticalWidth();\n  }\n}\n\nfunction startScrollingInterval(flusher) {\n  if (flusher.props.scrollIntervalId) return;\n  scrollChat(flusher);\n  flusher.props.scrollIntervalId = setInterval(function () {\n    scrollChat(flusher);\n  }, 10000);\n}\n\nfunction setAttribute(element, attribute, states, stateKey) {\n  const state = states[stateKey];\n  const value = state.replace(/\\s/g, \"\");\n  element.setAttribute(attribute, value);\n}\n\nexport function stopScrollingInterval(flusher) {\n  if (!flusher.props.scrollIntervalId) return;\n  clearInterval(flusher.props.scrollIntervalId);\n  flusher.props.scrollIntervalId = null;\n}\n\nfunction scrollChat(flusher) {\n  const chatBtn = document.querySelector(\"#chatroom .justify-center.absolute\");\n  const chatContainer = document.querySelector(\"#chatroom [data-chat-entry]\");\n  if (flusher.props.isFullscreen && !flusher.props.isVod) {\n    if (chatBtn !== null) {\n      chatBtn.click();\n    }\n    if (chatContainer !== null) {\n      const chatContainerParent = chatContainer.closest(\".overflow-y-scroll\");\n      if (chatContainerParent !== null) {\n        chatContainerParent.scrollTop = chatContainerParent.scrollHeight;\n      }\n    }\n  }\n}\n","export function visibilityChange(flusher) {\n\t/* logToConsole(`Add visibilityChange`); */\n\n\tdocument.addEventListener('visibilitychange', function handleVisibilityChange() {\n\t\tif (!flusher || !flusher.states.flushState) return;\n\t\tif (document.hidden) {\n\t\t\tflusher.props.chatEnabledVisible = flusher.states.chatEnabled;\n\t\t\tflusher.states.chatEnabled = false;\n\t\t\tflusher.clear();\n\t\t} else {\n\t\t\tflusher.states.chatEnabled = flusher.props.chatEnabledVisible;\n\t\t}\n\t});\n}\n\nexport function getFont() {\n\tconst fontLink = document.createElement('link');\n\tfontLink.rel = 'stylesheet';\n\tfontLink.href = 'https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap';\n\treturn fontLink;\n}\n\nexport function logToConsole(message) {\n\tconst isChrome = navigator.userAgent.toLowerCase().includes('chrome');\n\tisChrome ? console.log(`%c Kick Chat Flusher %c ${message}`, 'background: #228B22; color: #FFFFFF; padding: 2px 0;', '') : console.log('Kick Chat Flusher - ', message);\n}\n\nexport function toTitleCase(str) {\n\tif (!str) return 'undefined';\n\tif (str === 'OFF' || str === 'ON') return str;\n\treturn str.toLowerCase().replace(/\\b\\w/g, function (char) {\n\t\treturn char.toUpperCase();\n\t});\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Kick from './site/kick.js';\nimport Ip2 from './site/ip2.js';\n\nwindow.location.hostname.includes('kick.com') ? setTimeout(Kick.init(), 2000) : Ip2.init();"],"names":["FlusherStates","FlusherProps","FlusherMessages","visibilityChange","logToConsole","stopScrollingInterval","Badges","Flusher","constructor","video","domain","channelName","aeroKick","states","props","badges","badgeTypeToSVG","external","isVod","window","location","href","includes","isAeroKick","provider","resetConnection","flusher","clearChat","resizeObserver","disconnect","clear","container","style","display","isEnabled","chatEnabled","elementQueue","length","messageQueue","lastRow","id","timeoutIds","clearTimeout","firstChild","removeChild","displayedMessages","messageObservers","forEach","observer","entryId","delete","lastPositionPerRow","rowQueue","isProcessingElements","isProcessingMessages","setVerticalWidth","elementHeight","sizeStates","sizeState","setProperty","processMessageQueue","processElementQueue","createUserBanMessage","socket","nativeChatObserver","channels","Set","subscribeChannel","chatroomId","has","subscriptionMessage","event","data","auth","channel","setupWebSocket","send","JSON","stringify","add","getHistory","apiUrl","hostId","response","fetch","ok","Error","status","json","messages","message","push","error","console","webSocketUrl","WebSocket","onmessage","parse","document","body","contains","onMessage","disposeChannel","addEventListener","loading","close","interceptNative","self","AeroKick","classList","nativeChat","waitForChat","querySelector","b","browser","chrome","defaultAvatar","runtime","getURL","flushState","setTimeout","checkDupe","childNodes","MutationObserver","mutations","nodesList","reverse","mutation","type","addedNodes","observerConfig","childList","subtree","observe","addedNode","nodeName","button","log","getAttribute","userId","isKickTools","opacity","isUserBanned","bannedUsers","some","user","spamState","uniqueString","divTextContent","textContent","emoteElements","querySelectorAll","emoteElement","emoteValue","exist","find","obj","key","prepareMessage","node","update","clonedNode","cloneNode","fontSize","marginTop","remove","elements","element","classes","classesToRemove","Array","from","filter","className","avatar","closest","animation","username","color","backgroundColor","onerror","src","trim","regexSentence","sentence","replace","regexChar","reply","chatEntry","childElementCount","firstElementChild","timeState","chatEntryDiv","addMessage","observeNestedChildren","parentNode","replaceWith","set","parent","parentElement","Promise","resolve","config","attributes","found","mutationCallback","mutationsList","nodeType","hasAttribute","bindRequests","bindTimeout","toLowerCase","chatroom","badgeCache","subscriber_badges","unbindRequests","clickOutsideHandlerFunction","isFullscreen","maxRows","Map","backgroundStates","positionStates","backgroundState","positionState","fontState","slide","shadow","menuHtml","parser","DOMParser","doc","parseFromString","menu","createToggle","svgToggle","dragElement","toTitleCase","createMenu","toggledClass","domMenu","shadowBox","createElement","zIndex","shadowRoot","attachShadow","mode","linkElement","rel","appendChild","menuLink","setAttribute","append","settingsMenu","layoutMenu","messageMenu","overlayMenu","closeBtn","hideMenu","homeBtn","open","storeBtn","userAgent","navigator","positionBtn","divInsidePosition","storage","local","get","result","top","left","alignItems","positionsPerChannel","positionsArray","existingPositionIndex","findIndex","item","videoSize","position","undefined","sizeBtn","divInsideSize","width","height","size","backgroundBtn","divInsideBackground","setExtensionStorageItem","baseMenu","settingsBtn","settingsBackBtn","settingsCloseBtn","layoutCloseBtn","layoutMenuBtn","layoutBackBtn","messageCloseBtn","messageMenuBtn","messageBackBtn","overlayCloseBtn","overlayMenuBtn","overlayBackBtn","spamBtnContainer","spamBtn","toggleElement","currentTarget","toggle","newSpamEnabled","fontBtn","divInsideFont","replyToggleContainer","replyToggle","newReplyEnabled","childNode","slideToggleContainer","slideToggle","newSlideEnabled","shadowToggleContainer","shadowToggle","newShadowEnabled","timeToggleContainer","timeToggle","newTimeEnabled","flusherToggleContainer","flushToggle","newFlushState","togglePointerEvents","flusherToggle","newChatEnabled","nodeValue","toggleEnableMenu","value","elementsToToggle","getElementById","removeEventListener","clickOutsideHandler","target","isClickInsideShadowBox","path","composedPath","checkResize","getFont","createChat","chatFlusher","flusherDiv","mainStylesDom","overlayStyle","head","font","menuStylesDom","menuStyle","getExtensionStorageItem","setCustomPosition","defaultValue","storedValue","toggleHtml","domToggle","popupMenu","existingButton","toggleBtn","marginRight","insertBefore","nextSibling","stopPropagation","showMenu","visible","selectRow","selectedRow","positions","i","run","row","prepareAnimation","startAnimation","messageData","space","rowIndex","lastItem","overlap","messageWidth","lastContainer","requestAnimationFrame","offsetWidth","rect1","getBoundingClientRect","rect2","right","requestNext","timeNeeded","Math","ceil","parentWidth","timeoutId","checkQueue","index","indexOf","splice","queueItem","shift","checkRow","oldest","appendVertical","timestamp","Date","created_at","dataset","lastTimestamp","current","currentTimestamp","previousSibling","children","lastChild","getMessageKey","messageId","keyValue","dupe","ignore","chatroom_id","eventType","eventName","createMessage","createGiftedMessage","createFollowersMessage","createHostMessage","createSubMessage","queueLength","wait","trunc","appendMessage","sender","content","reduced","reduceRepeatedSentences","messageKeyData","messageDiv","badgeSpan","badgeElements","getBadges","badgeElement","usernameSpan","identity","boldSpan","contentSpan","emoteRegex","lastIndex","match","exec","textBeforeEmote","slice","textBeforeNode","img","name","alt","textAfterLastEmote","textAfterNode","tagName","input","badgeArray","badge","cachedBadge","getBadgeImage","badgeImage","months","count","correspondingBadge","findClosestBadge","reduce","currentBadge","badge_image","checkForBadges","firstChatIdentity","baseBadge","badgeText","text","html","imgElement","imgUrl","newImg","svgElement","svgCopy","warn","bannedUser","bannedByUser","banned_by","banMessageContent","banMessageSpan","logText","expires_at","expiresAt","timeDifference","timeDiffText","humanizeDuration","addBannedUser","expiresText","createTextNode","now","existingUserIndex","bannedBy","getTime","expirationTime","timeUntilExpiration","removeBannedUser","currentUser","currentTime","unbanMessageContent","unbanMessageSpan","unbanText","milliseconds","seconds","floor","minutes","hours","days","weeks","years","subscriptionMessageContent","emojiSpan","String","fromCodePoint","subscriptionMessageSpan","subSpan","hostUsername","host_username","viewersCount","number_viewers","hostMessageContent","viewersCountSpan","hostMessageSpan","gifterUsername","gifter_username","giftedUsernames","gifted_usernames","giftedContent","gifterUsernameSpan","giftedSpan","followersCount","followersDiff","lastFollowersCount","messageContent","followersMessageSpan","Ip2","init","targetNode","waitForCondition","callback","hasFlusherAttribute","iframe","createChannel","URL","pathname","conditionCallback","reject","checkCondition","Kick","stopObserver","observeVideo","videoObserver","getElementsByTagName","innerText","broadcasterSVG","founderSVG","moderatorSVG","ogSVG","staffSVG","subGifter1SVG","subGufter2SVG","subscriberSVG","verifiedSVG","vipSVG","parseSVGStringToElement","svgString","xmlDoc","documentElement","subscriber","founder","broadcaster","moderator","og","staff","sub_gifter","sub_gifter_1","subGifter2SVG","verified","vip","pos1","pos2","pos3","pos4","onmousedown","e","preventDefault","setPosition","isInResizeHandle","clientX","clientY","onmouseup","closeResize","onmousemove","resizeElement","closeDragElement","offsetTop","offsetLeft","offsetHeight","scaleFactor","innerWidth","outerWidth","rect","rectVideo","newPosition","round","removeAttribute","handleSize","bottom","resizeTimer","ResizeObserver","entries","entry","currentUrl","oldWidth","parentHeight","documentWidth","clientWidth","startScrollingInterval","createIntroMessage","checkAddons","counter","intervalId","setInterval","KickTools","clearInterval","introContent","introSpan","introMessageSpan","clientHeight","scrollIntervalId","scrollChat","attribute","stateKey","state","chatBtn","chatContainer","click","chatContainerParent","scrollTop","scrollHeight","handleVisibilityChange","hidden","chatEnabledVisible","fontLink","isChrome","str","char","toUpperCase","hostname"],"sourceRoot":""}