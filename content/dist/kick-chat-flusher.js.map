{"version":3,"file":"kick-chat-flusher.js","mappings":"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EAAE,MAAM,EAAE,aAAa,EAAE,WAAW,EAAE,OAAO,EAAE,cAAc,CAAC;IAC/F,IAAI,CAAC3K,UAAU,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC;IAC9C,IAAI,CAAC4K,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,aAAa,GAAG,CAAC;IACtB,IAAI,CAAC5K,SAAS,GAAG,CAAC;IAClB,IAAI,CAAC6K,SAAS,GAAG,CAAC;IAClB,IAAI,CAAC3C,KAAK,GAAG,KAAK;IAClB,IAAI,CAAC4C,KAAK,GAAG,IAAI;IACjB,IAAI,CAAChH,UAAU,GAAG,KAAK;IACvB,IAAI,CAAChF,WAAW,GAAG,IAAI;IACvB,IAAI,CAACiM,MAAM,GAAG,IAAI;IAClB,IAAI,CAACtF,SAAS,GAAG,IAAI;IACrB,IAAI,CAAC6C,SAAS,GAAG,KAAK;EACxB;AACF;;;;;;;;;;;;;;ACjBA,MAAM0C,QAAQ,GAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AAEP,MAAMC,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;AAC9B,MAAMC,GAAG,GAAGF,MAAM,CAACG,eAAe,CAACJ,QAAQ,EAAE,WAAW,CAAC;AAClD,MAAMK,IAAI,GAAGF,GAAG,CAACzI,IAAI,CAACpD,UAAU;;;;;;;;;;;;;;;;;;;;;;ACnTH;AAC0B;AACZ;AACe;AAE1D,SAASoM,UAAUA,CAACrN,OAAO,EAAE;EACjC,MAAMsN,YAAY,GAAG,YAAY;;EAEjC;EACA,MAAMC,OAAO,GAAGvN,OAAO,CAACjB,KAAK,CAACmG,aAAa,CAAC,eAAe,CAAC;EAC5D,IAAIqI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AEF6a,aAAa,CAAC5a,OAAO,CAACnC,QAAQ,CAACC,IAAI,EAAE;QACnCgC,SAAS,EAAE,IAAI;QACfC,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC;IAED4a,YAAY,CAAC,CAAC;EAChB;AACF;AAEA,iEAAeF,IAAI;;;;;;;;;;;;;;ACrFnB,MAAMpiB,MAAM,CAAC;EAEV0iB,cAAc,GAAI;AACrB;AACA;AACA;AACA,OAAO;EAEJC,UAAU,GAAI;AACjB;AACA,yIAAyI;EAEtIC,YAAY,GAAI;AACnB;AACA,OAAO;EAEJC,KAAK,GAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,QAAQ,GAAI;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,aAAa,GAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,aAAa,GAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,aAAa,GAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,WAAW,GAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,MAAM,GAAI;AACb;AACA;AACA;AACA;AACA;AACA,OAAO;EAEJC,uBAAuBA,CAACC,SAAS,EAAE;IAChC,MAAMrV,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;IAC9B,MAAMqV,MAAM,GAAGtV,MAAM,CAACG,eAAe,CAACkV,SAAS,EAAE,eAAe,CAAC;IACjE,OAAOC,MAAM,CAACC,eAAe;EAChC;EAEA7iB,cAAc,GAAG;IACd8iB,UAAU,EAAE,IAAI,CAACJ,uBAAuB,CAAC,IAAI,CAACH,aAAa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","sources":["webpack:///./modules/flusher/flusher.js","webpack:///./modules/flusher/messages.js","webpack:///./modules/flusher/props.js","webpack:///./modules/flusher/states.js","webpack:///./modules/interface/menu/element.js","webpack:///./modules/interface/menu/menu.js","webpack:///./modules/interface/overlay.js","webpack:///./modules/interface/toggle/element.js","webpack:///./modules/interface/toggle/toggle.js","webpack:///./modules/layout/horizontal.js","webpack:///./modules/layout/vertical.js","webpack:///./modules/queue/queue.js","webpack:///./modules/site/ip2.js","webpack:///./modules/site/kick.js","webpack:///./modules/utils/badges.js","webpack:///./modules/utils/drag.js","webpack:///./modules/utils/resize.js","webpack:///./modules/utils/utils.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./modules/content.js"],"sourcesContent":["import { FlusherStates } from './states.js';\nimport { FlusherProps } from './props.js';\nimport { FlusherMessages } from './messages.js';\nimport { visibilityChange, logToConsole } from \"../utils/utils.js\";\nimport { stopScrollingInterval } from '../utils/resize.js'\n\nimport Badges from '../utils/badges.js';\n\nexport class Flusher {\n\tconstructor(video, domain, channelName, aeroKick) {\n\t\tthis.video = video;\n\t\tthis.states = new FlusherStates();\n\t\tthis.props = new FlusherProps();\n\t\tthis.badges = new Badges().badgeTypeToSVG;\n\t\tthis.props.domain = domain;\n\t\tthis.props.external = domain === 'KICK' ? false : true;\n\t\tthis.props.isVod = window.location.href.includes('/video/');\n\t\tthis.props.isAeroKick = aeroKick ?? false;\n\t\tthis.props.channelName = channelName;\n\n\t\tthis.provider = new FlusherMessages();\n\n\t\tvisibilityChange(this);\n\t}\n\n\tresetConnection() {\n\t\t/* logToConsole('Reset Connection'); */\n\n\t\tif (!this.props.flusher) return;\n\t\tclearChat(this.props.flusher);\n\t\tisVod = false;\n\t\tif (this.props.flusher && this.props.resizeObserver) {\n\t\t\tthis.props.resizeObserver.disconnect();\n\t\t}\n\t}\n\n\tclear() {\n\t\tif (this.container) this.container.style.display = 'none';\n\n\t\tconst isEnabled = this.states.chatEnabled;\n\t\tthis.states.chatEnabled = false;\n\n\t\tthis.props.elementQueue.length = 0;\n\t\tthis.props.messageQueue.length = 0;\n\t\tthis.props.lastRow = 0;\n\t\tfor (const id of this.props.timeoutIds) {\n\t\t\tclearTimeout(id);\n\t\t}\n\n\t\tstopScrollingInterval(this);\n\n\t\tif (this.container !== null) {\n\t\t\twhile (this.container.firstChild) {\n\t\t\t\tthis.container.removeChild(this.container.firstChild);\n\t\t\t}\n\t\t}\n\n\t\tthis.props.displayedMessages = [];\n\n\t\tif (this.props.lastPositionPerRow) {\n\t\t\tthis.props.lastPositionPerRow.length = 0;\n\t\t} else {\n\t\t\tthis.props.lastPositionPerRow = [];\n\t\t}\n\n\t\tif (this.props.rowQueue) {\n\t\t\tthis.props.rowQueue.length = 0;\n\t\t} else {\n\t\t\tthis.props.rowQueue = [];\n\t\t}\n\n\t\tthis.props.timeoutIds.length = 0;\n\n\t\tif (this.container !== null) this.container.style.display = 'flex';\n\n\t\tthis.states.chatEnabled = isEnabled;\n\n\t\tthis.props.isProcessingElements = false;\n\t\tthis.props.isProcessingMessages = false;\n\t}\n\n\tsetVerticalWidth() {\n\t\tconst elementHeight = this.props.elementHeight;\n\t\tswitch (this.states.sizeStates[this.states.sizeState]) {\n\t\t\tcase 'LARGE':\n\t\t\t\tthis.container.style.setProperty('--flusher-vertical-width', `${elementHeight * 14}px`);\n\t\t\t\tbreak;\n\t\t\tcase 'NORMAL':\n\t\t\t\tthis.container.style.setProperty('--flusher-vertical-width', `${elementHeight * 14}px`);\n\t\t\t\tbreak;\n\t\t\tcase 'SMALL':\n\t\t\t\tthis.container.style.setProperty('--flusher-vertical-width', `${elementHeight * 9}px`);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","import { processMessageQueue, processElementQueue, createUserBanMessage } from \"../queue/queue.js\";\nimport { logToConsole } from \"../utils/utils.js\";\n\nexport class FlusherMessages {\n  constructor() {\n    /* logToConsole(\"Create MessageProvider\"); */\n    this.socket = null;\n    this.nativeChatObserver = null;\n    this.channels = new Set();\n  }\n\n  subscribeChannel(flusher) {\n    const id = flusher.props.chatroomId;\n    if (!id) return;\n    if (this.channels.has(id)) {\n      /* logToConsole(`Channel ${id} Is Already Subscribed.`); */\n      return;\n    }\n\n    const subscriptionMessage = {\n      event: \"pusher:subscribe\",\n      data: { auth: \"\", channel: `chatrooms.${id}.v2` },\n    };\n\n    if (!this.socket) {\n      this.setupWebSocket(flusher, subscriptionMessage, id);\n      return;\n    }\n\n    logToConsole(`WebSocket Connection Opened: ${flusher.props.channelName} (${id})`);\n\n    this.socket.send(JSON.stringify(subscriptionMessage));\n    this.channels.add(id);\n\n    if (flusher.props.external) this.getHistory(flusher);\n  }\n\n  async getHistory(flusher) {\n    const apiUrl = `https://kick.com/api/v2/channels/${flusher.props.hostId}/messages`;\n\n    try {\n      const response = await fetch(apiUrl);\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch messages. Status: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data && data.data && data.data.messages) {\n        /* logToConsole(`History Has ${data.data.messages.length} Messages`); */\n        data.data.messages.forEach((message) => {\n          flusher.props.messageQueue.push(message);\n        });\n        processMessageQueue(flusher);\n      } else {\n        /* logToConsole(\"No Messages Found In The Response.\"); */\n      }\n    } catch (error) {\n      console.error(\"Error Fetching Messages:\", error.message);\n    }\n  }\n\n  setupWebSocket(flusher) {\n    /* logToConsole(`Setup WebSocket: ${flusher.props.channelName} (${flusher.props.chatroomId})`); */\n    if (this.socket) return;\n\n    /* console.log('run test');\n\n    const eventData = {\n      \"event\": \"App\\\\Events\\\\UserBannedEvent\",\n      \"channel\": \"chatrooms.123456.v2\",\n      \"data\": {\n        \"id\": \"7b1d6e2c-ba4f-4d88-87b0-9c9e67a0e731\",\n        \"user\": {\n          \"id\": 1234567,\n          \"username\": \"User123\",\n          \"slug\": \"user123\"\n        },\n        \"banned_by\": {\n          \"id\": 0,\n          \"username\": \"Mod123\",\n          \"slug\": \"mod123\"\n        },\n        \"expires_at\": \"2024-03-21T14:18:30+00:00\"\n      }\n    };\n\n    createUserBanMessage(eventData.data, flusher); */\n\n    const webSocketUrl = \"wss://ws-us2.pusher.com/app/eb1d5f283081a78b932c?protocol=7&client=js&version=7.6.0&flash=false\";\n\n    this.socket = new WebSocket(webSocketUrl);\n\n    this.socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      document.body.contains(flusher.video)\n        ? this.onMessage(data, flusher)\n        : this.disposeChannel();\n    };\n\n    this.socket.addEventListener(\"open\", (event) => {\n      this.subscribeChannel(flusher);\n    });\n\n    this.socket.addEventListener(\"close\", (event) => {\n      logToConsole(`WebSocket Connection Closed: ${flusher.props.channelName} (${flusher.props.chatroomId})`);\n      this.channels.clear();\n    });\n\n    this.socket.addEventListener(\"error\", (event) => {\n      console.error(\"WebSocket error:\", event);\n    });\n  }\n\n  onMessage(data, flusher) {\n    if (!flusher.states.chatEnabled || data === null || flusher.props.loading)\n      return;\n    flusher.props.messageQueue.push(data);\n    processMessageQueue(flusher);\n  }\n\n  disposeChannel() {\n    if (this.socket) {\n      this.socket.close();\n      this.socket = null;\n      return;\n    }\n  }\n\n  async interceptNative(flusher) {\n    /* logToConsole(`Intercept Native Chat`); */\n    const self = this;\n    self.flusher = flusher;\n\n    const AeroKick = document.body.classList.contains(\"aerokick-customization\");\n    if (AeroKick) logToConsole(`AeroKick Detected`);\n\n    const nativeChat = await waitForChat(\n      flusher.props.isVod\n        ? document.querySelector(\"#chatroom-replay\")\n        : document.querySelector(\n          AeroKick\n            ? \".chat-container .bk-overflow-y-auto\"\n            : \".overflow-y-scroll.py-3\"\n        ),\n      AeroKick\n    );\n\n    const b = typeof browser !== \"undefined\" ? browser : chrome;\n    const defaultAvatar = b.runtime.getURL(\"lib/kick/user-profile-pic.png\");\n\n    if (!flusher.states.flushState)\n      setTimeout(() => {\n        checkDupe(nativeChat.childNodes, AeroKick, false);\n      }, 500);\n\n    this.nativeChatObserver = new MutationObserver((mutations) => {\n      const nodesList = flusher.props.isVod ? mutations.reverse() : mutations;\n      nodesList.forEach((mutation) => {\n        if (mutation.type === \"childList\") {\n          checkDupe(mutation.addedNodes, AeroKick);\n        }\n      });\n    });\n\n    const observerConfig = { childList: true, subtree: false };\n    this.nativeChatObserver.observe(nativeChat, observerConfig);\n\n    async function checkDupe(addedNodes, AeroKick) {\n\n      addedNodes.forEach((addedNode) => {\n        if (!addedNode || addedNode.nodeName !== \"DIV\") return;\n\n        if (AeroKick && !flusher.props.isVod) {\n          const button = addedNode.querySelector(\"button\");\n          if (!button) {\n            console.log(\n              \"Kick Chat Flusher - Button does not exist in the added node:\",\n              addedNode\n            );\n            return;\n          }\n        }\n\n        const id =\n          AeroKick && flusher.props.isAeroKick\n            ? addedNode.querySelector(\"button\").getAttribute(\"data-radial-id\")\n            : addedNode.getAttribute(\"data-chat-entry\");\n        if (\n          id === \"history_breaker\" ||\n          (flusher.states.flushState && (!id || id === \"\"))\n        )\n          return;\n\n        if (id || id === \"\") {\n\n          const userId =\n            AeroKick && flusher.props.isAeroKick\n              ? addedNode\n                .querySelector(\"button\")\n                .getAttribute(\"data-radial-username\")\n              : addedNode\n                .querySelector(\"[data-chat-entry-user-id]\")\n                ?.getAttribute(\"data-chat-entry-user-id\");\n\n          if (self.flusher.props.isKickTools) {\n            if (addedNode.style.opacity ?? 1 < 1) {\n              const isUserBanned = self.flusher.props.bannedUsers.some(user => user.id === userId);\n              if (isUserBanned) { console.log(userId + ' allowed'); } else {\n                return;\n              }\n            }\n          }\n\n          if (!flusher.states.spamState || flusher.states.flushState) {\n            let uniqueString = \"\";\n            uniqueString += userId + \"-\";\n\n            const divTextContent =\n              AeroKick && flusher.props.isAeroKick\n                ? addedNode.querySelector(\"span.bk-inline\").textContent\n                : addedNode.querySelector(\".chat-entry-content\")?.textContent;\n            uniqueString += divTextContent + \"-\";\n\n            if (AeroKick && flusher.props.isAeroKick) {\n              const emoteElements = addedNode.querySelectorAll(\"img\");\n              emoteElements.forEach((emoteElement) => {\n                const emoteValue = emoteElement.getAttribute(\"alt\");\n                uniqueString += emoteValue;\n              });\n            } else {\n              const emoteElements =\n                addedNode.querySelectorAll(\"[data-emote-name]\");\n              emoteElements.forEach((emoteElement) => {\n                const emoteValue = emoteElement.getAttribute(\"data-emote-name\");\n                uniqueString += emoteValue;\n              });\n            }\n\n            const exist = flusher.props.displayedMessages.find((obj) => {\n              return obj.key === uniqueString;\n            });\n\n            if (exist && (!flusher.states.spamState || flusher.states.flushState)) return;\n\n            flusher.props.displayedMessages.push({ id: id, key: uniqueString });\n          }\n        }\n        setTimeout(() => prepareMessage(addedNode, id, defaultAvatar, false), 150);\n      });\n    }\n\n    async function prepareMessage(node, id, defaultAvatar, update) {\n      const clonedNode = node.cloneNode(true);\n\n      if (self.flusher.props.isAeroKick) {\n        clonedNode.style.fontSize = null;\n        clonedNode.style.marginTop = null;\n        clonedNode.classList.remove(\"relative\", \"bk-pl-1.5\");\n\n        if (flusher.states.flushState) {\n          var elements = clonedNode.querySelectorAll(\"[class*=bk-top-]\");\n\n          elements.forEach((element) => {\n            var classes = element.classList;\n            var classesToRemove = Array.from(classes).filter((className) =>\n              className.includes(\"bk-top-\")\n            );\n\n            classesToRemove.forEach((className) => {\n              element.classList.remove(className);\n            });\n          });\n        }\n\n        const avatar = clonedNode.querySelector('img[alt=\"avatar\"]');\n\n        if (avatar) {\n          avatar\n            .closest(\"button\")\n            .classList.remove(\n              \"bk-ease-in-out\",\n              \"bk-duration-100\",\n              \"bk-transition-colors\",\n              \"bk-translate-y-px\"\n            );\n          avatar.style.animation = \"none\";\n\n          const username = clonedNode.querySelector(\".bk-text-transparent\");\n          if (username)\n            username.style.color = username.style.backgroundColor ?? \"white\";\n\n          avatar.onerror = function () {\n            this.style.display = \"none\";\n            this.onerror = null;\n            this.src = defaultAvatar;\n            this.style.display = \"block\";\n          };\n        }\n      }\n\n      /* function getRandomColor() {\n            const letters = '0123456789ABCDEF';\n            let color = '#';\n            for (let i = 0; i < 6; i++) {\n               color += letters[Math.floor(Math.random() * 16)];\n            }\n            return color;\n         }\n\n         const randomColor = getRandomColor();\n         node.style.border = `2px solid ${randomColor}`;\n         clonedNode.style.border = `2px solid ${randomColor}`; */\n\n      if (id || id === \"\") {\n        if (\n          (!flusher.states.spamState || flusher.states.flushState) &&\n          !flusher.props.isVod\n        ) {\n          clonedNode\n            .querySelectorAll(\"span:nth-child(3) span\")\n            .forEach(function (element) {\n              if (element.textContent.trim().length > 0) {\n                const regexSentence = /(\\b.+?\\b)\\1+/g;\n                const sentence = element.textContent.replace(\n                  regexSentence,\n                  \"$1\"\n                );\n                const regexChar = /(.)(\\1{10,})/g;\n                element.textContent = sentence.replace(\n                  regexChar,\n                  \"$1$1$1$1$1$1$1$1$1$1\"\n                );\n              }\n            });\n        }\n\n        if (!flusher.states.reply || flusher.states.flushState) {\n          if (AeroKick) {\n            const chatEntry = clonedNode.querySelector(\".bk-text-sm\");\n            if (chatEntry) chatEntry.style.display = \"none\";\n          } else {\n            const chatEntry = clonedNode.querySelector(\".chat-entry\");\n            if (chatEntry && chatEntry.childElementCount > 1) {\n              chatEntry.firstElementChild.style.display = \"none\";\n            }\n          }\n        }\n\n        if (\n          flusher.props.isVod &&\n          (flusher.states.flushState || !flusher.states.timeState)\n        ) {\n          const chatEntryDiv = clonedNode.querySelector(\".chat-entry div\");\n          if (chatEntryDiv && chatEntryDiv.firstElementChild) {\n            chatEntryDiv.firstElementChild.style.display = \"none\";\n          }\n        }\n      }\n\n      clonedNode.classList.remove(\"mt-0.5\");\n\n      if (!update) {\n        addMessage();\n      } else { return clonedNode; }\n\n      function addMessage() {\n        flusher.props.elementQueue.push(clonedNode);\n        processElementQueue(flusher);\n\n        observeNestedChildren(node, id ?? getRandomInt(), clonedNode);\n\n        function getRandomInt() {\n          return Math.floor(Math.random() * (1000000 - 10000));\n        }\n\n        function observeNestedChildren(parentNode, id, clonedNode) {\n          const observer = new MutationObserver(async (mutations) => {\n            if (clonedNode) {\n              clonedNode.replaceWith(await prepareMessage(parentNode, id, defaultAvatar, true));\n            }\n          });\n\n          const observerConfig = { childList: true, subtree: true };\n          observer.observe(parentNode, observerConfig);\n\n          flusher.props.messageObservers.set(id, observer);\n        }\n      }\n    }\n\n    function waitForChat(parent) {\n      /* logToConsole(`Looking For Native Chat`); */\n\n      if (!parent) parent = document.body;\n\n      const chatEntry =\n        parent.querySelector(\".rounded-md.bk-block\") ||\n        parent.querySelector(\"[data-chat-entry]\");\n      if (chatEntry) {\n        /* logToConsole(`Native Chat Found`); */\n        return chatEntry.parentElement;\n      }\n\n      return new Promise((resolve) => {\n        const config = { attributes: true, childList: true, subtree: true };\n        let found = false;\n\n        const mutationCallback = function (mutationsList, observer) {\n          for (const mutation of mutationsList) {\n            if (mutation.type === \"childList\") {\n              mutation.addedNodes.forEach((node) => {\n                if (\n                  node.nodeType === 1 &&\n                  (node.classList.contains(\"bk-block.rounded-md\") ||\n                    node.hasAttribute(\"data-chat-entry\"))\n                ) {\n                  if (found) return;\n                  observer.disconnect();\n                  resolve(node.parentNode);\n                  found = true;\n                  /* logToConsole(`Native Chat Found`); */\n                }\n              });\n            }\n          }\n        };\n\n        const observer = new MutationObserver(mutationCallback);\n        observer.observe(parent, config);\n      });\n    }\n  }\n\n  async bindRequests(flusher) {\n    /* logToConsole(`Bind Requests`); */\n\n    if (!flusher) return;\n\n    if (!flusher.props.external && !this.nativeChatObserver)\n      this.interceptNative(flusher);\n\n    flusher.props.bindTimeout = setTimeout(\n      async () => {\n        if (!flusher) return;\n\n        if (!flusher.props.chatroomId && !flusher.props.isVod) {\n          try {\n            const channelName = flusher.props.channelName.toLowerCase().replace(/\\s/g, '');\n            const response = await fetch(\n              `https://kick.com/api/v1/channels/${channelName}`\n            );\n            const data = await response.json();\n\n            flusher.props.chatroomId =\n              data && data.chatroom && data.chatroom.id;\n\n            /* logToConsole(\n              `chatroomId: ${flusher.props.chatroomId}`\n            ); */\n\n            flusher.props.hostId = data.id;\n\n            if (flusher.props.external) {\n              /* logToConsole(`${data.subscriber_badges.length} Badges`); */\n              flusher.props.badgeCache.push(...data.subscriber_badges);\n            }\n          } catch (error) {\n            console.error(\"Error fetching data:\", error);\n          }\n        }\n\n        if (!this.socket && !flusher.props.isVod)\n          this.subscribeChannel(flusher);\n      },\n      flusher.props.external ? 0 : 5000\n    );\n  }\n\n  unbindRequests(flusher) {\n    /* logToConsole(`Unbind Requests`); */\n    this.disposeChannel(flusher);\n    if (!flusher?.props?.external) {\n      /* logToConsole(`Dispose Native Chat`); */\n      if (this.nativeChatObserver) this.nativeChatObserver.disconnect();\n      this.nativeChatObserver = null;\n      clearTimeout(flusher.props.bindTimeout);\n    }\n  }\n}\n","export class FlusherProps {\n  constructor() {\n    this.chatroomId = null;\n    this.clickOutsideHandlerFunction = null;\n    this.domain = null;\n    this.displayedMessages = [];\n    this.elementQueue = [];\n    this.external = false;\n    this.isFullscreen = false;\n    this.isProcessingElements = false;\n    this.isProcessingMessages = false;\n    this.isVod = false;\n    this.loading = false;\n    this.messageQueue = [];\n    this.badgeCache = [];\n    this.lastPositionPerRow = [];\n    this.rowQueue = [];\n    this.timeoutIds = [];\n    this.bannedUsers = [];\n    this.video = null;\n    this.lastRow = 0;\n    this.maxRows = 99;\n    this.isKickTools = false;\n    this.messageObservers = new Map();\n  }\n}","export class FlusherStates {\n  constructor() {\n    this.backgroundStates = ['SMALL', 'LARGE', 'OFF'];\n    this.positionStates = ['TOP LEFT', 'LEFT', 'BOTTOM LEFT', 'TOP RIGHT', 'RIGHT', 'BOTTOM RIGHT'];\n    this.sizeStates = ['SMALL', 'NORMAL', 'LARGE'];\n    this.backgroundState = 2;\n    this.positionState = 4;\n    this.sizeState = 1;\n    this.fontState = 1;\n    this.reply = false;\n    this.slide = true;\n    this.flushState = false;\n    this.chatEnabled = true;\n    this.shadow = true;\n    this.spamState = true;\n    this.timeState = false;\n  }\n}\n","const menuHtml = `<div class=\"flusher-menu\" style=\"display: none;\">\n  <div class=\"flusher-menu-base\" style=\"display: block;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <div class=\"flusher-menu-title\">Chat&nbsp;Flusher</div>\n      </div><button class=\"flusher-menu-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"flusher-icon icon\"><svg width=\"12\" height=\"12\"\n          viewBox=\"0 0 12 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div class=\"chat-actions-menu-list\">\n        <div class=\"flusher-enable flusher-actions-item\">\n          <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Overlay</div>\n          <div class=\"flex h-10 w-fit items-center justify-end\">\n            <div class=\"flusher-toggle-size-sm\">\n              <div class=\"flusher-toggle\">\n                <div class=\"flusher-toggle-indicator\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"flusher-flush flusher-actions-item\" style=\"display: flex;\">\n          <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Flush</div>\n          <div class=\"flex h-10 w-fit items-center justify-end\">\n            <div class=\"flusher-toggle-size-sm\">\n              <div class=\"flusher-toggle\">\n                <div class=\"flusher-toggle-indicator\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          class=\"flusher-layoutMenu flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\"\n          style=\"display: flex;\">\n          <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Layout</div>\n          <div class=\"flex h-10 w-fit items-center justify-end\">\n            <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg version=\"1.2\"\n              xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n              <path id=\"Layer\" class=\"s0\" d=\"m4.5 12.9l4.9-4.9-4.9-4.9 1.1-1.1 6 6-6 6z\"></path>\n            </svg></div>\n          </div>\n        </div>\n        <div\n          class=\"flusher-settings flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\"\n          style=\"display: flex;\">\n          <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Settings</div>\n          <div class=\"flex h-10 w-fit items-center justify-end\">\n            <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg version=\"1.2\"\n              xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n              <path id=\"Layer\" class=\"s0\" d=\"m4.5 12.9l4.9-4.9-4.9-4.9 1.1-1.1 6 6-6 6z\"></path>\n            </svg></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"flusher-menu-settings\" style=\"display: none;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <button class=\"flusher-settings-back -ml-2 variant-text size-sm flusher-icon-button\">\n          <div style=\"width: 16px; height: 16px;\" class=\"base-icon icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m11.1 3.1l-4.9 4.9 4.9 4.9-1.1 1.1-6-6 6-6z\"></path>\n          </svg></div>\n        </button>\n        <div class=\"pr-3\">Settings</div>\n      </div>\n      <button class=\"flusher-settings-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"base-icon icon\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 13\"\n          fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div class=\"flusher-spam flusher-actions-item\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Show Spam</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-font flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Font Size</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\"></div>\n        </div>\n      </div>\n      <div class=\"flusher-spaced flusher-actions-item\" style=\"display: none;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Spaced</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flusher-background flusher-actions-item\" style=\"display: none;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Background\n        </div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-store flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\">Web Store\n        </div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"\n            fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M3.5 12.5V2H2V14H14V12.5H3.5Z\" fill=\"currentColor\"></path>\n            <path\n              d=\"M5.52869 11.5287L10.9999 6.06125V9.5H12.4999V3.5H6.49994V5H9.93869L4.47119 10.4712L5.52869 11.5287Z\"\n              fill=\"currentColor\"></path>\n          </svg></div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-home flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\">Report Bugs\n        </div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"\n            fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M3.5 12.5V2H2V14H14V12.5H3.5Z\" fill=\"currentColor\"></path>\n            <path\n              d=\"M5.52869 11.5287L10.9999 6.06125V9.5H12.4999V3.5H6.49994V5H9.93869L4.47119 10.4712L5.52869 11.5287Z\"\n              fill=\"currentColor\"></path>\n          </svg></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"flusher-menu-layout\" style=\"display: none;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <button class=\"flusher-layout-back -ml-2 variant-text size-sm flusher-icon-button\">\n          <div style=\"width: 16px; height: 16px;\" class=\"base-icon icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m11.1 3.1l-4.9 4.9 4.9 4.9-1.1 1.1-6-6 6-6z\"></path>\n          </svg></div>\n        </button>\n        <div class=\"pr-3\">Layout</div>\n      </div>\n      <button class=\"flusher-layout-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"base-icon icon\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 13\"\n          fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div\n        class=\"flusher-messageMenu flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\"\n        style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Message</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m4.5 12.9l4.9-4.9-4.9-4.9 1.1-1.1 6 6-6 6z\"></path>\n          </svg></div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-overlayMenu flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\"\n        style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Overlay</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div style=\"width: 16px; height: 16px;\" class=\"flusher-icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m4.5 12.9l4.9-4.9-4.9-4.9 1.1-1.1 6 6-6 6z\"></path>\n          </svg></div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n  <div class=\"flusher-menu-message\" style=\"display: none;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <button class=\"flusher-message-back -ml-2 variant-text size-sm flusher-icon-button\">\n          <div style=\"width: 16px; height: 16px;\" class=\"base-icon icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m11.1 3.1l-4.9 4.9 4.9 4.9-1.1 1.1-6-6 6-6z\"></path>\n          </svg></div>\n        </button>\n        <div class=\"pr-3\">Message</div>\n      </div>\n      <button class=\"flusher-message-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"base-icon icon\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 13\"\n          fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div class=\"flusher-reply flusher-actions-item\" style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Show Reply</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flusher-slide flusher-actions-item\" style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Animation</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flusher-shadow flusher-actions-item\" style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Text Shadow</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flusher-time flusher-actions-item\" style=\"display: flex;\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Show Time</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"flusher-toggle-size-sm\">\n            <div class=\"flusher-toggle\">\n              <div class=\"flusher-toggle-indicator\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"flusher-background flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Background</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"flusher-menu-overlay\" style=\"display: none;\">\n    <div class=\"flex items-center justify-between px-2.5 pt-1 text-base font-bold\">\n      <div class=\"flex h-8 items-center space-x-2.5\">\n        <button class=\"flusher-overlay-back -ml-2 variant-text size-sm flusher-icon-button\">\n          <div style=\"width: 16px; height: 16px;\" class=\"base-icon icon\"><svg version=\"1.2\"\n            xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\">\n            <path id=\"Layer\" class=\"s0\" d=\"m11.1 3.1l-4.9 4.9 4.9 4.9-1.1 1.1-6-6 6-6z\"></path>\n          </svg></div>\n        </button>\n        <div class=\"pr-3\">Overlay</div>\n      </div>\n      <button class=\"flusher-overlay-close variant-text size-xs flusher-icon-button\">\n        <div style=\"width: 12px; height: 12px;\" class=\"base-icon icon\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 13\"\n          fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M12 1.99602L10.504 0.5L6 4.99867L1.49602 0.5L0 1.99602L4.49867 6.5L0 11.004L1.49602 12.5L6 8.00133L10.504 12.5L12 11.004L7.50133 6.5L12 1.99602Z\"\n            fill=\"currentColor\"></path>\n        </svg></div>\n      </button>\n    </div>\n    <div class=\"chat-actions-content\">\n      <div\n        class=\"flusher-position flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Position</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\"></div>\n        </div>\n      </div>\n      <div\n        class=\"flusher-size flusher-actions-item cursor-pointer hover:bg-secondary-lightest active:bg-secondary-lightest/60\">\n        <div class=\"select-none overflow-hidden truncate pr-2 text-sm font-medium\">Size</div>\n        <div class=\"flex h-10 w-fit items-center justify-end\">\n          <div class=\"select-none overflow-hidden truncate pr-0 text-sm font-medium\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>`;\n\nconst parser = new DOMParser();\nconst doc = parser.parseFromString(menuHtml, 'text/html');\nexport const menu = doc.body.firstChild;","import { menu } from './element.js';\nimport { createToggle, svgToggle } from '../toggle/toggle.js';\nimport { dragElement } from '../../utils/drag.js';\nimport { toTitleCase, logToConsole } from '../../utils/utils.js';\n\nexport function createMenu(flusher) {\n   const toggledClass = 'toggled-on';\n\n   /* flusher.video = flusher.props.external ? flusher.video : flusher.video.closest('.video-js'); */\n   const domMenu = flusher.video.querySelector('.flusher-menu');\n   if (domMenu === null) {\n      const b = typeof browser !== 'undefined' ? browser : chrome;\n      let parent = flusher.props.external ? flusher.video.parentNode : flusher.props.isAeroKick ? flusher.video.closest('#bk-video-player') : document.querySelector('.vjs-control-bar');\n\n      const shadowBox = document.createElement('div');\n      shadowBox.id = 'shadowbox';\n      if (flusher.props.isAeroKick) shadowBox.style.zIndex = 1001;\n\n      const shadowRoot = shadowBox.attachShadow({ mode: 'open' });\n\n      const linkElement = document.createElement('link');\n      linkElement.rel = 'stylesheet';\n      linkElement.href = b.runtime.getURL('lib/kick/app.b67a4f06.css');\n      shadowRoot.appendChild(linkElement);\n\n      const menuLink = document.createElement('link');\n      menuLink.rel = 'stylesheet';\n      menuLink.href = b.runtime.getURL('lib/flusher/menu.css');\n      shadowRoot.appendChild(menuLink);\n\n      flusher.menu = menu.cloneNode(true);\n      flusher.menu.setAttribute('domain', flusher.props.domain);\n\n      shadowRoot.appendChild(flusher.menu);\n      parent.append(shadowBox);\n      parent = parent.querySelector('#shadowbox').shadowRoot;\n\n      let settingsMenu = parent.querySelector('.flusher-menu-settings');\n      let layoutMenu = parent.querySelector('.flusher-menu-layout');\n      let messageMenu = parent.querySelector('.flusher-menu-message');\n      let overlayMenu = parent.querySelector('.flusher-menu-overlay');\n\n      const closeBtn = parent.querySelector('.flusher-menu-close');\n      closeBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const homeBtn = parent.querySelector('.flusher-home');\n      homeBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n         window.open('https://github.com/r0808914/Kick-Chat-Flusher/issues', '_blank');\n      });\n\n      const storeBtn = parent.querySelector('.flusher-store');\n      storeBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n         const userAgent = navigator.userAgent.toLowerCase();\n         userAgent.includes(\"firefox\") ?\n            window.open('https://addons.mozilla.org/en-US/firefox/addon/kickchatflusher/', '_blank') :\n            window.open('https://chromewebstore.google.com/detail/kick-chat-flusher/cefplanllnmdnnhncpopljmcjnlafdke', '_blank');\n      });\n\n      const positionBtn = overlayMenu.querySelector('.flusher-position');\n      const divInsidePosition = positionBtn.querySelector('div:empty');\n      divInsidePosition.textContent = toTitleCase(flusher.states.positionStates[flusher.states.positionState]);\n\n      positionBtn.addEventListener('mousedown', function (event) {\n         flusher.states.positionState = (flusher.states.positionState + 1) % flusher.states.positionStates.length;\n         divInsidePosition.textContent = toTitleCase(flusher.states.positionStates[flusher.states.positionState]);\n         flusher.container.setAttribute('position', flusher.states.positionStates[flusher.states.positionState].replace(/\\s/g, \"\"));\n         chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n            flusher.container.style.top = \"\";\n            flusher.container.style.left = \"\";\n            flusher.container.style.alignItems = \"\";\n\n            var positionsPerChannel = result.positionsPerChannel || {};\n            var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n            var existingPositionIndex = positionsArray.findIndex(function (item) {\n               return item.videoSize === flusher.props.videoSize;\n            });\n\n            if (existingPositionIndex !== -1 && positionsArray[existingPositionIndex]?.position?.top !== undefined) {\n               delete positionsArray[existingPositionIndex].position.top;\n               delete positionsArray[existingPositionIndex].position.left;\n            } else {\n               if (positionsArray[existingPositionIndex]?.position) {\n                  positionsArray[existingPositionIndex].position.location = flusher.states.positionState;\n               } else {\n                  positionsArray.push({\n                     videoSize: flusher.props.videoSize,\n                     position: {\n                        location: flusher.states.positionState\n                     }\n                  });\n               }\n            }\n\n            positionsPerChannel[flusher.props.channelName] = positionsArray;\n\n            chrome.storage.local.set({ \"positionsPerChannel\": positionsPerChannel }, function () {\n               /* console.log(\"positionsPerChannel:\", positionsPerChannel); */\n            });\n         });\n\n      });\n\n      const sizeBtn = overlayMenu.querySelector('.flusher-size');\n      const divInsideSize = sizeBtn.querySelector('div:empty');\n      divInsideSize.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.sizeState]);\n\n      sizeBtn.addEventListener('mousedown', function (event) {\n         flusher.states.sizeState = (flusher.states.sizeState + 1) % flusher.states.sizeStates.length;\n         divInsideSize.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.sizeState]);\n         flusher.container.setAttribute('size', flusher.states.sizeStates[flusher.states.sizeState].replace(/\\s/g, \"\"));\n         flusher.setVerticalWidth();\n         chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n            flusher.container.style.width = \"\";\n            flusher.container.style.height = \"\";\n\n            var positionsPerChannel = result.positionsPerChannel || {};\n            var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n            var existingPositionIndex = positionsArray.findIndex(function (item) {\n               return item.videoSize === flusher.props.videoSize;\n            });\n\n            if (existingPositionIndex !== -1 && positionsArray[existingPositionIndex].position.width) {\n               delete positionsArray[existingPositionIndex].position.width;\n               delete positionsArray[existingPositionIndex].position.height;\n            } else {\n               if (positionsArray[existingPositionIndex]?.position) {\n                  positionsArray[existingPositionIndex].position.size = flusher.states.sizeState;\n               } else {\n                  positionsArray.push({\n                     videoSize: flusher.props.videoSize,\n                     position: {\n                        size: flusher.states.sizeState\n                     }\n                  });\n               }\n            }\n\n            positionsPerChannel[flusher.props.channelName] = positionsArray;\n\n            chrome.storage.local.set({ \"positionsPerChannel\": positionsPerChannel }, function () {\n               /* console.log(\"Position removed for videoSize:\", flusher.props.videoSize); */\n            });\n         });\n      });\n\n      const backgroundBtn = messageMenu.querySelector('.flusher-background');\n      const divInsideBackground = backgroundBtn.querySelector('div:empty');\n      divInsideBackground.textContent = toTitleCase(flusher.states.backgroundStates[flusher.states.backgroundState]);\n\n      backgroundBtn.addEventListener('mousedown', function (event) {\n         flusher.states.backgroundState = (flusher.states.backgroundState + 1) % flusher.states.backgroundStates.length;\n         setExtensionStorageItem('flusher-background', flusher.states.backgroundState);\n         divInsideBackground.textContent = toTitleCase(flusher.states.backgroundStates[flusher.states.backgroundState]);\n         flusher.container.setAttribute('background', flusher.states.backgroundStates[flusher.states.backgroundState]);\n      });\n\n      const baseMenu = parent.querySelector('.flusher-menu-base');\n\n      const settingsBtn = parent.querySelector('.flusher-settings');\n      settingsBtn.addEventListener('mousedown', function (event) {\n         settingsMenu.style.display = 'block';\n         baseMenu.style.display = 'none';\n      });\n\n      const settingsBackBtn = parent.querySelector('.flusher-settings-back');\n      settingsBackBtn.addEventListener('mousedown', function (event) {\n         settingsMenu.style.display = 'none';\n         baseMenu.style.display = 'block';\n      });\n\n      const settingsCloseBtn = parent.querySelector('.flusher-settings-close');\n      settingsCloseBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const layoutCloseBtn = parent.querySelector('.flusher-layout-close');\n      layoutCloseBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const layoutMenuBtn = parent.querySelector('.flusher-layoutMenu');\n      layoutMenuBtn.addEventListener('mousedown', function (event) {\n         layoutMenu.style.display = 'block';\n         baseMenu.style.display = 'none';\n      });\n\n      const layoutBackBtn = parent.querySelector('.flusher-layout-back');\n      layoutBackBtn.addEventListener('mousedown', function (event) {\n         layoutMenu.style.display = 'none';\n         baseMenu.style.display = 'block';\n      });\n\n      const messageCloseBtn = parent.querySelector('.flusher-message-close');\n      messageCloseBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const messageMenuBtn = parent.querySelector('.flusher-messageMenu');\n      messageMenuBtn.addEventListener('mousedown', function (event) {\n         messageMenu.style.display = 'block';\n         layoutMenu.style.display = 'none';\n      });\n\n      const messageBackBtn = parent.querySelector('.flusher-message-back');\n      messageBackBtn.addEventListener('mousedown', function (event) {\n         messageMenu.style.display = 'none';\n         layoutMenu.style.display = 'block';\n      });\n\n      const overlayCloseBtn = parent.querySelector('.flusher-overlay-close');\n      overlayCloseBtn.addEventListener('mousedown', function (event) {\n         hideMenu(flusher);\n      });\n\n      const overlayMenuBtn = parent.querySelector('.flusher-overlayMenu');\n      overlayMenuBtn.addEventListener('mousedown', function (event) {\n         chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n            var positionsPerChannel = result.positionsPerChannel || {};\n\n            var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n            var existingPositionIndex = positionsArray.findIndex(function (item) {\n               return item.videoSize === flusher.props.videoSize;\n            });\n\n            if (existingPositionIndex !== -1) {\n               if (positionsPerChannel[flusher.props.channelName][existingPositionIndex].position.top) {\n                  divInsidePosition.textContent = \"Custom\";\n               } if (positionsPerChannel[flusher.props.channelName][existingPositionIndex].position.width) {\n                  divInsideSize.textContent = \"Custom\";\n               }\n            }\n\n            overlayMenu.style.display = 'block';\n            layoutMenu.style.display = 'none';\n         });\n      });\n\n      const overlayBackBtn = parent.querySelector('.flusher-overlay-back');\n      overlayBackBtn.addEventListener('mousedown', function (event) {\n         overlayMenu.style.display = 'none';\n         layoutMenu.style.display = 'block';\n      });\n\n      (flusher.states.flushState || !flusher.states.chatEnabled) ? layoutMenuBtn.style.display = 'none' : layoutMenuBtn.style.display = 'flex';\n\n      const spamBtnContainer = parent.querySelector('.flusher-spam');\n      const spamBtn = spamBtnContainer.querySelector('.flusher-toggle');\n      spamBtn.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n         const newSpamEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.spamState = newSpamEnabled;\n         setExtensionStorageItem('flusher-spam', newSpamEnabled);\n         flusher.props.displayedMessages = [];\n      });\n\n      (flusher.states.flushState || !flusher.states.chatEnabled) ? spamBtnContainer.style.display = 'none' : spamBtnContainer.style.display = 'flex';\n      if (flusher.states.spamState) spamBtn.classList.toggle(toggledClass);\n\n      const fontBtn = settingsMenu.querySelector('.flusher-font');\n      const divInsideFont = fontBtn.querySelector('div:empty');\n      divInsideFont.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.fontState]);\n\n      fontBtn.addEventListener('mousedown', function (event) {\n         flusher.states.fontState = (flusher.states.fontState + 1) % flusher.states.sizeStates.length;\n         setExtensionStorageItem('flusher-font', flusher.states.fontState);\n         divInsideFont.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.fontState]);\n         flusher.container.setAttribute('font', flusher.states.sizeStates[flusher.states.fontState].replace(/\\s/g, \"\"));\n         if (flusher.states.flushState) flusher.clear();\n      });\n\n      (!flusher.states.chatEnabled) ? fontBtn.style.display = 'none' : fontBtn.style.display = 'flex';\n\n      const replyToggleContainer = parent.querySelector('.flusher-reply');\n      const replyToggle = replyToggleContainer.querySelector('.flusher-toggle');\n      replyToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newReplyEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.reply = newReplyEnabled;\n\n         flusher.container.childNodes.forEach(childNode => {\n            const chatEntry = childNode.querySelector('.chat-entry');\n            if (chatEntry && chatEntry.childElementCount > 1) {\n               chatEntry.firstElementChild.style.display = flusher.states.reply ? 'flex' : 'none';\n            }\n         });\n\n         setExtensionStorageItem('flusher-reply', newReplyEnabled);\n      });\n\n      (flusher.props.external || flusher.props.isVod) ? replyToggleContainer.style.display = 'none' : replyToggleContainer.style.display = 'flex';\n      if (flusher.states.reply) replyToggle.classList.toggle(toggledClass);\n\n      const slideToggleContainer = parent.querySelector('.flusher-slide');\n      const slideToggle = slideToggleContainer.querySelector('.flusher-toggle');\n      slideToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newSlideEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.slide = newSlideEnabled;\n\n         setExtensionStorageItem('flusher-slide', newSlideEnabled);\n      });\n\n      if (flusher.states.slide) slideToggle.classList.toggle(toggledClass);\n\n      const shadowToggleContainer = parent.querySelector('.flusher-shadow');\n      const shadowToggle = shadowToggleContainer.querySelector('.flusher-toggle');\n      shadowToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newShadowEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.shadow = newShadowEnabled;\n\n         flusher.container.setAttribute('shadow', newShadowEnabled);\n\n         setExtensionStorageItem('flusher-shadow', newShadowEnabled);\n      });\n\n      if (flusher.states.shadow) shadowToggle.classList.toggle(toggledClass);\n\n      const timeToggleContainer = messageMenu.querySelector('.flusher-time');\n      const timeToggle = timeToggleContainer.querySelector('.flusher-toggle');\n      timeToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newTimeEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.timeState = newTimeEnabled;\n\n         flusher.container.childNodes.forEach(childNode => {\n            const chatEntry = childNode.querySelector('.chat-entry div');\n            chatEntry.firstElementChild.style.display = flusher.states.timeState ? 'initial' : 'none';\n         });\n\n         flusher.container.setAttribute('time', newTimeEnabled);\n         setExtensionStorageItem('flusher-time', newTimeEnabled);\n      });\n\n      if (flusher.states.timeState) timeToggle.classList.toggle(toggledClass);\n      (!flusher.props.isVod || flusher.states.flushState) ? timeToggleContainer.style.display = 'none' : timeToggleContainer.style.display = 'flex';\n\n      const flusherToggleContainer = parent.querySelector('.flusher-flush');\n      const flushToggle = flusherToggleContainer.querySelector('.flusher-toggle');\n      flushToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newFlushState = toggleElement.classList.contains(toggledClass);\n         newFlushState ? layoutMenuBtn.style.display = 'none' : layoutMenuBtn.style.display = 'flex';\n         flusher.states.flushState = newFlushState;\n\n         (flusher.states.flushState || !flusher.states.chatEnabled) ? spamBtnContainer.style.display = 'none' : spamBtnContainer.style.display = 'flex';\n\n         if (flusher.states.chatEnabled && !flusher.states.flushState) dragElement(flusher);\n\n         togglePointerEvents(flusher);\n         flusher.clear();\n         flusher.container.setAttribute('layout', newFlushState ? 'horizontal' : 'vertical');\n\n         setExtensionStorageItem('flusher-flush', newFlushState);\n      });\n\n      (!flusher.states.chatEnabled) ? flusherToggleContainer.style.display = 'none' : flusherToggleContainer.style.display = 'flex';\n      if (flusher.states.flushState) flushToggle.classList.toggle(toggledClass);\n\n      const flusherToggle = parent.querySelector('.flusher-enable .flusher-toggle');\n      flusherToggle.addEventListener('mousedown', function (event) {\n         const toggleElement = event.currentTarget;\n         toggleElement.classList.toggle(toggledClass);\n\n         const newChatEnabled = toggleElement.classList.contains(toggledClass);\n         flusher.states.chatEnabled = newChatEnabled;\n\n         newChatEnabled ? flusher.provider.bindRequests(flusher) : flusher.provider.unbindRequests(flusher)\n\n         if (newChatEnabled && flusher.container.attributes['layout']?.nodeValue === 'vertical') dragElement(flusher);\n\n         flusher.clear();\n\n         svgToggle(flusher);\n         toggleEnableMenu();\n         togglePointerEvents(flusher);\n\n         (flusher.states.flushState || !flusher.states.chatEnabled) ? spamBtnContainer.style.display = 'none' : spamBtnContainer.style.display = 'flex';\n         (flusher.states.flushState || !flusher.states.chatEnabled) ? layoutMenuBtn.style.display = 'none' : layoutMenuBtn.style.display = 'flex';\n         (!flusher.states.chatEnabled) ? flusherToggleContainer.style.display = 'none' : flusherToggleContainer.style.display = 'flex';\n         (!flusher.states.chatEnabled) ? fontBtn.style.display = 'none' : fontBtn.style.display = 'flex';\n\n         flusher.container.setAttribute('enabled', newChatEnabled);\n\n         setExtensionStorageItem('flusher-enable', newChatEnabled);\n      });\n\n      if (flusher.states.chatEnabled) flusherToggle.classList.toggle(toggledClass);\n\n      return createToggle(flusher);\n   }\n\n   function setExtensionStorageItem(key, value) {\n      const data = { [key]: value };\n      chrome.storage.local.set(data, () => {\n         /* logToConsole(`Value for key ${key} has been set to ${value} in extension storage.`); */\n      });\n   }\n}\n\nexport function toggleEnableMenu() {\n   var elementsToToggle = ['flusher-flush', 'flusher-settings', 'flusher-layoutMenu'];\n   elementsToToggle.forEach(function (id) {\n      var element = document.getElementById(id);\n      if (element) {\n         if (id === 'flusher-layoutMenu' && flusher.states.flushState === true && flusher.states.chatEnabled) return;\n         flusher.states.chatEnabled ? flusher.video.style.display = 'flex' : flusher.video.style.display = 'none';\n      }\n   });\n}\n\nexport function hideMenu(flusher) {\n   const baseMenu = flusher.menu.querySelector('.flusher-menu-base');\n   const settingsMenu = flusher.menu.querySelector('.flusher-menu-settings');\n   const layoutMenu = flusher.menu.querySelector('.flusher-menu-layout');\n   const overlayMenu = flusher.menu.querySelector('.flusher-menu-overlay');\n   const messageMenu = flusher.menu.querySelector('.flusher-menu-message');\n\n   flusher.menu.style.display = 'none';\n   settingsMenu.style.display = 'none';\n   baseMenu.style.display = 'none';\n   layoutMenu.style.display = 'none';\n   overlayMenu.style.display = 'none';\n   messageMenu.style.display = 'none';\n\n   svgToggle(flusher);\n   document.removeEventListener('mousedown', flusher.clickOutsideHandlerFunction);\n}\n\nexport function clickOutsideHandler(event, flusher) {\n   if (flusher.menu !== null && !flusher.menu.contains(event.target)\n      && flusher.menu.style.display === 'block'\n      && !isClickInsideShadowBox(event.target)) {\n      if (flusher.toggle.contains(event.target) || event.target === flusher.toggle) return;\n      hideMenu(flusher);\n   }\n   function isClickInsideShadowBox(target) {\n      const path = event.composedPath();\n      return path.some((node) => node.id === 'shadowbox');\n   }\n}\n\nexport function togglePointerEvents(flusher) {\n   if (flusher.states.flushState || !flusher.states.chatEnabled) {\n      flusher.container.classList.remove('flusher-grab');\n      flusher.container.classList.add('flusher-no-grab');\n   } else {\n      flusher.container.classList.remove('flusher-no-grab');\n      flusher.container.classList.add('flusher-grab');\n\n      flusher.props.lastRow = 2;\n      dragElement(flusher);\n   }\n}\n","import { createMenu } from './menu/menu.js';\nimport { checkResize } from '../utils/resize.js';\nimport { getFont, logToConsole, toTitleCase } from '../utils/utils.js';\n\nexport async function createChat(flusher) {\n   if (flusher.video.hasAttribute('flusher')) return;\n   flusher.video.setAttribute('flusher', \"\");\n\n   /* logToConsole(`Create Chat`); */\n\n   const chatFlusher = document.createElement(\"div\");\n   chatFlusher.classList.add(\"flusher\");\n   if (flusher.props.isAeroKick) chatFlusher.style.zIndex = 1000;\n\n   const flusherDiv = document.createElement(\"div\");\n   flusherDiv.classList.add(\"flusher-messages\");\n\n   const shadowRoot = flusher.props.external ? chatFlusher.attachShadow({ mode: 'open' }) : null;\n   const b = typeof browser !== 'undefined' ? browser : chrome;\n\n   const mainStylesDom = document.getElementById('flusher-css-overlay');\n   if (!mainStylesDom) {\n      const overlayStyle = document.createElement('link');\n      overlayStyle.href = b.runtime.getURL('lib/flusher/main.css');\n      overlayStyle.id = 'flusher-css-overlay';\n      overlayStyle.rel = 'stylesheet';\n      document.head.appendChild(overlayStyle);\n\n      const font = getFont();\n      document.head.appendChild(font);\n   }\n\n   const menuStylesDom = document.getElementById('flusher-css');\n   if (!menuStylesDom || flusher.props.external) {\n      const menuStyle = document.createElement('link');\n      menuStyle.href = b.runtime.getURL('lib/flusher/overlay.css');\n      menuStyle.rel = 'stylesheet';\n      menuStyle.id = 'flusher-css';\n      flusher.props.external ? shadowRoot.appendChild(menuStyle) : document.head.append(menuStyle);\n   }\n\n   flusher.container = flusherDiv;\n\n   flusher.states.chatEnabled = await getExtensionStorageItem('flusher-enable', flusher.states.chatEnabled);\n   flusher.states.flushState = await getExtensionStorageItem('flusher-flush', flusher.states.flushState);\n   flusher.states.reply = await getExtensionStorageItem('flusher-reply', flusher.states.reply);\n   flusher.states.spamState = await getExtensionStorageItem('flusher-spam', flusher.states.spamState);\n   flusher.states.fontState = await getExtensionStorageItem('flusher-font', flusher.states.fontState);\n   flusher.states.backgroundState = await getExtensionStorageItem('flusher-background', flusher.states.backgroundState);\n   flusher.states.timeState = await getExtensionStorageItem('flusher-time', flusher.states.timeState);\n   flusher.states.shadow = await getExtensionStorageItem('flusher-shadow', flusher.states.shadow);\n   flusher.states.slide = await getExtensionStorageItem('flusher-slide', flusher.states.slide);\n\n   setCustomPosition(flusher);\n\n   flusher.toggle = createMenu(flusher);\n\n   flusher.video.parentNode.append(chatFlusher);\n   flusher.props.external ? shadowRoot.appendChild(flusherDiv) : chatFlusher.append(flusherDiv);\n   checkResize(flusher);\n\n   function getExtensionStorageItem(key, defaultValue) {\n      return new Promise((resolve) => {\n         chrome.storage.local.get([key], (result) => {\n            const storedValue = result[key];\n            resolve(storedValue !== undefined ? storedValue : defaultValue);\n         });\n      });\n   }\n}\n\nexport function setCustomPosition(flusher) {\n   chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n      var positionsPerChannel = result.positionsPerChannel || {};\n      var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n      var existingPositionIndex = positionsArray.findIndex(function (item) {\n         return item.videoSize === flusher.props.videoSize;\n      });\n\n      if (existingPositionIndex !== -1) {\n         const location = positionsArray[existingPositionIndex].position?.location;\n         const size = positionsArray[existingPositionIndex].position?.size;\n         flusher.states.positionState = location ?? 4;\n         flusher.states.sizeState = size ?? 1;\n      } else {\n         flusher.states.positionState = 4;\n         flusher.states.sizeState = 1;\n      }\n\n      if (flusher.menu) {\n         const sizeBtn = flusher.menu.querySelector('.flusher-size');\n         if (sizeBtn) {\n            const divInsideSize = sizeBtn.querySelector('div.pr-0');\n            divInsideSize.textContent = toTitleCase(flusher.states.sizeStates[flusher.states.sizeState]);\n         }\n\n         const positionBtn = flusher.menu.querySelector('.flusher-position');\n         if (positionBtn) {\n            const divInsidePosition = positionBtn.querySelector('div.pr-0');\n            divInsidePosition.textContent = toTitleCase(flusher.states.positionStates[flusher.states.positionState]);\n         }\n      }\n   });\n}","const toggleHtml = `<button class=\"flusher-toggle vjs-control vjs-button\"><span class=\"vjs-icon-placeholder\" aria-hidden=\"true\"></span><svg\nviewBox=\"0 0 16 16\" color=\"white\" class=\"mx-auto toggle-icon\" style=\"width: 25px;\">\n<path\n  d=\"M12.8191 7.99813C12.8191 7.64949 12.7816 7.30834 12.7104 6.97844L13.8913 6.29616L12.3918 3.69822L11.2071 4.38051C10.7048 3.9269 10.105 3.57076 9.44517 3.35708V2H6.44611V3.36082C5.78632 3.57451 5.19025 3.9269 4.68416 4.38426L3.49953 3.70197L2 6.29616L3.18088 6.97844C3.10965 7.30834 3.07217 7.64949 3.07217 7.99813C3.07217 8.34677 3.10965 8.68791 3.18088 9.01781L2 9.70009L3.49953 12.298L4.68416 11.6157C5.1865 12.0694 5.78632 12.4255 6.44611 12.6392V14H9.44517V12.6392C10.105 12.4255 10.701 12.0731 11.2071 11.6157L12.3918 12.298L13.8913 9.70009L12.7104 9.01781C12.7816 8.68791 12.8191 8.34677 12.8191 7.99813ZM9.82006 9.87254H6.07123V6.12371H9.82006V9.87254Z\"\n  fill=\"currentColor\"></path>\n</svg><span class=\"vjs-control-text\" aria-live=\"polite\">Chat Flusher</span>\n</button>`;\n\nconst parser = new DOMParser();\nconst doc = parser.parseFromString(toggleHtml, 'text/html');\nexport const toggle = doc.body.firstChild;","import { toggle } from './element.js';\nimport { hideMenu, clickOutsideHandler } from '../menu/menu.js';\n\nexport let clickOutsideHandlerFunction = null;\n\nexport function createToggle(flusher) {\n\tconst parent = (!flusher.props.isAeroKick && !flusher.props.external) ? flusher.video.closest('#video-holder') : flusher.video.parentNode;\n\tconst domToggle = parent.querySelector('.flusher-toggle-btn');\n\tif (domToggle !== null) return;\n\n\tconst popupMenu = parent.querySelector('#shadowbox').shadowRoot.querySelector('.flusher-menu');\n\tconst baseMenu = popupMenu.querySelector('.flusher-menu-base');\n\tconst existingButton = flusher.props.external ? parent : flusher.props.isAeroKick ? flusher.video.parentElement.querySelector('button.bk-relative.bk-mr-4') : document.querySelector('.vjs-fullscreen-control');\n\n\tconst toggleBtn = (flusher.props.external || flusher.props.isAeroKick) ? toggle.querySelector('svg').cloneNode(true) : toggle.cloneNode(true);\n\tif (flusher.props.isAeroKick) toggleBtn.style.marginRight = \"1rem\";\n\n\tflusher.props.external ? existingButton.parentNode.append(toggleBtn) : existingButton.parentElement.insertBefore(toggleBtn, flusher.props.isAeroKick ? existingButton : existingButton.nextSibling);\n\n\tsvgToggle(flusher);\n\n\ttoggleBtn.addEventListener('mousedown', function (event) {\n\t\tevent.stopPropagation();\n\t\tpopupMenu.style.display === \"block\" ? hideMenu(flusher) : showMenu();\n\t});\n\n\tfunction showMenu() {\n\t\tbaseMenu.style.display = 'block';\n\t\tpopupMenu.style.display = 'block';\n\t\tsvgToggle(flusher);\n\t\tflusher.clickOutsideHandlerFunction = (event) => clickOutsideHandler(event, flusher);\n\t\tdocument.addEventListener('mousedown', flusher.clickOutsideHandlerFunction);\n\t}\n\treturn toggleBtn;\n}\n\nexport function svgToggle(flusher) {\n\tconst parent = flusher.props.external ? flusher.video.closest('.item-box') : document;\n\tconst toggle = parent.querySelector('.toggle-icon');\n\tif (toggle === null) return;\n\tconst menu = parent.querySelector('#shadowbox').shadowRoot.querySelector('.flusher-menu');\n\tconst visible = menu.style.display === \"block\" ? true : false;\n\tif (flusher.states.chatEnabled || visible) {\n\t\ttoggle.classList.add('svg-toggle');\n\t} else {\n\t\ttoggle.classList.remove('svg-toggle');\n\t}\n}","export function selectRow(message, flusher) {\n\tlet selectedRow = 0;\n\tconst positions = flusher.props.lastPositionPerRow.length ?? 0;\n\tif (positions > 0) {\n\t\tfor (let i = 0; i < positions; i++) {\n\n\t\t\tconst item = flusher.props.lastPositionPerRow[i];\n\n\t\t\tif (item === undefined || item.run === true) {\n\t\t\t\tselectedRow = i;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (flusher.props.rowQueue[i].length < 2) {\n\t\t\t\tmessage.row = i;\n\t\t\t\tmessage = prepareAnimation(message, flusher);\n\t\t\t\tif (message !== null) flusher.props.rowQueue[i].push(message);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselectedRow = i + 1;\n\t\t}\n\t}\n\n\tmessage.row = selectedRow;\n\n\tflusher.props.rowQueue[selectedRow] = flusher.props.rowQueue[selectedRow] ?? [];\n\n\tmessage = prepareAnimation(message, flusher);\n\tif (message !== null) startAnimation(message, flusher);\n}\n\nfunction startAnimation(messageData, flusher) {\n\tconst message = messageData.container;\n\tconst space = 4;\n\tconst rowIndex = messageData.row;\n\n\tconst lastItem = flusher.props.lastPositionPerRow?.[rowIndex];\n\t!flusher.props.lastPositionPerRow ? flusher.props.lastPositionPerRow = [] : null;\n\tflusher.props.lastPositionPerRow[rowIndex] = { container: message, run: false };\n\n\tlet overlap = 0;\n\tlet messageWidth;\n\tconst lastContainer = lastItem !== undefined ? lastItem.container : undefined;\n\n\tif (lastContainer !== undefined) {\n\n\t\trequestAnimationFrame(() => {\n\t\t\tflusher.container.appendChild(message);\n\t\t\tmessageWidth = message.offsetWidth;\n\t\t\tmessage.style.marginRight = `-${messageWidth}px`;\n\n\t\t\tconst rect1 = message.getBoundingClientRect();\n\t\t\tconst rect2 = lastContainer.getBoundingClientRect();\n\n\t\t\toverlap = rect2.right - rect1.left;\n\n\t\t\t/* queue running */\n\t\t\tif (lastItem.run === false) {\n\t\t\t\tmessage.style.marginRight = `-${(messageWidth + overlap + space)}px`;\n\t\t\t\tmessage.classList.add('flusher-animation');\n\t\t\t}\n\n\t\t\t/* queue ended */\n\t\t\telse {\n\t\t\t\tif (overlap > -8) {\t/* append last queue */\n\t\t\t\t\tmessage.style.marginRight = `-${(messageWidth + overlap + space)}px`;\n\t\t\t\t\tmessage.classList.add('flusher-animation');\n\n\t\t\t\t} else {\t/* new queue */\n\t\t\t\t\tmessage.style.marginRight = `-${(messageWidth + space)}px`;\n\t\t\t\t\tmessage.classList.add('flusher-animation');\n\t\t\t\t\toverlap = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trequestNext(messageWidth, overlap, messageData, flusher);\n\t\t});\n\t}\n\n\t/* new row */\n\telse {\n\t\tflusher.container.appendChild(message);\n\t\tmessageWidth = message.offsetWidth;\n\t\tmessage.style.marginRight = `-${(messageWidth + space)}px`;\n\t\tmessage.classList.add('flusher-animation');\n\n\t\toverlap = 0;\n\t\trequestNext(messageWidth, overlap, messageData, flusher);\n\t}\n\n\tasync function requestNext(messageWidth, overlap, messageData, flusher) {\n\t\tlet timeNeeded = Math.ceil((messageWidth + space + overlap) / flusher.props.parentWidth * 16000);\n\n\t\tconst timeoutId = setTimeout(() => {\n\t\t\tcheckQueue(messageData, flusher);\n\t\t\tconst index = flusher.props.timeoutIds.indexOf(timeoutId);\n\t\t\tif (index !== -1) {\n\t\t\t\tflusher.props.timeoutIds.splice(index, 1);\n\t\t\t}\n\t\t}, timeNeeded);\n\n\t\tflusher.props.timeoutIds.push(timeoutId);\n\t}\n\n\tfunction checkQueue(messageData, flusher) {\n\t\tconst index = messageData.row;\n\n\t\tif(!flusher?.props?.rowQueue[index]) return;\n\t\tconst queueItem = flusher.props.rowQueue[index].shift();\n\t\t\n\t\tif (queueItem) {\n\t\t\tcheckRow(queueItem, index, flusher);\n\t\t} else {\n\t\t\tflusher.props.lastRow = flusher.props.lastRow - 1;\n\t\t\tflusher.props.lastPositionPerRow[index] = { container: messageData.container, run: true };\n\t\t}\n\t}\n\n\tfunction checkRow(messageData, rowIndex, flusher) {\n\t\t/* To be Fixed */\n\t\t\n\t\t/* if ((rowIndex + 1) > flusher.props.lastRow) {\n\t\t\tfor (let i = 0; i < rowIndex; i++) {\n\t\t\t\tif (flusher.props.lastPositionPerRow[i] === undefined || flusher.props.lastPositionPerRow[i].run === true) {\n\t\t\t\t\tif (messageData.message !== null) {\n\t\t\t\t\t\tflusher.props.lastPositionPerRow[rowIndex] = undefined;\n\t\t\t\t\t\tmessageData.container.style.setProperty('--row', i);\n\t\t\t\t\t\tmessageData.container.classList.add('flusher-green');\n\n\t\t\t\t\t\tstartAnimation(messageData, flusher);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (flusher.props.rowQueue[i].length < 1) {\n\t\t\t\t\tif (messageData.container !== null) {\n\t\t\t\t\t\tflusher.props.lastPositionPerRow[i] = undefined;\n\t\t\t\t\t\tmessageData.container.style.setProperty('--row', i);\n\t\t\t\t\t\tflusher.props.rowQueue[i].push(messageData);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t} */\n\n\t\tstartAnimation(messageData, flusher);\n\t}\n}\n\nfunction prepareAnimation(data, flusher) {\n\tif (!data.container) data.container = data;\n\n\tflusher.props.external ? data.container.classList.add('flusher-message') : data.container.classList.add('flusher-kick');\n\n\tdata.container.style.setProperty('--row', data.row);\n\tdata.container.addEventListener(\"animationend\", function () {\n\t\ttry {\n\t\t\tconst oldest = flusher.container.firstChild;\n\t\t\tif (!flusher.states.spamState) {\n\t\t\t\tconst entryId = flusher.props.isAeroKick ? oldest.querySelector('button')?.getAttribute('data-radial-id') : oldest.getAttribute('data-chat-entry');\n\t\t\t\tif(entryId)\n\t\t\t\tflusher.props.displayedMessages = flusher.props.displayedMessages.filter(message => message.id !== entryId);\n\t\t\t}\n\t\t\toldest.remove();\n\t\t} catch { }\n\t});\n\n\treturn data;\n}","export function appendVertical(message, flusher) {\n\tif (!message) return;\n\tconst lastItem = flusher.container.firstChild;\n\n\tif (flusher.props.external) {\n\t\tif (flusher.states.slide) message.container.classList.add(\"flusher-animation-vertical\");\n\n\t\tconst timestamp = new Date(message.created_at);\n\t\tmessage.container.dataset.timestamp = timestamp;\n\t\tif (lastItem) {\n\t\t\tconst lastTimestamp = new Date(lastItem.dataset.timestamp ?? 0);\n\t\t\tif (timestamp < lastTimestamp) {\n\t\t\t\tflusher.container.append(message.container);\n\t\t\t} else {\n\t\t\t\tlet current = lastItem;\n\t\t\t\twhile (current) {\n\t\t\t\t\tconst currentTimestamp = new Date(current.dataset.timestamp);\n\t\t\t\t\tif (timestamp > currentTimestamp) {\n\t\t\t\t\t\tflusher.container.insertBefore(message.container, current);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.previousSibling;\n\t\t\t\t}\n\t\t\t\tif (!current) flusher.container.insertBefore(message.container, lastItem);\n\t\t\t}\n\t\t} else {\n\t\t\tflusher.container.append(message.container);\n\t\t}\n\t} else {\n\t\tif (message.container) {\n\t\t\tif (flusher.states.slide) message.container.classList.add(\"flusher-animation-vertical\");\n\t\t\tflusher.container['insertBefore'](message.container, lastItem);\n\n\t\t} else {\n\t\t\tif (flusher.states.slide) message.classList.add(\"flusher-animation-vertical\");\n\t\t\tflusher.container['insertBefore'](message, lastItem);\n\t\t}\n\t}\n\n\twhile (flusher.container.children.length > flusher.props.maxRows) {\n\t\tconst oldest = flusher.container.lastChild;\n\t\tconst entryId = flusher.props.isAeroKick ? oldest.querySelector('button')?.getAttribute('data-radial-id') : oldest.getAttribute('data-chat-entry');\n\t\tif (entryId) {\n\t\t\tconst observer = flusher.props.messageObservers.get(entryId);\n\t\t\tif (observer) {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tflusher.props.messageObservers.delete(entryId);\n\t\t\t}\n\t\t}\n\n\t\tif (!flusher.states.spamState && entryId) {\n\t\t\tflusher.props.displayedMessages = flusher.props.displayedMessages.filter(message => message.id !== entryId);\n\t\t}\n\n\t\toldest.remove();\n\t}\n}\n\n\n\n","import { selectRow } from \"../layout/horizontal.js\";\nimport { appendVertical } from \"../layout/vertical.js\";\nimport { logToConsole } from \"../utils/utils.js\";\n\nexport function getMessageKey(key, value, messageId, flusher) {\n  const keyValue = key + \"-\" + value;\n  const dupe = flusher.props.displayedMessages.find((obj) => {\n    return obj.key === keyValue;\n  });\n  const ignore =\n    !flusher.states.spamState && dupe && flusher.lastRow > 1 ? true : false;\n  if (!ignore)\n    flusher.props.displayedMessages.push({ id: messageId, key: keyValue });\n  return { key: keyValue, ignore: ignore };\n}\n\nexport async function processMessageQueue(flusher) {\n  try {\n    if (flusher.props.isProcessingMessages) return;\n    flusher.props.isProcessingMessages = true;\n\n    let queueItem = flusher.props.messageQueue.shift();\n    if (!queueItem) {\n      flusher.props.isProcessingMessages = false;\n      return;\n    }\n\n    queueItem.chatroom_id = flusher.external ? queueItem?.chatroom_id : 0;\n\n    const lastRow = flusher.props.lastRow;\n    const maxRows = flusher.props.maxRows;\n\n    if (lastRow === null || lastRow >= maxRows) {\n      flusher.props.isProcessingMessages = false;\n      return;\n    }\n\n    const eventType = queueItem.event ?? queueItem.eventName;\n\n    if (\n      eventType === \"App\\\\Events\\\\ChatMessageEvent\" &&\n      flusher.props.external\n    ) {\n      createMessage(JSON.parse(queueItem.data), flusher);\n    } else if (queueItem.type === \"message\" && flusher.props.external) {\n      createMessage(queueItem, flusher);\n    } else if (eventType === \"App\\\\Events\\\\UserBannedEvent\") {\n      createUserBanMessage(JSON.parse(queueItem.data), flusher);\n    } else if (eventType === \"App\\\\Events\\\\GiftedSubscriptionsEvent\") {\n      createGiftedMessage(JSON.parse(queueItem.data), flusher);\n    } else if (eventType === \"App\\\\Events\\\\FollowersUpdated\") {\n      createFollowersMessage(JSON.parse(queueItem.data), flusher);\n    } else if (eventType === \"App\\\\Events\\\\StreamHostEvent\") {\n      createHostMessage(JSON.parse(queueItem.data), flusher);\n    } else if (eventType === \"App\\\\Events\\\\SubscriptionEvent\") {\n      createSubMessage(JSON.parse(queueItem.data), flusher);\n    } else {\n      flusher.props.isProcessingMessages = false;\n      processMessageQueue(flusher);\n    }\n  } catch (error) {\n    flusher.props.isProcessingMessages = false;\n    processMessageQueue(flusher);\n    console.error(error);\n  }\n}\n\nexport function processElementQueue(flusher) {\n  try {\n    if (flusher.props.isProcessingElements) return;\n    flusher.props.isProcessingElements = true;\n\n    const queueItem = flusher.props.elementQueue.shift();\n    if (!queueItem) {\n      flusher.props.isProcessingElements = false;\n      return;\n    }\n\n    const flushState = flusher.states.flushState;\n\n    if (!flusher.states.chatEnabled) {\n      flusher.props.isProcessingElements = false;\n      return;\n    }\n\n    flushState\n      ? selectRow(queueItem, flusher)\n      : appendVertical(queueItem, flusher);\n\n    if (flusher.props.isVod) {\n      const queueLength = flusher.props.elementQueue.length;\n      let wait = Math.trunc(3500 / queueLength);\n      if (queueLength < 3 && flusher.props.isVod && flusher.props.flushState)\n        wait = 500;\n      setTimeout(function () {\n        flusher.props.isProcessingElements = false;\n        processElementQueue(flusher);\n      }, wait);\n    } else {\n      flusher.props.isProcessingElements = false;\n      processElementQueue(flusher);\n    }\n  } catch (error) {\n    flusher.props.isProcessingElements = false;\n    processElementQueue(flusher);\n    console.error(error);\n  }\n}\n\nfunction appendMessage(queueItem, flusher) {\n  flusher.props.elementQueue.push(queueItem);\n  processElementQueue(flusher);\n  flusher.props.isProcessingMessages = false;\n  processMessageQueue(flusher);\n}\n\nasync function createMessage(message, flusher) {\n  const sender = message.sender;\n  const username = sender.username;\n  const content = message.content;\n\n  const reduced = !flusher.props.spamState\n    ? reduceRepeatedSentences(content)\n    : content;\n\n  if (!flusher.states.spamState) {\n    const messageKeyData = getMessageKey(\n      sender.id,\n      reduced,\n      message.id,\n      flusher\n    );\n    if (messageKeyData.ignore === true) {\n      flusher.props.isProcessingMessages = false;\n      processMessageQueue(flusher);\n      return;\n    }\n\n    message.key = messageKeyData.key;\n  }\n\n  const messageDiv = document.createElement(\"div\");\n  messageDiv.classList.add(\"flusher-message\");\n\n  const badgeSpan = document.createElement(\"span\");\n  badgeSpan.classList.add(\"flusher-badges\");\n\n  const badgeElements = await getBadges(message, flusher);\n  badgeElements.forEach((badgeElement) => {\n    badgeSpan.appendChild(badgeElement.cloneNode(true));\n  });\n\n  const usernameSpan = document.createElement(\"span\");\n  usernameSpan.style.color = sender.identity.color;\n  usernameSpan.classList.add(\"flusher-username\");\n  usernameSpan.textContent = username;\n\n  const boldSpan = document.createElement(\"span\");\n  boldSpan.classList.add(\"font-bold\", \"text-white\");\n  boldSpan.textContent = \": \";\n\n  const contentSpan = document.createElement(\"span\");\n  contentSpan.classList.add(\"flusher-content\");\n\n  const emoteRegex = /\\[emote:(\\d+):([\\w-]+)\\]/g;\n  let lastIndex = 0;\n  let match;\n\n  while ((match = emoteRegex.exec(reduced)) !== null) {\n    const textBeforeEmote = reduced.slice(lastIndex, match.index);\n    if (textBeforeEmote.trim() !== \"\") {\n      const textBeforeNode = document.createElement(\"span\");\n      textBeforeNode.textContent = textBeforeEmote;\n      textBeforeNode.classList.add(\"flusher-content-text\");\n      contentSpan.appendChild(textBeforeNode);\n    }\n\n    const img = document.createElement(\"img\");\n    const [, id, name] = match;\n    img.src = `https://files.kick.com/emotes/${id}/fullsize`;\n    img.alt = name;\n    img.classList.add(\"flusher-emote\");\n    contentSpan.appendChild(img);\n\n    lastIndex = emoteRegex.lastIndex;\n  }\n\n  const textAfterLastEmote = reduced.slice(lastIndex);\n  if (textAfterLastEmote.trim() !== \"\") {\n    const textAfterNode = document.createElement(\"span\");\n    textAfterNode.textContent = textAfterLastEmote;\n    textAfterNode.classList.add(\"flusher-content-text\");\n    contentSpan.appendChild(textAfterNode);\n  } else {\n    const lastChild = contentSpan.lastChild;\n    if (lastChild.tagName === \"IMG\") {\n      lastChild.className = \"last-flusher-emote\";\n    }\n  }\n\n  badgeSpan.firstChild ? messageDiv.append(badgeSpan) : null;\n  messageDiv.append(usernameSpan, boldSpan, contentSpan);\n  messageDiv.setAttribute(\"data-chat-entry\", message.id);\n  message.container = messageDiv;\n\n  appendMessage(message, flusher);\n\n  function reduceRepeatedSentences(input) {\n    const regexSentence = /(\\b.+?\\b)\\1+/g;\n    const sentence = input.replace(regexSentence, \"$1\");\n    const regexChar = /(.)(\\1{10,})/g;\n    return sentence.replace(regexChar, \"$1$1$1$1$1$1$1$1$1$1\");\n  }\n}\n\nasync function getBadges(data, flusher) {\n  const badges = data.sender.identity.badges || [];\n  let badgeArray = [];\n\n  if (badges.length === 0) return badgeArray;\n\n  for (const badge of badges) {\n    const cachedBadge = getBadgeImage(badge, flusher);\n    if (!cachedBadge) continue;\n    if (cachedBadge?.src) {\n      const badgeElement = document.createElement(\"img\");\n      badgeElement.src = cachedBadge.src;\n      badgeElement.alt = badge.type;\n      badgeElement.classList.add(\"flusher-badge\");\n      badgeArray.push(badgeElement);\n    } else {\n      cachedBadge.classList.add(\"flusher-badge\");\n      badgeArray.push(cachedBadge);\n    }\n  }\n\n  function getBadgeImage(badge, flusher) {\n    let badgeImage;\n    if (badge.type === \"subscriber\") {\n      const months = badge.count;\n      const correspondingBadge = findClosestBadge(months);\n      badgeImage = correspondingBadge\n        ? correspondingBadge\n        : flusher.badges[\"subscriber\"]?.cloneNode(true);\n    } else {\n      badgeImage = flusher.badges[badge.type]?.cloneNode(true) || null;\n    }\n\n    return badgeImage;\n  }\n\n  function findClosestBadge(months) {\n    return (\n      flusher.props.badgeCache.reduce((closest, currentBadge) => {\n        if (\n          currentBadge.months <= months &&\n          (!closest || currentBadge.months > closest.months)\n        ) {\n          return currentBadge;\n        }\n        return closest || flusher.badges[\"subscriber\"]?.cloneNode(true);\n      }, null)?.badge_image ||\n      flusher.props.badgeCache[flusher.props.badgeCache.length - 1]\n        ?.badge_image ||\n      flusher.badges[\"subscriber\"]?.cloneNode(true)\n    );\n  }\n\n  /* Enable when iframe chatroom available */\n\n  /* badges.forEach(badge => {\n    let badgeText = badge.text;\n    if (badge.count) {\n      badgeText = `${badge.type}-${badge.count}`;\n    }\n    const cachedBadge = flusher.props.badgeCache.find(badgeCache => badgeCache.type === badgeText);\n    if (cachedBadge) {\n      badgeArray.push(cachedBadge.html);\n      badgeCount++;\n      return;\n    }\n  }); */\n\n  /* let attempts = 0;\n  while (badgeCount !== badges.length && attempts < 10) {\n    const newBadges = checkForBadges(data, flusher);\n    badgeArray = newBadges;\n\n    badgeCount = badgeArray.length;\n    attempts++;\n\n    await new Promise(resolve => setTimeout(resolve, 750));\n  } */\n\n  return badgeArray;\n\n  function checkForBadges(data, flusher) {\n    const badges = data.sender.identity.badges || [];\n    const badgeElements = [];\n\n    flusher.props.isProcessingMessages = false;\n\n    let firstChatIdentity = document.querySelector(\n      `.chat-entry-username[data-chat-entry-user-id=\"${data.sender.id}\"]`\n    );\n    if (firstChatIdentity !== null) {\n      let identity = firstChatIdentity.closest(\".chat-message-identity\");\n      identity\n        .querySelectorAll(\"div.badge-tooltip\")\n        .forEach(function (baseBadge, index) {\n          let badge = badges[index];\n          if (badge === undefined) return;\n          let badgeText = badge.text;\n\n          if (badge.count) {\n            badgeText = `${badge.type}-${badge.count}`;\n          }\n\n          const cachedBadge = flusher.props.badgeCache.find(\n            (badgeCache) => badgeCache.type === badgeText\n          );\n          if (cachedBadge) {\n            props.badgeElements.push(cachedBadge.html);\n            return;\n          }\n\n          const imgElement = baseBadge.querySelector(`img`);\n          if (imgElement) {\n            const imgUrl = imgElement.src;\n            const newImg = document.createElement(\"img\");\n            newImg.src = imgUrl;\n            newImg.classList.add(\"flusher-badge\");\n            flusher.props.badgeCache.push({\n              type: badgeText,\n              html: newImg,\n            });\n\n            badgeElements.push(newImg);\n            return;\n          }\n\n          const svgElement = baseBadge.querySelector(\"svg\");\n          if (svgElement) {\n            const svgCopy = svgElement.cloneNode(true);\n            svgCopy.classList.add(\"flusher-badge\");\n\n            flusher.props.badgeCache.push({\n              type: badgeText,\n              html: svgCopy,\n            });\n\n            badgeElements.push(svgCopy);\n            return;\n          }\n\n          console.warn(\"badge not found: \" + badgeText);\n        });\n    }\n\n    return badgeElements;\n  }\n}\n\nexport function createUserBanMessage(data, flusher) {\n  /* logToConsole(\"createUserBanMessage\") */;\n\n  const bannedUser = data.user.username;\n  const bannedByUser = data.banned_by.username;\n\n  const banMessageContent = document.createElement(\"div\");\n  banMessageContent.classList.add(\"flusher-message\", \"flusher-red\");\n\n  const banMessageSpan = document.createElement(\"span\");\n\n  let logText;\n\n  if (data.expires_at) {\n    const expiresAt = new Date(data.expires_at);\n    const timeDifference = expiresAt - new Date();\n\n    let timeDiffText;\n    if (timeDifference > 0) {\n      timeDiffText = humanizeDuration(timeDifference + 5000);\n      const userId = data.user.id;\n      addBannedUser(bannedUser, bannedByUser, userId, expiresAt);\n\n      logText = `${bannedUser} banned for ${timeDiffText} by ${bannedByUser}`;\n      const expiresText = document.createTextNode(logText);\n      banMessageSpan.appendChild(expiresText);\n    } else {\n      logText = `${bannedUser} permanently banned by ${bannedByUser}`;\n      const expiresText = document.createTextNode(logText);\n      banMessageSpan.appendChild(expiresText);\n    }\n\n  } else {\n    logText = `${bannedUser} permanently banned by ${bannedByUser}`;\n    const expiresText = document.createTextNode(logText);\n    banMessageSpan.appendChild(expiresText);\n  }\n\n  banMessageContent.appendChild(banMessageSpan);\n\n  data.created_at = Date.now();\n  data.container = banMessageContent;\n\n  logToConsole(logText);\n\n  appendMessage(data, flusher);\n\n  function addBannedUser(bannedUser, bannedByUser, userId, expiresAt) {\n    const existingUserIndex = flusher.props.bannedUsers.findIndex(user => user.username === bannedUser);\n    if (existingUserIndex !== -1) {\n      flusher.props.bannedUsers[existingUserIndex] = {\n        id: userId,\n        username: bannedUser,\n        bannedBy: bannedByUser,\n        expiresAt: expiresAt\n      };\n    } else {\n      flusher.props.bannedUsers.push({\n        id: userId,\n        username: bannedUser,\n        bannedBy: bannedByUser,\n        expiresAt: expiresAt\n      });\n      const now = new Date().getTime();\n      const expirationTime = new Date(expiresAt).getTime();\n      const timeUntilExpiration = expirationTime - now;\n      flusher.props.timeoutIds.push(setTimeout(() => removeBannedUser(bannedUser), timeUntilExpiration));\n    }\n  }\n\n  function removeBannedUser(username) {\n    const index = flusher.props.bannedUsers.findIndex(user => user.username === username);\n    if (index !== -1) {\n      const currentUser = flusher.props.bannedUsers[index];\n      const currentTime = new Date().getTime();\n\n      if ((currentTime + 5000) >= new Date(currentUser.expiresAt).getTime()) {\n        flusher.props.bannedUsers.splice(index, 1);\n\n        const unbanMessageContent = document.createElement(\"div\");\n        unbanMessageContent.classList.add(\"flusher-message\", \"flusher-green\");\n\n        const unbanMessageSpan = document.createElement(\"span\");\n\n        let logText;\n\n        logText = `${username}'s ban expired`;\n        const unbanText = document.createTextNode(logText);\n        unbanMessageSpan.appendChild(unbanText);\n\n        unbanMessageContent.appendChild(unbanMessageSpan);\n\n        data.created_at = Date.now();\n        data.container = unbanMessageContent;\n\n        logToConsole(logText);\n\n        appendMessage(data, flusher);\n      }\n    }\n  }\n\n  function humanizeDuration(milliseconds) {\n    const seconds = Math.floor(milliseconds / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n    const weeks = Math.floor(days / 7);\n    const months = Math.floor(days / 30);\n    const years = Math.floor(days / 365);\n\n    if (years > 0) {\n      return years === 1 ? \"1 year\" : `${years} years`;\n    } else if (months > 0) {\n      return months === 1 ? \"1 month\" : `${months} months`;\n    } else if (weeks > 0) {\n      return weeks === 1 ? \"1 week\" : `${weeks} weeks`;\n    } else if (days > 0) {\n      return days === 1 ? \"1 day\" : `${days} days`;\n    } else if (hours > 0) {\n      return hours === 1 ? \"1 hour\" : `${hours} hours`;\n    } else if (minutes > 0) {\n      return minutes === 1 ? \"1 minute\" : `${minutes} minutes`;\n    } else {\n      return seconds === 1 ? \"1 second\" : `${seconds} seconds`;\n    }\n  }\n}\n\nfunction createSubMessage(data, flusher) {\n  /* logToConsole(`createSubMessage`); */\n\n  if (!flusher.states.flushState && !flusher.props.external) return;\n\n  const username = data.username;\n  const months = data.months;\n\n  const subscriptionMessageContent = document.createElement(\"div\");\n  subscriptionMessageContent.classList.add(\"flusher-message\", \"flusher-green\");\n\n  const emojiSpan = document.createElement(\"span\");\n  emojiSpan.textContent = String.fromCodePoint(0x1f389) + \" \";\n\n  const subscriptionMessageSpan = document.createElement(\"span\");\n  subscriptionMessageSpan.style.color = \"#00FF00\";\n  subscriptionMessageSpan.textContent = `${months > 1 ? months + \" months\" : \"1 month\"} subscription by ${username}`;\n\n  const subSpan = document.createElement(\"span\");\n  subSpan.style.color = \"#00FF00\";\n\n  subSpan.append(emojiSpan, subscriptionMessageSpan);\n\n  subscriptionMessageContent.append(subSpan);\n\n  data.created_at = Date.now();\n  data.container = subscriptionMessageContent;\n\n  appendMessage(data, flusher);\n}\n\nfunction createHostMessage(data, flusher) {\n  /* logToConsole(`createHostMessage`); */\n\n  const hostUsername = data.host_username;\n  const viewersCount = data.number_viewers;\n\n  const hostMessageContent = document.createElement(\"div\");\n  hostMessageContent.classList.add(\"flusher-message\", \"flusher-green\");\n\n  const emojiSpan = document.createElement(\"span\");\n  emojiSpan.textContent = String.fromCodePoint(0x1f389) + \" \";\n\n  const viewersCountSpan = document.createElement(\"span\");\n  viewersCountSpan.textContent =\n    `${viewersCount > 1 ? viewersCount + \" viewers\" : \"1 viewer\"} hosted by ` +\n    hostUsername;\n\n  const hostMessageSpan = document.createElement(\"span\");\n  hostMessageSpan.style.color = \"#00FF00\";\n\n  hostMessageSpan.append(emojiSpan, viewersCountSpan);\n\n  hostMessageContent.appendChild(hostMessageSpan);\n\n  data.created_at = Date.now();\n  data.container = hostMessageContent;\n\n  appendMessage(data, flusher);\n}\n\nfunction createGiftedMessage(data, flusher) {\n  if (!flusher.states.flushState && !flusher.props.external) {\n    flusher.props.isProcessingMessages = false;\n    processMessageQueue(flusher);\n    return;\n  }\n\n  /* logToConsole(`createGiftedMessage`); */\n\n  const gifterUsername = data.gifter_username;\n  const giftedUsernames = data.gifted_usernames;\n\n  const giftedContent = document.createElement(\"div\");\n  giftedContent.classList.add(\"flusher-message\", \"flusher-green\");\n\n  const emojiSpan = document.createElement(\"span\");\n  emojiSpan.textContent = String.fromCodePoint(0x1f389) + \" \";\n\n  const gifterUsernameSpan = document.createElement(\"span\");\n  gifterUsernameSpan.textContent =\n    `${giftedUsernames.length > 1\n      ? giftedUsernames.length + \" Subscriptions\"\n      : \"1 Subscription\"\n    } gifted by ` + gifterUsername;\n  const giftedSpan = document.createElement(\"span\");\n  giftedSpan.style.color = \"#00FF00\";\n\n  giftedSpan.append(emojiSpan, gifterUsernameSpan);\n\n  giftedContent.appendChild(giftedSpan);\n\n  data.created_at = Date.now();\n  data.container = giftedContent;\n\n  appendMessage(data, flusher);\n}\n\nfunction createFollowersMessage(data, flusher) {\n  /* logToConsole(`createFollowersMessage`); */\n\n  const followersCount = data.followersCount;\n\n  const followersDiff = followersCount - (flusher.props.lastFollowersCount ?? followersCount);\n  if (followersDiff === 0) {\n    flusher.props.lastFollowersCount = followersCount ?? null;\n    flusher.props.isProcessingMessages = false;\n    processMessageQueue(flusher);\n    return;\n  }\n\n  const messageContent = document.createElement(\"div\");\n  messageContent.classList.add(\"flusher-message\");\n\n  const followersMessageSpan = document.createElement(\"span\");\n  followersMessageSpan.textContent = `${followersDiff > 1 ? followersDiff + \" new followers\" : \"1 new follower\"}`;\n\n  messageContent.append(followersMessageSpan);\n\n  data.created_at = Date.now();\n  data.container = messageContent;\n\n  appendMessage(data, flusher);\n\n  flusher.props.lastFollowersCount = followersCount;\n}","import { Flusher } from '../flusher/flusher.js';\nimport { createChat } from '../interface/overlay.js';\nimport { logToConsole } from '../utils/utils.js';\n\nclass Ip2 {\n\n\tstatic async init() {\n\t\tlogToConsole(`Initialize`)\n\n\t\tconst targetNode = await waitForCondition(() => document.getElementById('streamViewerContainer'));\n\t\tlogToConsole(`Container found`)\n\n\t\tconst callback = async function (mutationsList, observer) {\n\t\t\tfor (const mutation of mutationsList) {\n\t\t\t\tif (mutation.type === 'childList') {\n\t\t\t\t\tif (mutation.addedNodes.length > 0) {\n\t\t\t\t\t\tfor (const node of mutation.addedNodes) {\n\t\t\t\t\t\t\tif (targetNode.contains(node) && node.parentElement === targetNode) {\n\t\t\t\t\t\t\t\tif (node.id && !node.id.includes('-chat-') && node.id.includes('-video-')) {\n\t\t\t\t\t\t\t\t\tconst hasFlusherAttribute = node.hasAttribute('flusher');\n\t\t\t\t\t\t\t\t\tif (hasFlusherAttribute) return;\n\t\t\t\t\t\t\t\t\tconst iframe = await waitForCondition(() => node.querySelector('iframe'));\n\t\t\t\t\t\t\t\t\tlogToConsole(`New video found`)\n\t\t\t\t\t\t\t\t\tnode.setAttribute('flusher', '');\n\t\t\t\t\t\t\t\t\tcreateChannel(iframe);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst observer = new MutationObserver(callback);\n\t\tconst config = { childList: true, subtree: false };\n\t\tobserver.observe(targetNode, config);\n\n\t\tfunction createChannel(iframe) {\n\t\t\tconst src = iframe.getAttribute('src');\n\t\t\tif (src && src.includes('kick.com')) {\n\t\t\t\tconst channelName = new URL(src).pathname.slice(1);\n\t\t\t\tlogToConsole(`Fetch Channel Data`)\n\t\t\t\tconst flusher = new Flusher(iframe, \"IP2\", channelName);\n\t\t\t\tcreateChat(flusher);\n\t\t\t}\n\t\t}\n\n\t\tfunction waitForCondition(conditionCallback) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst checkCondition = () => {\n\t\t\t\t\tconst result = conditionCallback();\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(checkCondition, 500);\n\t\t\t\t};\n\n\t\t\t\tcheckCondition();\n\t\t\t});\n\t\t}\n\n\t\t/* try { \n\t\t\tconst chatFrame = document.createElement('iframe');\n\t\t\tchatFrame.src = 'https://kick.com/USERNAME/chatroom';\n\t\t\tdocument.body.append(chatFrame);\n\t\t\tconst elementText = chatFrame.$eval('body', (element) => {\n\t\t\t\treturn element.textContent;\n\t\t\t});\n\t\t\tlogToConsole('Element Text inside iframe:', elementText);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error:', error);\n\t\t} */\n\t}\n}\n\nexport default Ip2;","import { Flusher } from '../flusher/flusher.js';\nimport { createChat } from '../interface/overlay.js';\nimport { logToConsole } from '../utils/utils.js';\n\nclass Kick {\n  static init() {\n    /* logToConsole(`Initialize`); */\n\n    let stopObserver = false;\n\n    const observeVideo = () => {\n      const videoObserver = new MutationObserver(() => {\n        let video = document.getElementsByTagName('video');\n        video = video[video.length - 1];\n\n        if (video) {\n          /* logToConsole(`KICK video found`); */\n          videoObserver.disconnect();\n\n          setTimeout(() => {\n            let video = document.getElementsByTagName('video');\n            video = video[video.length - 1];\n\n            let channelName = document.querySelector(\".stream-username\");\n\n            if (channelName && video) {\n              channelName = channelName.innerText.trim();\n              const AeroKick = video.classList.contains('bk-aspect-video');\n              if (AeroKick) logToConsole(`AeroKick Detected`);\n              const flusher = new Flusher(video, \"KICK\", channelName, AeroKick);\n              try {\n                createChat(flusher);\n                return;\n              } catch (error) {\n                logToConsole(`Failed to create chat`);\n              }\n            }\n\n            /* logToConsole(`KICK start video observer`); */\n\n            const observer = new MutationObserver((mutations) => {\n              mutations.forEach((mutation) => {\n                if (!stopObserver && mutation.addedNodes) {\n                  if (document.querySelector(\".stream-username\")) {\n                    let video = document.getElementsByTagName('video');\n                    video = video[video.length - 1];\n                    if (video) {\n                      /* logToConsole(`KICK stop video observer`); */\n                      stopObserver = true;\n                      const channelName = document.querySelector(\".stream-username\").innerText.trim()\n                      const AeroKick = video.classList.contains('bk-aspect-video');\n                      if (AeroKick) logToConsole(`AeroKick Detected`);\n                      const flusher = new Flusher(video, \"KICK\", channelName, AeroKick);\n                      try {\n                        createChat(flusher);\n                      } catch (error) {\n                        stopObserver = false;\n                        logToConsole(`Failed to create chat`);\n                      }\n\n                      if (stopObserver) observer.disconnect();\n                    }\n                  }\n                }\n              });\n            });\n\n            observer.observe(document.body, {\n              childList: true,\n              subtree: true\n            });\n          }, 1000);\n        }\n      });\n\n      videoObserver.observe(document.body, {\n        childList: true,\n        subtree: true\n      });\n    };\n\n    observeVideo();\n  }\n}\n\nexport default Kick;","class Badges {\n\n   broadcasterSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\">\n   <g id=\"Badge_Chat_host\"><linearGradient id=\"badge-host-gradient-1\" gradientUnits=\"userSpaceOnUse\" x1=\"4\" y1=\"180.5864\" x2=\"4\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><rect x=\"3.2\" y=\"9.6\" style=\"fill:url(#badge-host-gradient-1);\" width=\"1.6\" height=\"1.6\"></rect><linearGradient id=\"badge-host-gradient-2\" gradientUnits=\"userSpaceOnUse\" x1=\"8\" y1=\"180.5864\" x2=\"8\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><polygon style=\"fill:url(#badge-host-gradient-2);\" points=\"6.4,9.6 9.6,9.6 9.6,8 11.2,8 \n\t\t11.2,1.6 9.6,1.6 9.6,0 6.4,0 6.4,1.6 4.8,1.6 4.8,8 6.4,8 \t\"></polygon><linearGradient id=\"badge-host-gradient-3\" gradientUnits=\"userSpaceOnUse\" x1=\"2.4\" y1=\"180.5864\" x2=\"2.4\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><rect x=\"1.6\" y=\"6.4\" style=\"fill:url(#badge-host-gradient-3);\" width=\"1.6\" height=\"3.2\"></rect><linearGradient id=\"badge-host-gradient-4\" gradientUnits=\"userSpaceOnUse\" x1=\"12\" y1=\"180.5864\" x2=\"12\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><rect x=\"11.2\" y=\"9.6\" style=\"fill:url(#badge-host-gradient-4);\" width=\"1.6\" height=\"1.6\"></rect><linearGradient id=\"badge-host-gradient-5\" gradientUnits=\"userSpaceOnUse\" x1=\"8\" y1=\"180.5864\" x2=\"8\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><polygon style=\"fill:url(#badge-host-gradient-5);\" points=\"4.8,12.8 6.4,12.8 6.4,14.4 \n\t\t4.8,14.4 4.8,16 11.2,16 11.2,14.4 9.6,14.4 9.6,12.8 11.2,12.8 11.2,11.2 4.8,11.2 \t\"></polygon><linearGradient id=\"badge-host-gradient-6\" gradientUnits=\"userSpaceOnUse\" x1=\"13.6\" y1=\"180.5864\" x2=\"13.6\" y2=\"200.6666\" gradientTransform=\"matrix(1 0 0 1 0 -182)\"><stop offset=\"0\" style=\"stop-color:#FF1CD2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#B20DFF;\"></stop></linearGradient><rect x=\"12.8\" y=\"6.4\" style=\"fill:url(#badge-host-gradient-6);\" width=\"1.6\" height=\"3.2\"></rect></g>\n</svg>`;\n\n   founderSVG = `<svg version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\"><linearGradient id=\"badge-founder-gradient\" gradientUnits=\"userSpaceOnUse\" x1=\"7.874\" y1=\"20.2333\" x2=\"8.1274\" y2=\"-0.3467\" gradientTransform=\"matrix(1 0 0 -1 0 18)\"><stop offset=\"0\" style=\"stop-color: rgb(255, 201, 0);\"></stop><stop offset=\"0.99\" style=\"stop-color: rgb(255, 149, 0);\"></stop></linearGradient><path d=\"\nM14.6,4V2.7h-1.3V1.4H12V0H4v1.4H2.7v1.3H1.3V4H0v8h1.3v1.3h1.4v1.3H4V16h8v-1.4h1.3v-1.3h1.3V12H16V4H14.6z M9.9,12.9H6.7V6.4H4.5\nV5.2h1V4.1h1v-1h3.4V12.9z\" style=\"fill-rule: evenodd; clip-rule: evenodd; fill: url(&quot;#badge-founder-gradient&quot;);\"></path></svg>`;\n\n   moderatorSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\">\n   <path d=\"M11.7,1.3v1.5h-1.5v1.5 H8.7v1.5H7.3v1.5H5.8V5.8h-3v3h1.5v1.5H2.8v1.5H1.3v3h3v-1.5h1.5v-1.5h1.5v1.5h3v-3H8.7V8.7h1.5V7.3h1.5V5.8h1.5V4.3h1.5v-3 C14.7,1.3,11.7,1.3,11.7,1.3z\" style=\"fill: #00C7FF\"></path>\n</svg>`;\n\n   ogSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\">\n   <g>\n      <linearGradient id=\"badge-og-gradient-1\" gradientUnits=\"userSpaceOnUse\" x1=\"12.2\" y1=\"-180\" x2=\"12.2\" y2=\"-165.2556\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#00FFF2;\"></stop><stop offset=\"0.99\" style=\"stop-color:#006399;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-og-gradient-1);\" d=\"M16,16H9.2v-0.8H8.4v-8h0.8V6.4H16v3.2h-4.5v4.8H13v-1.6h-0.8v-1.6H16V16z\"></path>\n      <linearGradient id=\"badge-og-gradient-2\" gradientUnits=\"userSpaceOnUse\" x1=\"3.7636\" y1=\"-164.265\" x2=\"4.0623\" y2=\"-179.9352\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#00FFF2;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#006399;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-og-gradient-2);\" d=\"M6.8,8.8v0.8h-6V8.8H0v-8h0.8V0h6.1v0.8 h0.8v8H6.8z M4.5,6.4V1.6H3v4.8H4.5z\"></path>\n      <path style=\"fill:#00FFF2;\" d=\"M6.8,15.2V16h-6v-0.8H0V8.8h0.8V8h6.1v0.8h0.8v6.4C7.7,15.2,6.8,15.2,6.8,15.2z M4.5,14.4V9.6H3v4.8 C3,14.4,4.5,14.4,4.5,14.4z\"></path>\n      <path style=\"fill:#00FFF2;\" d=\"M16,8H9.2V7.2H8.4V0.8h0.8V0H16v1.6h-4.5v4.8H13V4.8h-0.8V3.2H16V8z\"></path>\n   </g>\n</svg>`;\n\n   staffSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M2.07324 1.33331H6.51991V4.29331H7.99991V2.81331H9.47991V1.33331H13.9266V5.77998H12.4466V7.25998H10.9599V8.73998H12.4466V10.22H13.9266V14.6666H9.47991V13.1866H7.99991V11.7066H6.51991V14.6666H2.07324V1.33331Z\" fill=\"url(#badge-verified-gradient)\"></path>\n   <defs>\n      <linearGradient id=\"badge-verified-gradient\" x1=\"33.791%\" y1=\"97.416%\" x2=\"65.541%\" y2=\"4.5%\" gradientUnits=\"objectBoundingBox\">\n         <stop stop-color=\"#1EFF00\"></stop>\n         <stop offset=\"0.99\" stop-color=\"#00FF8C\"></stop>\n      </linearGradient>\n   </defs>\n</svg>`;\n\n   subGifter1SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <g clip-path=\"url(#clip0_301_17810)\">\n      <path d=\"M7.99999 9.14999V6.62499L0.484985 3.35999V6.34499L1.15499 6.63499V12.73L7.99999 15.995V9.14999Z\" fill=\"#0269D4\"></path>\n      <path d=\"M8.00003 10.735V9.61501L1.15503 6.63501V7.70501L8.00003 10.735Z\" fill=\"#0269D4\"></path>\n      <path d=\"M15.515 3.355V6.345L14.85 6.64V12.73L12.705 13.755L11.185 14.48L8.00499 15.995V6.715L4.81999 5.295H4.81499L3.29499 4.61L0.484985 3.355L3.66999 1.935L3.67999 1.93L5.09499 1.3L8.00499 0L10.905 1.3L12.32 1.925L12.33 1.935L15.515 3.355Z\" fill=\"#04D0FF\"></path>\n      <path d=\"M14.845 6.63501V7.70501L8 10.735V9.61501L14.845 6.63501Z\" fill=\"#0269D4\"></path>\n   </g>\n   <defs>\n      <clipPath id=\"clip0_301_17810\">\n         <rect width=\"16\" height=\"16\" fill=\"white\"></rect>\n      </clipPath>\n   </defs>\n</svg>`;\n\n   subGufter2SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <g clip-path=\"url(#clip0_301_17825)\"><path d=\"M7.99999 9.14999V6.62499L0.484985 3.35999V6.34499L1.14999 6.63999V12.73L7.99999 16V9.14999Z\" fill=\"#FF5008\"></path>\n      <path d=\"M8.00002 10.74V9.61501L1.15002 6.64001V7.71001L8.00002 10.74Z\" fill=\"#FF5008\"></path>\n      <path d=\"M15.515 3.355V6.345L14.85 6.64V12.73L12.705 13.755L11.185 14.48L8.00499 15.995V6.715L4.81999 5.295H4.81499L3.29499 4.61L0.484985 3.355L3.66999 1.935L3.67999 1.93L5.09499 1.3L8.00499 0L10.905 1.3L12.32 1.925L12.33 1.935L15.515 3.355Z\" fill=\"#FFC800\"></path>\n      <path d=\"M14.85 6.64001V7.71001L8 10.74V9.61501L14.85 6.64001Z\" fill=\"#FF5008\"></path>\n   </g>\n   <defs>\n      <clipPath id=\"clip0_301_17825\">\n         <rect width=\"16\" height=\"16\" fill=\"white\"></rect>\n      </clipPath>\n   </defs>\n</svg>`;\n\n   subscriberSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <g>\n      <linearGradient id=\"badge-subscriber-gradient-1\" gradientUnits=\"userSpaceOnUse\" x1=\"-2.386\" y1=\"-151.2764\" x2=\"42.2073\" y2=\"-240.4697\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-1);\" d=\"M14.8,7.3V6.1h-2.4V4.9H11V3.7H9.9V1.2H8.7V0H7.3v1.2H6.1v2.5H5v1.2H3.7v1.3H1.2v1.2H0v1.4 h1.2V10h2.4v1.3H5v1.2h1.2V15h1.2v1h1.3v-1.2h1.2v-2.5H11v-1.2h1.3V9.9h2.4V8.7H16V7.3H14.8z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-2\" gradientUnits=\"userSpaceOnUse\" x1=\"-5.3836\" y1=\"-158.3055\" x2=\"14.9276\" y2=\"-189.0962\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-2);\" d=\"M7.3,7.3v7.5H6.1v-2.5H5v-1.2H3.7V9.9H1.2 V8.7H0V7.3H7.3z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-3\" gradientUnits=\"userSpaceOnUse\" x1=\"3.65\" y1=\"-160.7004\" x2=\"3.65\" y2=\"-184.1244\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-3);\" d=\"M7.3,7.3v7.5H6.1v-2.5H5v-1.2H3.7V9.9H1.2 V8.7H0V7.3H7.3z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-4\" gradientUnits=\"userSpaceOnUse\" x1=\"22.9659\" y1=\"-167.65\" x2=\"-5.3142\" y2=\"-167.65\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-4);\" d=\"M8.7,0v7.3H1.2V6.1h2.4V4.9H5V3.7h1.2V1.2 h1.2V0H8.7z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-5\" gradientUnits=\"userSpaceOnUse\" x1=\"12.35\" y1=\"-187.6089\" x2=\"12.35\" y2=\"-161.5965\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-5);\" d=\"M8.7,8.7V1.2h1.2v2.5H11v1.2h1.3v1.3h2.4 v1.2H16v1.4L8.7,8.7L8.7,8.7z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-6\" gradientUnits=\"userSpaceOnUse\" x1=\"-6.5494\" y1=\"-176.35\" x2=\"21.3285\" y2=\"-176.35\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-6);\" d=\"M7.3,16V8.7h7.4v1.2h-2.4v1.3H11v1.2H9.9 v2.5H8.7V16H7.3z\"></path>\n      <linearGradient id=\"badge-subscriber-gradient-7\" gradientUnits=\"userSpaceOnUse\" x1=\"6.72\" y1=\"-169.44\" x2=\"12.2267\" y2=\"-180.4533\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n         <stop offset=\"0\" style=\"stop-color:#E1FF00;\"></stop>\n         <stop offset=\"0.99\" style=\"stop-color:#2AA300;\"></stop>\n      </linearGradient>\n      <path style=\"fill:url(#badge-subscriber-gradient-7);\" d=\"M8.7,7.3H7.3v1.4h1.3L8.7,7.3L8.7,7.3z\"></path>\n   </g>\n</svg>`;\n\n   verifiedSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n   <path d=\"M14.72 7.00003V6.01336H15.64V4.12003H14.6733V3.16003H9.97332V1.2667H8.96665V0.280029H7.03332V1.2667H6.03332V3.16003H1.32665V4.12003H0.359985V6.01336H1.28665V7.00003H2.23332V9.0067H1.28665V9.99336H0.359985V11.8867H1.32665V12.8467H6.03332V14.74H7.03332V15.7267H8.96665V14.74H9.97332V12.8467H14.6733V11.8867H15.64V9.99336H14.72V9.0067H13.7733V7.00003H14.72ZM12.5 6.59336H11.44V7.66003H10.3733V8.72003H9.31332V9.7867H8.24665V10.8467L7.09332 10.9V11.8H6.02665V10.8467H5.05999V9.7867H3.99332V7.66003H6.11999V8.72003H7.18665V7.66003H8.24665V6.59336H9.31332V5.53336H10.3733V4.4667H12.5V6.59336Z\" fill=\"url(#badge-verified-gradient)\"></path>\n   <defs>\n      <linearGradient id=\"badge-verified-gradient\" x1=\"25.333%\" y1=\"99.375%\" x2=\"73.541%\" y2=\"2.917%\" gradientUnits=\"objectBoundingBox\">\n         <stop stop-color=\"#1EFF00\"></stop>\n         <stop offset=\"0.99\" stop-color=\"#00FF8C\"></stop>\n      </linearGradient>\n   </defs>\n</svg>`;\n\n   vipSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" space=\"preserve\" width=\"16\" height=\"16\">\n   <linearGradient id=\"badge-vip-gradient\" gradientUnits=\"userSpaceOnUse\" x1=\"8\" y1=\"-163.4867\" x2=\"8\" y2=\"-181.56\" gradientTransform=\"matrix(1 0 0 -1 0 -164)\">\n      <stop offset=\"0\" style=\"stop-color: rgb(255, 201, 0);\"></stop>\n      <stop offset=\"0.99\" style=\"stop-color: rgb(255, 149, 0);\"></stop>\n   </linearGradient>\n   <path d=\"M13.9,2.4v1.1h-1.2v2.3 h-1.1v1.1h-1.1V4.6H9.3V1.3H6.7v3.3H5.6v2.3H4.4V5.8H3.3V3.5H2.1V2.4H0v12.3h16V2.4H13.9z\" style=\"fill: url(&quot;#badge-vip-gradient&quot;);\"></path>\n</svg>`;\n\n   parseSVGStringToElement(svgString) {\n      const parser = new DOMParser();\n      const xmlDoc = parser.parseFromString(svgString, \"image/svg+xml\");\n      return xmlDoc.documentElement;\n   }\n\n   badgeTypeToSVG = {\n      subscriber: this.parseSVGStringToElement(this.subscriberSVG),\n      founder: this.parseSVGStringToElement(this.founderSVG),\n      broadcaster: this.parseSVGStringToElement(this.broadcasterSVG),\n      moderator: this.parseSVGStringToElement(this.moderatorSVG),\n      og: this.parseSVGStringToElement(this.ogSVG),\n      staff: this.parseSVGStringToElement(this.staffSVG),\n      sub_gifter: this.parseSVGStringToElement(this.subGifter1SVG),\n      sub_gifter_1: this.parseSVGStringToElement(this.subGifter2SVG),\n      verified: this.parseSVGStringToElement(this.verifiedSVG),\n      vip: this.parseSVGStringToElement(this.vipSVG),\n   };\n}\n\nexport default Badges;\n\n","export function dragElement(flusher) {\n\tvar pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n\n\tflusher.container.onmousedown = function (e) {\n\t\te = e || window.event;\n\t\te.preventDefault();\n\n\t\tsetPosition(flusher, true);\n\n\t\tif (isInResizeHandle(e)) {\n\t\t\tpos3 = e.clientX;\n\t\t\tpos4 = e.clientY;\n\t\t\tdocument.onmouseup = closeResize;\n\t\t\tdocument.onmousemove = resizeElement;\n\t\t} else {\n\t\t\tpos3 = e.clientX;\n\t\t\tpos4 = e.clientY;\n\t\t\tdocument.onmouseup = closeDragElement;\n\t\t\tdocument.onmousemove = dragElement;\n\t\t}\n\t};\n\n\tfunction dragElement(e) {\n\t\te = e || window.event;\n\t\te.preventDefault();\n\t\tpos1 = pos3 - e.clientX;\n\t\tpos2 = pos4 - e.clientY;\n\t\tpos3 = e.clientX;\n\t\tpos4 = e.clientY;\n\n\t\tflusher.container.style.top = (flusher.container.offsetTop - pos2) + \"px\";\n\t\tflusher.container.style.left = (flusher.container.offsetLeft - pos1) + \"px\";\n\t}\n\n\tfunction resizeElement(e) {\n\t\te = e || window.event;\n\t\te.preventDefault();\n\t\tflusher.container.style.width = (flusher.container.offsetWidth - (pos3 - e.clientX)) + \"px\";\n\t\tflusher.container.style.height = (flusher.container.offsetHeight - (pos4 - e.clientY)) + \"px\";\n\t\tpos3 = e.clientX;\n\t\tpos4 = e.clientY;\n\t}\n\n\tfunction closeDragElement() {\n\t\tdocument.onmouseup = null;\n\t\tdocument.onmousemove = null;\n\t\tsetPosition(flusher, false);\n\t}\n\n\tfunction closeResize() {\n\t\tdocument.onmouseup = null;\n\t\tdocument.onmousemove = null;\n\t\tsetPosition(flusher, false);\n\t}\n\n\tasync function setPosition(flusher, event) {\n\t\tvar scaleFactor = window.innerWidth / window.outerWidth;\n\t\tvar rect = flusher.container.getBoundingClientRect();\n\t\tvar rectVideo = flusher.video.getBoundingClientRect();\n\n\t\tvar newPosition = {\n\t\t\ttop: Math.round(rect.top - rectVideo.top) / scaleFactor,\n\t\t\tleft: Math.round(rect.left - rectVideo.left) / scaleFactor,\n\t\t\twidth: Math.round(rect.width) / scaleFactor,\n\t\t\theight: Math.round(rect.height) / scaleFactor\n\t\t};\n\n\t\tconsole.log(newPosition);\n\n\t\tif (event) {\n\t\t\tflusher.container.style.top = Math.round(newPosition.top * scaleFactor) + \"px\";\n\t\t\tflusher.container.style.left = Math.round(newPosition.left * scaleFactor) + \"px\";\n\t\t\tflusher.container.removeAttribute(\"position\");\n\n\t\t\tflusher.container.style.width = Math.round(newPosition.width * scaleFactor) + \"px\";\n\t\t\tflusher.container.style.height = Math.round(newPosition.height * scaleFactor) + \"px\";\n\t\t\tflusher.container.removeAttribute(\"size\");\n\t\t}\n\n\t\tchrome.storage.local.get(\"positionsPerChannel\", function (result) {\n\t\t\tvar positionsPerChannel = result.positionsPerChannel || {};\n\t\t\tvar positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n\t\t\tvar existingPositionIndex = positionsArray.findIndex(function (item) {\n\t\t\t\treturn item.videoSize === flusher.props.videoSize;\n\t\t\t});\n\n\t\t\tif (existingPositionIndex !== -1) {\n\t\t\t\tpositionsArray[existingPositionIndex].position.top = newPosition.top;\n\t\t\t\tpositionsArray[existingPositionIndex].position.left = newPosition.left;\n\t\t\t\tpositionsArray[existingPositionIndex].position.width = newPosition.width;\n\t\t\t\tpositionsArray[existingPositionIndex].position.height = newPosition.height;\n\t\t\t} else {\n\t\t\t\tpositionsArray.push({\n\t\t\t\t\tvideoSize: flusher.props.videoSize,\n\t\t\t\t\tposition: {\n\t\t\t\t\t\ttop: newPosition.top,\n\t\t\t\t\t\tleft: newPosition.left,\n\t\t\t\t\t\twidth: newPosition.width,\n\t\t\t\t\t\theight: newPosition.height\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tpositionsPerChannel[flusher.props.channelName] = positionsArray;\n\n\t\t\tchrome.storage.local.set({ \"positionsPerChannel\": positionsPerChannel }, function () {\n\t\t\t\t/* console.log(\"positionsPerChannel:\", positionsPerChannel); */\n\t\t\t});\n\t\t});\n\n\t}\n\n\tfunction isInResizeHandle(e) {\n\t\tvar rect = flusher.container.getBoundingClientRect();\n\t\tvar handleSize = 25;\n\t\treturn (\n\t\t\te.clientX >= rect.right - handleSize &&\n\t\t\te.clientY >= rect.bottom - handleSize\n\t\t);\n\t}\n}","import {\n  toggleEnableMenu,\n  togglePointerEvents,\n} from \"../interface/menu/menu.js\";\nimport { processMessageQueue } from \"../queue/queue.js\";\nimport { logToConsole } from \"./utils.js\";\nimport { setCustomPosition } from \"../interface/overlay.js\";\n\nimport Kick from \"../site/kick.js\";\n\nexport function checkResize(flusher) {\n  /* logToConsole(\"Check Resize\"); */\n  const target = flusher.props.external\n    ? flusher.video\n    : flusher.video.querySelector(\"video\") ?? flusher.video;\n\n  flusher.resizeTimer = null;\n  if (flusher.resizeObserver) flusher.resizeObserver.disconnect();\n  flusher.resizeObserver = new ResizeObserver((entries) => {\n    if (flusher.container !== null) flusher.container.style.display = \"none\";\n\n    for (let entry of entries) {\n      if (flusher.resizeTimer) clearTimeout(flusher.resizeTimer);\n      flusher.resizeTimer = setTimeout(() => {\n        for (let entry of entries) {\n\n          const rect = target.getBoundingClientRect();\n          let width = rect.width;\n          let height = rect.height;\n\n          window.currentUrl = window.location.href;\n\n          if ((width === null || width === 0) && (!height || height === 0)) {\n            if (flusher !== null) {\n              /* logToConsole(\"Remove Chat\"); */\n              const init = !flusher.props.external;\n              flusher.resizeObserver.disconnect();\n              flusher.resizeObserver = null;\n              for (const id of flusher.props.timeoutIds) {\n                clearTimeout(id);\n              }\n              flusher.provider.unbindRequests(flusher);\n              flusher = null;\n              if (init) Kick.init();\n            }\n\n            return;\n          }\n\n          /* logToConsole(\n            `Width ${Math.round(width)} height ${Math.round(height)}`\n          ); */\n\n          const oldWidth = flusher.props.parentWidth;\n          flusher.props.parentWidth = Math.trunc(width) * 2;\n          flusher.props.parentHeight = Math.trunc(height);\n\n          flusher.container.style.setProperty(\n            \"--flusher-width\",\n            `-${flusher.props.parentWidth}px`\n          );\n\n          flusher.toggle.setAttribute(\"domain\", flusher.props.domain);\n\n          const newFlushState =\n            flusher.states.flushState !== undefined\n              ? flusher.states.flushState\n                ? \"horizontal\"\n                : \"vertical\"\n              : flusher.states.flushState\n                ? \"horizontal\"\n                : \"vertical\";\n\n          flusher.container.setAttribute(\"layout\", newFlushState);\n\n          flusher.container.setAttribute(\"enabled\", flusher.states.chatEnabled);\n\n          flusher.container.setAttribute(\"shadow\", flusher.states.shadow);\n\n          flusher.container.setAttribute(\n            \"background\",\n            flusher.states.backgroundStates[flusher.states.backgroundState]\n          );\n\n          setAttribute(\n            flusher.container,\n            \"font\",\n            flusher.states.sizeStates,\n            flusher.states.fontState\n          );\n\n          flusher.container.setAttribute(\"time\", flusher.states.timeState);\n\n          if (flusher.props.isAeroKick) {\n            flusher.container.setAttribute(\"aerokick\", \"\");\n          }\n\n          toggleEnableMenu();\n\n          setCustomPosition(flusher);\n\n          const documentWidth = document.documentElement.clientWidth;\n          if (documentWidth < flusher.props.parentWidth / 2 + 10) {\n            flusher.props.isFullscreen = true;\n            startScrollingInterval(flusher);\n            flusher.props.videoSize = \"fullscreen\";\n          } else {\n            flusher.props.isFullscreen = false;\n            stopScrollingInterval(flusher);\n            if (document.querySelector('.sidebar')) {\n              flusher.props.videoSize = \"default\";\n            } else {\n              flusher.props.videoSize = \"theater\";\n            }\n          }\n\n          chrome.storage.local.get(\"positionsPerChannel\", function (result) {\n            var positionsPerChannel = result.positionsPerChannel || {};\n            var positionsArray = positionsPerChannel[flusher.props.channelName] || [];\n\n            var existingPositionIndex = positionsArray.findIndex(function (item) {\n              return item.videoSize === flusher.props.videoSize;\n            });\n\n            if (existingPositionIndex !== -1) {\n              const position = positionsArray[existingPositionIndex].position;\n              if (position.top) {\n                flusher.container.removeAttribute(\"position\");\n                var scaleFactor = window.innerWidth / window.outerWidth;\n                flusher.container.style.top = position.top > height ? height - 20 + \"px\" : Math.round(position.top * scaleFactor) + \"px\";\n                flusher.container.style.left = position.left > width ? width - 20 + \"px\" : Math.round(position.left * scaleFactor) + \"px\";\n              } else {\n                flusher.container.style.top = \"\";\n                flusher.container.style.left = \"\";\n                flusher.container.style.alignItems = \"\";\n                setAttribute(\n                  flusher.container,\n                  \"position\",\n                  flusher.states.positionStates,\n                  flusher.states.positionState\n                );\n              } if (position.width) {\n                flusher.container.removeAttribute(\"size\");\n                flusher.container.style.width = Math.round(position.width * scaleFactor) + \"px\";\n                flusher.container.style.height = Math.round(position.height * scaleFactor) + \"px\";\n              } else {\n                flusher.container.style.width = \"\";\n                flusher.container.style.height = \"\";\n                setAttribute(\n                  flusher.container,\n                  \"size\",\n                  flusher.states.sizeStates,\n                  flusher.states.sizeState\n                );\n              }\n            } else {\n              flusher.container.style.top = \"\";\n              flusher.container.style.left = \"\";\n              flusher.container.style.alignItems = \"\";\n              flusher.container.style.width = \"\";\n              flusher.container.style.height = \"\";\n              setAttribute(\n                flusher.container,\n                \"position\",\n                flusher.states.positionStates,\n                flusher.states.positionState\n              );\n              setAttribute(\n                flusher.container,\n                \"size\",\n                flusher.states.sizeStates,\n                flusher.states.sizeState\n              );\n            }\n          });\n\n          flusher.props.elementHeight = null;\n          flusher.container.style.display = \"flex\";\n          createIntroMessage(flusher);\n\n          if (oldWidth == null || oldWidth == 0) {\n            if (flusher.container === null) return;\n            if (flusher.states.chatEnabled)\n              flusher.provider.bindRequests(flusher);\n\n            flusher.props.loading = false;\n            processMessageQueue(flusher);\n            togglePointerEvents(flusher);\n\n            checkAddons(flusher);\n\n            /* temp fix toggle btn not clickable in theater */\n            const element = document.querySelector(\".z\\\\-\\\\[500\\\\].flex.w-screen\");\n            if (element) element.classList.remove(\"z-[500]\");\n\n            logToConsole(\n              `(${flusher.props.channelName} ${flusher.props.domain} ${flusher.props.isVod ? \"VOD\" : \"LIVE\"\n              }): Report bugs or collaborate at https://github.com/r0808914/Kick-Chat-Flusher`\n            );\n          } else {\n            flusher.states.flushState\n              ? flusher.clear()\n              : null;\n          }\n        }\n      }, 750);\n    }\n  });\n\n  flusher.resizeObserver.observe(flusher.video);\n\n  function checkAddons(flusher) {\n    let counter = 0;\n\n    const intervalId = setInterval(() => {\n      const KickTools = document.querySelector('.vjs-progress-control')?.style?.display == 'flex' ? true : false;\n      if (KickTools) {\n        logToConsole(`KickTools Detected`);\n        flusher.props.isKickTools = true;\n        clearInterval(intervalId);\n      }\n\n      counter++;\n\n      if (counter >= 5) {\n        clearInterval(intervalId);\n      }\n    }, 1000)\n    flusher.props.timeoutIds.push(intervalId);\n  }\n\n  function createIntroMessage(flusher) {\n    const introContent = document.createElement(\"div\");\n    introContent.classList.add(\"flusher-message\");\n\n    const emojiSpan = document.createElement(\"span\");\n    emojiSpan.textContent = String.fromCodePoint(0x1f389) + \" \";\n\n    const introSpan = document.createElement(\"span\");\n    introSpan.textContent = `thanks for testing (version..)`;\n    const introMessageSpan = document.createElement(\"span\");\n\n    introMessageSpan.append(emojiSpan, introSpan);\n\n    introContent.appendChild(introMessageSpan);\n    introContent.style.setProperty(\"--row\", 0);\n    introContent.classList.add(\"flusher-message\");\n\n    const parent = flusher.props.external ? flusher.container : document.body;\n    parent.append(introContent);\n    flusher.props.elementHeight = introContent.clientHeight;\n    flusher.props.maxRows = Math.ceil(\n      flusher.props.parentHeight / flusher.props.elementHeight\n    );\n    parent.removeChild(introContent);\n    flusher.setVerticalWidth();\n  }\n}\n\nfunction startScrollingInterval(flusher) {\n  if (flusher.props.scrollIntervalId) return;\n  scrollChat(flusher);\n  flusher.props.scrollIntervalId = setInterval(function () {\n    scrollChat(flusher);\n  }, 10000);\n}\n\nfunction setAttribute(element, attribute, states, stateKey) {\n  const state = states[stateKey];\n  const value = state.replace(/\\s/g, \"\");\n  element.setAttribute(attribute, value);\n}\n\nexport function stopScrollingInterval(flusher) {\n  if (!flusher.props.scrollIntervalId) return;\n  clearInterval(flusher.props.scrollIntervalId);\n  flusher.props.scrollIntervalId = null;\n}\n\nfunction scrollChat(flusher) {\n  const chatBtn = document.querySelector(\"#chatroom .justify-center.absolute\");\n  const chatContainer = document.querySelector(\"#chatroom [data-chat-entry]\");\n  if (flusher.props.isFullscreen && !flusher.props.isVod) {\n    if (chatBtn !== null) {\n      chatBtn.click();\n    }\n    if (chatContainer !== null) {\n      const chatContainerParent = chatContainer.closest(\".overflow-y-scroll\");\n      if (chatContainerParent !== null) {\n        chatContainerParent.scrollTop = chatContainerParent.scrollHeight;\n      }\n    }\n  }\n}\n","export function visibilityChange(flusher) {\n\t/* logToConsole(`Add visibilityChange`); */\n\n\tdocument.addEventListener('visibilitychange', function handleVisibilityChange() {\n\t\tif (!flusher || !flusher.states.flushState) return;\n\t\tif (document.hidden) {\n\t\t\tflusher.props.chatEnabledVisible = flusher.states.chatEnabled;\n\t\t\tflusher.states.chatEnabled = false;\n\t\t\tflusher.clear();\n\t\t} else {\n\t\t\tflusher.states.chatEnabled = flusher.props.chatEnabledVisible;\n\t\t}\n\t});\n}\n\nexport function getFont() {\n\tconst fontLink = document.createElement('link');\n\tfontLink.rel = 'stylesheet';\n\tfontLink.href = 'https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap';\n\treturn fontLink;\n}\n\nexport function logToConsole(message) {\n\tconst isChrome = navigator.userAgent.toLowerCase().includes('chrome');\n\tisChrome ? console.log(`%c Kick Chat Flusher %c ${message}`, 'background: #228B22; color: #FFFFFF; padding: 2px 0;', '') : console.log('Kick Chat Flusher - ', message);\n}\n\nexport function toTitleCase(str) {\n\tif (!str) return 'undefined';\n\tif (str === 'OFF' || str === 'ON') return str;\n\treturn str.toLowerCase().replace(/\\b\\w/g, function (char) {\n\t\treturn char.toUpperCase();\n\t});\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Kick from './site/kick.js';\nimport Ip2 from './site/ip2.js';\n\nwindow.location.hostname.includes('kick.com') ? setTimeout(Kick.init(), 2000) : Ip2.init();"],"names":["FlusherStates","FlusherProps","FlusherMessages","visibilityChange","logToConsole","stopScrollingInterval","Badges","Flusher","constructor","video","domain","channelName","aeroKick","states","props","badges","badgeTypeToSVG","external","isVod","window","location","href","includes","isAeroKick","provider","resetConnection","flusher","clearChat","resizeObserver","disconnect","clear","container","style","display","isEnabled","chatEnabled","elementQueue","length","messageQueue","lastRow","id","timeoutIds","clearTimeout","firstChild","removeChild","displayedMessages","lastPositionPerRow","rowQueue","isProcessingElements","isProcessingMessages","setVerticalWidth","elementHeight","sizeStates","sizeState","setProperty","processMessageQueue","processElementQueue","createUserBanMessage","socket","nativeChatObserver","channels","Set","subscribeChannel","chatroomId","has","subscriptionMessage","event","data","auth","channel","setupWebSocket","send","JSON","stringify","add","getHistory","apiUrl","hostId","response","fetch","ok","Error","status","json","messages","forEach","message","push","error","console","webSocketUrl","WebSocket","onmessage","parse","document","body","contains","onMessage","disposeChannel","addEventListener","loading","close","interceptNative","self","AeroKick","classList","nativeChat","waitForChat","querySelector","b","browser","chrome","defaultAvatar","runtime","getURL","flushState","setTimeout","checkDupe","childNodes","MutationObserver","mutations","nodesList","reverse","mutation","type","addedNodes","observerConfig","childList","subtree","observe","addedNode","nodeName","button","log","getAttribute","userId","isKickTools","opacity","isUserBanned","bannedUsers","some","user","spamState","uniqueString","divTextContent","textContent","emoteElements","querySelectorAll","emoteElement","emoteValue","exist","find","obj","key","prepareMessage","node","update","clonedNode","cloneNode","fontSize","marginTop","remove","elements","element","classes","classesToRemove","Array","from","filter","className","avatar","closest","animation","username","color","backgroundColor","onerror","src","trim","regexSentence","sentence","replace","regexChar","reply","chatEntry","childElementCount","firstElementChild","timeState","chatEntryDiv","addMessage","observeNestedChildren","getRandomInt","Math","floor","random","parentNode","observer","replaceWith","messageObservers","set","parent","parentElement","Promise","resolve","config","attributes","found","mutationCallback","mutationsList","nodeType","hasAttribute","bindRequests","bindTimeout","toLowerCase","chatroom","badgeCache","subscriber_badges","unbindRequests","clickOutsideHandlerFunction","isFullscreen","maxRows","Map","backgroundStates","positionStates","backgroundState","positionState","fontState","slide","shadow","menuHtml","parser","DOMParser","doc","parseFromString","menu","createToggle","svgToggle","dragElement","toTitleCase","createMenu","toggledClass","domMenu","shadowBox","createElement","zIndex","shadowRoot","attachShadow","mode","linkElement","rel","appendChild","menuLink","setAttribute","append","settingsMenu","layoutMenu","messageMenu","overlayMenu","closeBtn","hideMenu","homeBtn","open","storeBtn","userAgent","navigator","positionBtn","divInsidePosition","storage","local","get","result","top","left","alignItems","positionsPerChannel","positionsArray","existingPositionIndex","findIndex","item","videoSize","position","undefined","sizeBtn","divInsideSize","width","height","size","backgroundBtn","divInsideBackground","setExtensionStorageItem","baseMenu","settingsBtn","settingsBackBtn","settingsCloseBtn","layoutCloseBtn","layoutMenuBtn","layoutBackBtn","messageCloseBtn","messageMenuBtn","messageBackBtn","overlayCloseBtn","overlayMenuBtn","overlayBackBtn","spamBtnContainer","spamBtn","toggleElement","currentTarget","toggle","newSpamEnabled","fontBtn","divInsideFont","replyToggleContainer","replyToggle","newReplyEnabled","childNode","slideToggleContainer","slideToggle","newSlideEnabled","shadowToggleContainer","shadowToggle","newShadowEnabled","timeToggleContainer","timeToggle","newTimeEnabled","flusherToggleContainer","flushToggle","newFlushState","togglePointerEvents","flusherToggle","newChatEnabled","nodeValue","toggleEnableMenu","value","elementsToToggle","getElementById","removeEventListener","clickOutsideHandler","target","isClickInsideShadowBox","path","composedPath","checkResize","getFont","createChat","chatFlusher","flusherDiv","mainStylesDom","overlayStyle","head","font","menuStylesDom","menuStyle","getExtensionStorageItem","setCustomPosition","defaultValue","storedValue","toggleHtml","domToggle","popupMenu","existingButton","toggleBtn","marginRight","insertBefore","nextSibling","stopPropagation","showMenu","visible","selectRow","selectedRow","positions","i","run","row","prepareAnimation","startAnimation","messageData","space","rowIndex","lastItem","overlap","messageWidth","lastContainer","requestAnimationFrame","offsetWidth","rect1","getBoundingClientRect","rect2","right","requestNext","timeNeeded","ceil","parentWidth","timeoutId","checkQueue","index","indexOf","splice","queueItem","shift","checkRow","oldest","entryId","appendVertical","timestamp","Date","created_at","dataset","lastTimestamp","current","currentTimestamp","previousSibling","children","lastChild","delete","getMessageKey","messageId","keyValue","dupe","ignore","chatroom_id","eventType","eventName","createMessage","createGiftedMessage","createFollowersMessage","createHostMessage","createSubMessage","queueLength","wait","trunc","appendMessage","sender","content","reduced","reduceRepeatedSentences","messageKeyData","messageDiv","badgeSpan","badgeElements","getBadges","badgeElement","usernameSpan","identity","boldSpan","contentSpan","emoteRegex","lastIndex","match","exec","textBeforeEmote","slice","textBeforeNode","img","name","alt","textAfterLastEmote","textAfterNode","tagName","input","badgeArray","badge","cachedBadge","getBadgeImage","badgeImage","months","count","correspondingBadge","findClosestBadge","reduce","currentBadge","badge_image","checkForBadges","firstChatIdentity","baseBadge","badgeText","text","html","imgElement","imgUrl","newImg","svgElement","svgCopy","warn","bannedUser","bannedByUser","banned_by","banMessageContent","banMessageSpan","logText","expires_at","expiresAt","timeDifference","timeDiffText","humanizeDuration","addBannedUser","expiresText","createTextNode","now","existingUserIndex","bannedBy","getTime","expirationTime","timeUntilExpiration","removeBannedUser","currentUser","currentTime","unbanMessageContent","unbanMessageSpan","unbanText","milliseconds","seconds","minutes","hours","days","weeks","years","subscriptionMessageContent","emojiSpan","String","fromCodePoint","subscriptionMessageSpan","subSpan","hostUsername","host_username","viewersCount","number_viewers","hostMessageContent","viewersCountSpan","hostMessageSpan","gifterUsername","gifter_username","giftedUsernames","gifted_usernames","giftedContent","gifterUsernameSpan","giftedSpan","followersCount","followersDiff","lastFollowersCount","messageContent","followersMessageSpan","Ip2","init","targetNode","waitForCondition","callback","hasFlusherAttribute","iframe","createChannel","URL","pathname","conditionCallback","reject","checkCondition","Kick","stopObserver","observeVideo","videoObserver","getElementsByTagName","innerText","broadcasterSVG","founderSVG","moderatorSVG","ogSVG","staffSVG","subGifter1SVG","subGufter2SVG","subscriberSVG","verifiedSVG","vipSVG","parseSVGStringToElement","svgString","xmlDoc","documentElement","subscriber","founder","broadcaster","moderator","og","staff","sub_gifter","sub_gifter_1","subGifter2SVG","verified","vip","pos1","pos2","pos3","pos4","onmousedown","e","preventDefault","setPosition","isInResizeHandle","clientX","clientY","onmouseup","closeResize","onmousemove","resizeElement","closeDragElement","offsetTop","offsetLeft","offsetHeight","scaleFactor","innerWidth","outerWidth","rect","rectVideo","newPosition","round","removeAttribute","handleSize","bottom","resizeTimer","ResizeObserver","entries","entry","currentUrl","oldWidth","parentHeight","documentWidth","clientWidth","startScrollingInterval","createIntroMessage","checkAddons","counter","intervalId","setInterval","KickTools","clearInterval","introContent","introSpan","introMessageSpan","clientHeight","scrollIntervalId","scrollChat","attribute","stateKey","state","chatBtn","chatContainer","click","chatContainerParent","scrollTop","scrollHeight","handleVisibilityChange","hidden","chatEnabledVisible","fontLink","isChrome","str","char","toUpperCase","hostname"],"sourceRoot":""}